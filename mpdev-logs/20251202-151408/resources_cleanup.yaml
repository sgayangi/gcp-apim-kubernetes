apiVersion: v1
items:
- apiVersion: v1
  kind: Pod
  metadata:
    annotations:
      checksum/config: f1386741e0bb8883657604c6a4c07b77097ac794746112a899cdbe129c4514ca
    creationTimestamp: "2025-12-02T09:45:29Z"
    generateName: apkagent-568cd8f787-
    labels:
      app.kubernetes.io/app: apim-apk-agent
      app.kubernetes.io/instance: apptest-cjbnvn9r
      app.kubernetes.io/name: apkagent
      pod-template-hash: 568cd8f787
    name: apkagent-568cd8f787-cx797
    namespace: apptest-cjbnvn9r
    ownerReferences:
    - apiVersion: apps/v1
      blockOwnerDeletion: true
      controller: true
      kind: ReplicaSet
      name: apkagent-568cd8f787
      uid: a1b2d655-acf6-4bc1-8373-8db47635723c
    resourceVersion: "1764668729684879005"
    uid: 40ce7d9c-4edc-44ae-abc1-f9238c687dee
  spec:
    containers:
    - env:
      - name: APIM_APK_AGENT_PRIVATE_KEY_PATH
        value: /home/wso2/security/keystore/apk-agent.key
      - name: APIM_APK_AGENT_PUBLIC_CERT_PATH
        value: /home/wso2/security/keystore/apk-agent.crt
      - name: APIM_APK_AGENT_SERVER_NAME
        value: apim-apk-agent-service.apptest-cjbnvn9r.svc
      - name: APIM_APK_AGENT_GRPC_PORT
        value: "18000"
      image: us-docker.pkg.dev/wso2-marketplace-public/wso2-marketplace/apim-apk-agent:4.5
      imagePullPolicy: Always
      livenessProbe:
        exec:
          command:
          - sh
          - check_health.sh
        failureThreshold: 5
        initialDelaySeconds: 20
        periodSeconds: 20
        successThreshold: 1
        timeoutSeconds: 1
      name: apkagent
      ports:
      - containerPort: 18000
        name: grpc-port
        protocol: TCP
      - containerPort: 18001
        name: rest-port
        protocol: TCP
      readinessProbe:
        exec:
          command:
          - sh
          - check_health.sh
        failureThreshold: 5
        initialDelaySeconds: 20
        periodSeconds: 20
        successThreshold: 1
        timeoutSeconds: 1
      resources:
        limits:
          cpu: 200m
          memory: 256Mi
        requests:
          cpu: 100m
          memory: 128Mi
      terminationMessagePath: /dev/termination-log
      terminationMessagePolicy: File
      volumeMounts:
      - mountPath: /home/wso2/conf/
        name: log-conf-volume
      - mountPath: /home/wso2/security/keystore/apk-agent.key
        name: apk-agent-certificates
        subPath: tls.key
      - mountPath: /home/wso2/security/keystore/apk-agent.crt
        name: apk-agent-certificates
        subPath: tls.crt
      - mountPath: /home/wso2/security/truststore/apk-agent-ca.crt
        name: apk-agent-certificates
        subPath: ca.crt
      - mountPath: /var/run/secrets/kubernetes.io/serviceaccount
        name: kube-api-access-gnc8r
        readOnly: true
    dnsPolicy: ClusterFirst
    enableServiceLinks: true
    nodeName: gke-wso2-apim-gke-test-cpu-pool-370e02e4-tdv6
    preemptionPolicy: PreemptLowerPriority
    priority: 0
    restartPolicy: Always
    schedulerName: default-scheduler
    securityContext: {}
    serviceAccount: wso2agent-platform
    serviceAccountName: wso2agent-platform
    terminationGracePeriodSeconds: 30
    tolerations:
    - effect: NoExecute
      key: node.kubernetes.io/not-ready
      operator: Exists
      tolerationSeconds: 300
    - effect: NoExecute
      key: node.kubernetes.io/unreachable
      operator: Exists
      tolerationSeconds: 300
    volumes:
    - configMap:
        defaultMode: 420
        name: apptest-cjbnvn9r-log-conf
      name: log-conf-volume
    - name: apk-agent-certificates
      secret:
        defaultMode: 420
        secretName: apk-agent-server-cert
    - name: kube-api-access-gnc8r
      projected:
        defaultMode: 420
        sources:
        - serviceAccountToken:
            expirationSeconds: 3607
            path: token
        - configMap:
            items:
            - key: ca.crt
              path: ca.crt
            name: kube-root-ca.crt
        - downwardAPI:
            items:
            - fieldRef:
                apiVersion: v1
                fieldPath: metadata.namespace
              path: namespace
  status:
    conditions:
    - lastProbeTime: null
      lastTransitionTime: "2025-12-02T09:45:29Z"
      status: "False"
      type: PodReadyToStartContainers
    - lastProbeTime: null
      lastTransitionTime: "2025-12-02T09:45:29Z"
      status: "True"
      type: Initialized
    - lastProbeTime: null
      lastTransitionTime: "2025-12-02T09:45:29Z"
      message: 'containers with unready status: [apkagent]'
      reason: ContainersNotReady
      status: "False"
      type: Ready
    - lastProbeTime: null
      lastTransitionTime: "2025-12-02T09:45:29Z"
      message: 'containers with unready status: [apkagent]'
      reason: ContainersNotReady
      status: "False"
      type: ContainersReady
    - lastProbeTime: null
      lastTransitionTime: "2025-12-02T09:45:29Z"
      status: "True"
      type: PodScheduled
    containerStatuses:
    - image: us-docker.pkg.dev/wso2-marketplace-public/wso2-marketplace/apim-apk-agent:4.5
      imageID: ""
      lastState: {}
      name: apkagent
      ready: false
      restartCount: 0
      started: false
      state:
        waiting:
          reason: ContainerCreating
      volumeMounts:
      - mountPath: /home/wso2/conf/
        name: log-conf-volume
      - mountPath: /home/wso2/security/keystore/apk-agent.key
        name: apk-agent-certificates
      - mountPath: /home/wso2/security/keystore/apk-agent.crt
        name: apk-agent-certificates
      - mountPath: /home/wso2/security/truststore/apk-agent-ca.crt
        name: apk-agent-certificates
      - mountPath: /var/run/secrets/kubernetes.io/serviceaccount
        name: kube-api-access-gnc8r
        readOnly: true
        recursiveReadOnly: Disabled
    hostIP: 10.142.15.194
    hostIPs:
    - ip: 10.142.15.194
    phase: Pending
    qosClass: Burstable
    startTime: "2025-12-02T09:45:29Z"
- apiVersion: v1
  kind: Pod
  metadata:
    annotations:
      checksum.am.cp.conf: b161029a8624c675a703ea9441f0b0c44282b8c42035c342ae10a7b3cac9e75f
      checksum.am.cp.conf.log4j2: 6dd938f39d31dc49520a30c28c5915a3df355f79250460812b1b3c94d19754ba
      checksum.am.cp.conf.secret: 6931efed2d9b235c16cb2483d011065a68d48e84e9adb262621f41a66645fbfb
      cloudmarketplace.googleapis.com/product.metadata: v1:{"services":[{"service_name":"wso2-apimanager.endpoints.wso2-marketplace-public.cloud.goog",
        "service_level":"default"}]}
    creationTimestamp: "2025-12-02T09:45:28Z"
    generateName: apptest-cjbnvn9r-acp-deployment-1-57955fdcc4-
    labels:
      deployment: apptest-cjbnvn9r-acp
      node: apptest-cjbnvn9r-acp-1
      pod-template-hash: 57955fdcc4
      product: apim
    name: apptest-cjbnvn9r-acp-deployment-1-57955fdcc4-qlss4
    namespace: apptest-cjbnvn9r
    ownerReferences:
    - apiVersion: apps/v1
      blockOwnerDeletion: true
      controller: true
      kind: ReplicaSet
      name: apptest-cjbnvn9r-acp-deployment-1-57955fdcc4
      uid: 3dd6059a-1d6c-430b-8963-981ee2254600
    resourceVersion: "1764668730577295003"
    uid: f9025aa6-1298-424c-86e3-1630a56eb323
  spec:
    affinity:
      podAntiAffinity:
        preferredDuringSchedulingIgnoredDuringExecution:
        - podAffinityTerm:
            labelSelector:
              matchExpressions:
              - key: deployment
                operator: In
                values:
                - apptest-cjbnvn9r-acp
            topologyKey: topology.kubernetes.io/zone
          weight: 100
    containers:
    - env:
      - name: PROFILE_NAME
        value: default
      - name: NODE_IP
        valueFrom:
          fieldRef:
            apiVersion: v1
            fieldPath: status.podIP
      - name: JVM_MEM_OPTS
        value: -Xms2048m -Xmx2048m
      image: us-docker.pkg.dev/wso2-marketplace-public/wso2-marketplace/wso2am-acp:4.5
      imagePullPolicy: Always
      lifecycle:
        preStop:
          exec:
            command:
            - sh
            - -c
            - |
              echo "Pre stop hook triggered"; sleep 10; echo "Shutdown APIM Server"; ${WSO2_SERVER_HOME}/bin/api-cp.sh stop
      livenessProbe:
        failureThreshold: 3
        httpGet:
          path: /services/Version
          port: 9763
          scheme: HTTP
        initialDelaySeconds: 60
        periodSeconds: 10
        successThreshold: 1
        timeoutSeconds: 1
      name: wso2am-control-plane
      ports:
      - containerPort: 9763
        protocol: TCP
      - containerPort: 9443
        protocol: TCP
      - containerPort: 9711
        protocol: TCP
      - containerPort: 9611
        protocol: TCP
      - containerPort: 5672
        protocol: TCP
      readinessProbe:
        failureThreshold: 3
        httpGet:
          path: /services/Version
          port: 9763
          scheme: HTTP
        initialDelaySeconds: 60
        periodSeconds: 10
        successThreshold: 1
        timeoutSeconds: 1
      resources:
        limits:
          cpu: "3"
          memory: 5Gi
        requests:
          cpu: "2"
          memory: 2Gi
      securityContext:
        allowPrivilegeEscalation: false
        capabilities:
          drop:
          - all
        runAsNonRoot: true
        runAsUser: 10001
      startupProbe:
        exec:
          command:
          - /bin/sh
          - -c
          - timeout 1 bash -c "</dev/tcp/localhost/9443"
        failureThreshold: 3
        initialDelaySeconds: 60
        periodSeconds: 10
        successThreshold: 1
        timeoutSeconds: 1
      terminationMessagePath: /dev/termination-log
      terminationMessagePolicy: File
      volumeMounts:
      - mountPath: /home/wso2carbon/wso2-config-volume/repository/conf/deployment.toml
        name: wso2am-control-plane-conf
        subPath: deployment.toml
      - mountPath: /home/wso2carbon/docker-entrypoint.sh
        name: wso2am-control-plane-entrypoint
        subPath: docker-entrypoint.sh
      - mountPath: /home/wso2carbon/wso2-config-volume/repository/conf/log4j2.properties
        name: wso2am-control-plane-log4j2
        subPath: log4j2.properties
      - mountPath: /home/wso2carbon/wso2-config-volume/repository/deployment/server/webapps/admin/site/public/conf/settings.json
        name: wso2am-conf-admin-settings
        subPath: settings.json
      - mountPath: /home/wso2carbon/wso2-config-volume/repository/deployment/server/webapps/devportal/site/public/theme/settings.json
        name: wso2am-conf-devportal-settings
        subPath: settings.json
      - mountPath: /home/wso2carbon/wso2-config-volume/repository/deployment/server/webapps/publisher/site/public/conf/settings.json
        name: wso2am-conf-publisher-settings
        subPath: settings.json
      - mountPath: /var/run/secrets/kubernetes.io/serviceaccount
        name: kube-api-access-qbwxl
        readOnly: true
    dnsPolicy: ClusterFirst
    enableServiceLinks: true
    nodeName: gke-wso2-apim-gke-test-cpu-pool-583b68cf-21fl
    preemptionPolicy: PreemptLowerPriority
    priority: 0
    restartPolicy: Always
    schedulerName: default-scheduler
    securityContext:
      seccompProfile:
        type: RuntimeDefault
    serviceAccount: default
    serviceAccountName: default
    terminationGracePeriodSeconds: 30
    tolerations:
    - effect: NoExecute
      key: node.kubernetes.io/not-ready
      operator: Exists
      tolerationSeconds: 300
    - effect: NoExecute
      key: node.kubernetes.io/unreachable
      operator: Exists
      tolerationSeconds: 300
    volumes:
    - configMap:
        defaultMode: 263
        name: apptest-cjbnvn9r-acp-conf-1
      name: wso2am-control-plane-conf
    - configMap:
        defaultMode: 263
        name: apptest-cjbnvn9r-acp-conf-entrypoint
      name: wso2am-control-plane-entrypoint
    - configMap:
        defaultMode: 263
        name: apptest-cjbnvn9r-acp-conf-log4j2
      name: wso2am-control-plane-log4j2
    - configMap:
        defaultMode: 263
        name: apptest-cjbnvn9r-acp-conf-admin-settings
      name: wso2am-conf-admin-settings
    - configMap:
        defaultMode: 263
        name: apptest-cjbnvn9r-acp-conf-devportal-settings
      name: wso2am-conf-devportal-settings
    - configMap:
        defaultMode: 263
        name: apptest-cjbnvn9r-acp-conf-publisher-settings
      name: wso2am-conf-publisher-settings
    - name: kube-api-access-qbwxl
      projected:
        defaultMode: 420
        sources:
        - serviceAccountToken:
            expirationSeconds: 3607
            path: token
        - configMap:
            items:
            - key: ca.crt
              path: ca.crt
            name: kube-root-ca.crt
        - downwardAPI:
            items:
            - fieldRef:
                apiVersion: v1
                fieldPath: metadata.namespace
              path: namespace
  status:
    conditions:
    - lastProbeTime: null
      lastTransitionTime: "2025-12-02T09:45:30Z"
      status: "True"
      type: PodReadyToStartContainers
    - lastProbeTime: null
      lastTransitionTime: "2025-12-02T09:45:28Z"
      status: "True"
      type: Initialized
    - lastProbeTime: null
      lastTransitionTime: "2025-12-02T09:45:28Z"
      message: 'containers with unready status: [wso2am-control-plane]'
      reason: ContainersNotReady
      status: "False"
      type: Ready
    - lastProbeTime: null
      lastTransitionTime: "2025-12-02T09:45:28Z"
      message: 'containers with unready status: [wso2am-control-plane]'
      reason: ContainersNotReady
      status: "False"
      type: ContainersReady
    - lastProbeTime: null
      lastTransitionTime: "2025-12-02T09:45:28Z"
      status: "True"
      type: PodScheduled
    containerStatuses:
    - containerID: containerd://75ad5030f1808d3f872216c0b454e7e36fccea5d6980770ad2563bf72f212b1a
      image: us-docker.pkg.dev/wso2-marketplace-public/wso2-marketplace/wso2am-acp:4.5
      imageID: us-docker.pkg.dev/wso2-marketplace-public/wso2-marketplace/wso2am-acp@sha256:bfb3fd228700cab79b89c8bd38890a1a5ba3fd03bd3f51bb969c07d9b2e9922d
      lastState: {}
      name: wso2am-control-plane
      ready: false
      restartCount: 0
      started: false
      state:
        running:
          startedAt: "2025-12-02T09:45:29Z"
      volumeMounts:
      - mountPath: /home/wso2carbon/wso2-config-volume/repository/conf/deployment.toml
        name: wso2am-control-plane-conf
      - mountPath: /home/wso2carbon/docker-entrypoint.sh
        name: wso2am-control-plane-entrypoint
      - mountPath: /home/wso2carbon/wso2-config-volume/repository/conf/log4j2.properties
        name: wso2am-control-plane-log4j2
      - mountPath: /home/wso2carbon/wso2-config-volume/repository/deployment/server/webapps/admin/site/public/conf/settings.json
        name: wso2am-conf-admin-settings
      - mountPath: /home/wso2carbon/wso2-config-volume/repository/deployment/server/webapps/devportal/site/public/theme/settings.json
        name: wso2am-conf-devportal-settings
      - mountPath: /home/wso2carbon/wso2-config-volume/repository/deployment/server/webapps/publisher/site/public/conf/settings.json
        name: wso2am-conf-publisher-settings
      - mountPath: /var/run/secrets/kubernetes.io/serviceaccount
        name: kube-api-access-qbwxl
        readOnly: true
        recursiveReadOnly: Disabled
    hostIP: 10.142.15.193
    hostIPs:
    - ip: 10.142.15.193
    phase: Running
    podIP: 10.76.0.25
    podIPs:
    - ip: 10.76.0.25
    qosClass: Burstable
    startTime: "2025-12-02T09:45:28Z"
- apiVersion: v1
  kind: Pod
  metadata:
    annotations:
      sidecar.istio.io/inject: "false"
    creationTimestamp: "2025-12-02T09:45:14Z"
    generateName: apptest-cjbnvn9r-deployer-
    labels:
      batch.kubernetes.io/controller-uid: 1b19e41d-736d-4202-87d7-e4465fe0f6e5
      batch.kubernetes.io/job-name: apptest-cjbnvn9r-deployer
      controller-uid: 1b19e41d-736d-4202-87d7-e4465fe0f6e5
      job-name: apptest-cjbnvn9r-deployer
    name: apptest-cjbnvn9r-deployer-tlf2b
    namespace: apptest-cjbnvn9r
    ownerReferences:
    - apiVersion: batch/v1
      blockOwnerDeletion: true
      controller: true
      kind: Job
      name: apptest-cjbnvn9r-deployer
      uid: 1b19e41d-736d-4202-87d7-e4465fe0f6e5
    resourceVersion: "1764668733995343007"
    uid: b3c831d7-2786-480f-8ad3-22dc5dade056
  spec:
    containers:
    - command:
      - /bin/deploy_with_tests.sh
      image: us-docker.pkg.dev/wso2-marketplace-public/wso2-marketplace/deployer:4.5
      imagePullPolicy: Always
      name: deployer
      resources:
        requests:
          cpu: 100m
          memory: 100Mi
      terminationMessagePath: /dev/termination-log
      terminationMessagePolicy: File
      volumeMounts:
      - mountPath: /data/values.yaml
        name: config-volume
        readOnly: true
        subPath: values.yaml
      - mountPath: /var/run/secrets/kubernetes.io/serviceaccount
        name: kube-api-access-jf8p4
        readOnly: true
    dnsPolicy: ClusterFirst
    enableServiceLinks: true
    nodeName: gke-wso2-apim-gke-test-cpu-pool-370e02e4-tdv6
    preemptionPolicy: PreemptLowerPriority
    priority: 0
    restartPolicy: Never
    schedulerName: default-scheduler
    securityContext: {}
    serviceAccount: apptest-cjbnvn9r-deployer-sa
    serviceAccountName: apptest-cjbnvn9r-deployer-sa
    terminationGracePeriodSeconds: 30
    tolerations:
    - effect: NoExecute
      key: node.kubernetes.io/not-ready
      operator: Exists
      tolerationSeconds: 300
    - effect: NoExecute
      key: node.kubernetes.io/unreachable
      operator: Exists
      tolerationSeconds: 300
    volumes:
    - name: config-volume
      secret:
        defaultMode: 420
        secretName: apptest-cjbnvn9r-deployer-config
    - name: kube-api-access-jf8p4
      projected:
        defaultMode: 420
        sources:
        - serviceAccountToken:
            expirationSeconds: 3607
            path: token
        - configMap:
            items:
            - key: ca.crt
              path: ca.crt
            name: kube-root-ca.crt
        - downwardAPI:
            items:
            - fieldRef:
                apiVersion: v1
                fieldPath: metadata.namespace
              path: namespace
  status:
    conditions:
    - lastProbeTime: null
      lastTransitionTime: "2025-12-02T09:45:32Z"
      status: "False"
      type: PodReadyToStartContainers
    - lastProbeTime: null
      lastTransitionTime: "2025-12-02T09:45:14Z"
      status: "True"
      type: Initialized
    - lastProbeTime: null
      lastTransitionTime: "2025-12-02T09:45:31Z"
      reason: PodFailed
      status: "False"
      type: Ready
    - lastProbeTime: null
      lastTransitionTime: "2025-12-02T09:45:31Z"
      reason: PodFailed
      status: "False"
      type: ContainersReady
    - lastProbeTime: null
      lastTransitionTime: "2025-12-02T09:45:14Z"
      status: "True"
      type: PodScheduled
    containerStatuses:
    - containerID: containerd://3628dbe8ae387d8500c5215de798aab2ec2b5db31853a1c9ee838641664f69b0
      image: us-docker.pkg.dev/wso2-marketplace-public/wso2-marketplace/deployer:4.5
      imageID: us-docker.pkg.dev/wso2-marketplace-public/wso2-marketplace/deployer@sha256:fd557bd06bdd8ee5cdb4733b3e575015db610b57a6653ec6ed05d45e4be6b28c
      lastState: {}
      name: deployer
      ready: false
      restartCount: 0
      started: false
      state:
        terminated:
          containerID: containerd://3628dbe8ae387d8500c5215de798aab2ec2b5db31853a1c9ee838641664f69b0
          exitCode: 1
          finishedAt: "2025-12-02T09:45:31Z"
          reason: Error
          startedAt: "2025-12-02T09:45:16Z"
      volumeMounts:
      - mountPath: /data/values.yaml
        name: config-volume
        readOnly: true
        recursiveReadOnly: Disabled
      - mountPath: /var/run/secrets/kubernetes.io/serviceaccount
        name: kube-api-access-jf8p4
        readOnly: true
        recursiveReadOnly: Disabled
    hostIP: 10.142.15.194
    hostIPs:
    - ip: 10.142.15.194
    phase: Failed
    podIP: 10.76.1.47
    podIPs:
    - ip: 10.76.1.47
    qosClass: Burstable
    startTime: "2025-12-02T09:45:14Z"
- apiVersion: v1
  kind: Pod
  metadata:
    annotations:
      checksum/config: 18fd8554c652c099ae03055089c498ad1bd3845c0d82adc502056aebb34c5332
    creationTimestamp: "2025-12-02T09:45:28Z"
    generateName: apptest-cjbnvn9r-wso2-apk-adapter-deployment-b599d79c6-
    labels:
      app.kubernetes.io/app: adapter
      app.kubernetes.io/release: apptest-cjbnvn9r
      pod-template-hash: b599d79c6
    name: apptest-cjbnvn9r-wso2-apk-adapter-deployment-b599d79c6-7mrzs
    namespace: apptest-cjbnvn9r
    ownerReferences:
    - apiVersion: apps/v1
      blockOwnerDeletion: true
      controller: true
      kind: ReplicaSet
      name: apptest-cjbnvn9r-wso2-apk-adapter-deployment-b599d79c6
      uid: 1e46a5f3-160a-4bb2-97c6-d0acb10ad94e
    resourceVersion: "1764668728945375014"
    uid: a5a57412-fe25-4041-8199-9b2a21de2530
  spec:
    affinity:
      podAntiAffinity:
        preferredDuringSchedulingIgnoredDuringExecution:
        - podAffinityTerm:
            labelSelector:
              matchExpressions:
              - key: app.kubernetes.io/app
                operator: In
                values:
                - adapter
            topologyKey: topology.kubernetes.io/zone
          weight: 100
    containers:
    - env:
      - name: OPERATOR_POD_NAMESPACE
        valueFrom:
          fieldRef:
            apiVersion: v1
            fieldPath: metadata.namespace
      - name: ADAPTER_PRIVATE_KEY_PATH
        value: /home/wso2/security/keystore/adapter.key
      - name: ADAPTER_PUBLIC_CERT_PATH
        value: /home/wso2/security/keystore/adapter.crt
      - name: ADAPTER_SERVER_NAME
        value: apptest-cjbnvn9r-wso2-apk-adapter-service.apptest-cjbnvn9r.svc
      image: us-docker.pkg.dev/wso2-marketplace-public/wso2-marketplace/apk-adapter:4.5
      imagePullPolicy: Always
      livenessProbe:
        exec:
          command:
          - sh
          - check_health.sh
        failureThreshold: 5
        initialDelaySeconds: 20
        periodSeconds: 20
        successThreshold: 1
        timeoutSeconds: 1
      name: adapter
      ports:
      - containerPort: 18000
        protocol: TCP
      - containerPort: 8765
        protocol: TCP
      - containerPort: 18005
        protocol: TCP
      readinessProbe:
        exec:
          command:
          - sh
          - check_health.sh
        failureThreshold: 5
        initialDelaySeconds: 20
        periodSeconds: 20
        successThreshold: 1
        timeoutSeconds: 1
      resources:
        limits:
          cpu: 200m
          memory: 128Mi
        requests:
          cpu: 50m
          memory: 64Mi
      securityContext:
        allowPrivilegeEscalation: false
        capabilities:
          drop:
          - ALL
        readOnlyRootFilesystem: true
      terminationMessagePath: /dev/termination-log
      terminationMessagePolicy: File
      volumeMounts:
      - mountPath: /home/wso2/security/keystore/adapter.key
        name: adapter-keystore-secret-volume
        subPath: tls.key
      - mountPath: /home/wso2/security/keystore/adapter.crt
        name: adapter-keystore-secret-volume
        subPath: tls.crt
      - mountPath: /home/wso2/security/truststore/adapter-ca.crt
        name: adapter-keystore-secret-volume
        subPath: ca.crt
      - mountPath: /home/wso2/security/truststore/router.crt
        name: router-truststore-secret-volume
        subPath: tls.crt
      - mountPath: /home/wso2/security/truststore/enforcer.crt
        name: enforcer-truststore-secret-volume
        subPath: tls.crt
      - mountPath: /home/wso2/security/truststore/consul
        name: adapter-truststore-consul-secret-volume
      - mountPath: /home/wso2/conf/
        name: log-conf-volume
      - mountPath: /home/wso2/security/truststore/wso2-apim-carbon.pem
        name: enforcer-apikey-cert
        subPath: wso2-apim-carbon.pem
      - mountPath: /var/run/secrets/kubernetes.io/serviceaccount
        name: kube-api-access-lv75d
        readOnly: true
    dnsPolicy: ClusterFirst
    enableServiceLinks: true
    nodeName: gke-wso2-apim-gke-test-cpu-pool-370e02e4-tdv6
    preemptionPolicy: PreemptLowerPriority
    priority: 0
    restartPolicy: Always
    schedulerName: default-scheduler
    securityContext:
      runAsNonRoot: true
      seccompProfile:
        type: RuntimeDefault
    serviceAccount: wso2apk-platform
    serviceAccountName: wso2apk-platform
    terminationGracePeriodSeconds: 30
    tolerations:
    - effect: NoExecute
      key: node.kubernetes.io/not-ready
      operator: Exists
      tolerationSeconds: 300
    - effect: NoExecute
      key: node.kubernetes.io/unreachable
      operator: Exists
      tolerationSeconds: 300
    volumes:
    - name: adapter-keystore-secret-volume
      secret:
        defaultMode: 420
        secretName: apptest-cjbnvn9r-wso2-apk-adapter-server-cert
    - name: adapter-truststore-consul-secret-volume
      secret:
        defaultMode: 420
        secretName: apptest-cjbnvn9r-wso2-apk-adapter-truststore-consul-secret
    - configMap:
        defaultMode: 420
        name: apptest-cjbnvn9r-wso2-apk-log-conf
      name: log-conf-volume
    - emptyDir: {}
      name: router-truststore-secret-volume
    - name: enforcer-truststore-secret-volume
      secret:
        defaultMode: 420
        secretName: apptest-cjbnvn9r-wso2-apk-enforcer-server-cert
    - name: enforcer-apikey-cert
      secret:
        defaultMode: 420
        secretName: apptest-cjbnvn9r-wso2-apk-enforcer-truststore-secret
    - name: kube-api-access-lv75d
      projected:
        defaultMode: 420
        sources:
        - serviceAccountToken:
            expirationSeconds: 3607
            path: token
        - configMap:
            items:
            - key: ca.crt
              path: ca.crt
            name: kube-root-ca.crt
        - downwardAPI:
            items:
            - fieldRef:
                apiVersion: v1
                fieldPath: metadata.namespace
              path: namespace
  status:
    conditions:
    - lastProbeTime: null
      lastTransitionTime: "2025-12-02T09:45:28Z"
      status: "False"
      type: PodReadyToStartContainers
    - lastProbeTime: null
      lastTransitionTime: "2025-12-02T09:45:28Z"
      status: "True"
      type: Initialized
    - lastProbeTime: null
      lastTransitionTime: "2025-12-02T09:45:28Z"
      message: 'containers with unready status: [adapter]'
      reason: ContainersNotReady
      status: "False"
      type: Ready
    - lastProbeTime: null
      lastTransitionTime: "2025-12-02T09:45:28Z"
      message: 'containers with unready status: [adapter]'
      reason: ContainersNotReady
      status: "False"
      type: ContainersReady
    - lastProbeTime: null
      lastTransitionTime: "2025-12-02T09:45:28Z"
      status: "True"
      type: PodScheduled
    containerStatuses:
    - image: us-docker.pkg.dev/wso2-marketplace-public/wso2-marketplace/apk-adapter:4.5
      imageID: ""
      lastState: {}
      name: adapter
      ready: false
      restartCount: 0
      started: false
      state:
        waiting:
          reason: ContainerCreating
      volumeMounts:
      - mountPath: /home/wso2/security/keystore/adapter.key
        name: adapter-keystore-secret-volume
      - mountPath: /home/wso2/security/keystore/adapter.crt
        name: adapter-keystore-secret-volume
      - mountPath: /home/wso2/security/truststore/adapter-ca.crt
        name: adapter-keystore-secret-volume
      - mountPath: /home/wso2/security/truststore/router.crt
        name: router-truststore-secret-volume
      - mountPath: /home/wso2/security/truststore/enforcer.crt
        name: enforcer-truststore-secret-volume
      - mountPath: /home/wso2/security/truststore/consul
        name: adapter-truststore-consul-secret-volume
      - mountPath: /home/wso2/conf/
        name: log-conf-volume
      - mountPath: /home/wso2/security/truststore/wso2-apim-carbon.pem
        name: enforcer-apikey-cert
      - mountPath: /var/run/secrets/kubernetes.io/serviceaccount
        name: kube-api-access-lv75d
        readOnly: true
        recursiveReadOnly: Disabled
    hostIP: 10.142.15.194
    hostIPs:
    - ip: 10.142.15.194
    phase: Pending
    qosClass: Burstable
    startTime: "2025-12-02T09:45:28Z"
- apiVersion: v1
  kind: Pod
  metadata:
    annotations:
      checksum/config: 4f5df4b548f725c558fd44def3c42dd668a147a662999bf2ce2b85a33f035e03
    creationTimestamp: "2025-12-02T09:45:28Z"
    generateName: apptest-cjbnvn9r-wso2-apk-common-controller-deployment-7b5d596d46-
    labels:
      app.kubernetes.io/app: commoncontroller
      app.kubernetes.io/release: apptest-cjbnvn9r
      pod-template-hash: 7b5d596d46
    name: apptest-cjbnvn9r-wso2-apk-common-controller-deployment-7b5nf4bq
    namespace: apptest-cjbnvn9r
    ownerReferences:
    - apiVersion: apps/v1
      blockOwnerDeletion: true
      controller: true
      kind: ReplicaSet
      name: apptest-cjbnvn9r-wso2-apk-common-controller-deployment-7b5d596d46
      uid: 8e30bcc0-1c08-45ff-83f5-f34a609ad766
    resourceVersion: "1764668729039727004"
    uid: d26629c1-ef4c-409d-83bb-457fc52d4507
  spec:
    affinity:
      podAntiAffinity:
        preferredDuringSchedulingIgnoredDuringExecution:
        - podAffinityTerm:
            labelSelector:
              matchExpressions:
              - key: app.kubernetes.io/app
                operator: In
                values:
                - common-controller
            topologyKey: topology.kubernetes.io/zone
          weight: 100
    containers:
    - env:
      - name: OPERATOR_POD_NAMESPACE
        valueFrom:
          fieldRef:
            apiVersion: v1
            fieldPath: metadata.namespace
      - name: COMMON_CONTROLLER_PRIVATE_KEY_PATH
        value: /home/wso2/security/keystore/commoncontroller.key
      - name: COMMON_CONTROLLER_PUBLIC_CERT_PATH
        value: /home/wso2/security/keystore/commoncontroller.crt
      - name: COMMON_CONTROLLER_SERVER_NAME
        value: apptest-cjbnvn9r-wso2-apk-common-controller-service.apptest-cjbnvn9r.svc
      image: us-docker.pkg.dev/wso2-marketplace-public/wso2-marketplace/apk-common-controller:4.5
      imagePullPolicy: Always
      livenessProbe:
        exec:
          command:
          - sh
          - check_health.sh
        failureThreshold: 5
        initialDelaySeconds: 20
        periodSeconds: 20
        successThreshold: 1
        timeoutSeconds: 1
      name: commoncontroller
      ports:
      - containerPort: 18005
        protocol: TCP
      - containerPort: 18002
        protocol: TCP
      - containerPort: 9543
        protocol: TCP
      - containerPort: 18003
        protocol: TCP
      readinessProbe:
        exec:
          command:
          - sh
          - check_health.sh
        failureThreshold: 5
        initialDelaySeconds: 20
        periodSeconds: 20
        successThreshold: 1
        timeoutSeconds: 1
      resources:
        limits:
          cpu: 200m
          memory: 128Mi
        requests:
          cpu: 50m
          memory: 64Mi
      securityContext:
        allowPrivilegeEscalation: false
        capabilities:
          drop:
          - ALL
        readOnlyRootFilesystem: true
      terminationMessagePath: /dev/termination-log
      terminationMessagePolicy: File
      volumeMounts:
      - mountPath: /home/wso2/security/keystore/commoncontroller.key
        name: common-controller-keystore-secret-volume
        subPath: tls.key
      - mountPath: /home/wso2/security/keystore/commoncontroller.crt
        name: common-controller-keystore-secret-volume
        subPath: tls.crt
      - mountPath: /home/wso2/security/truststore/adapter-ca.crt
        name: common-controller-keystore-secret-volume
        subPath: ca.crt
      - mountPath: /home/wso2/security/truststore/ratelimiter.crt
        name: ratelimiter-truststore-secret-volume
        subPath: tls.crt
      - mountPath: /home/wso2/security/truststore/ca-ratelimiter.crt
        name: ratelimiter-truststore-secret-volume
        subPath: ca.crt
      - mountPath: /home/wso2/conf/
        name: log-conf-volume
      - mountPath: /tmp/k8s-webhook-server/serving-certs
        name: adapter-webhook-server-cert
        readOnly: true
      - mountPath: /home/wso2/security/sts/
        name: sts-shared-auth-key
        readOnly: true
      - mountPath: /var/run/secrets/kubernetes.io/serviceaccount
        name: kube-api-access-pgfx5
        readOnly: true
    dnsPolicy: ClusterFirst
    enableServiceLinks: true
    nodeName: gke-wso2-apim-gke-test-cpu-pool-370e02e4-tdv6
    preemptionPolicy: PreemptLowerPriority
    priority: 0
    restartPolicy: Always
    schedulerName: default-scheduler
    securityContext:
      runAsNonRoot: true
      seccompProfile:
        type: RuntimeDefault
    serviceAccount: wso2apk-platform
    serviceAccountName: wso2apk-platform
    terminationGracePeriodSeconds: 30
    tolerations:
    - effect: NoExecute
      key: node.kubernetes.io/not-ready
      operator: Exists
      tolerationSeconds: 300
    - effect: NoExecute
      key: node.kubernetes.io/unreachable
      operator: Exists
      tolerationSeconds: 300
    volumes:
    - name: common-controller-keystore-secret-volume
      secret:
        defaultMode: 420
        secretName: apptest-cjbnvn9r-wso2-apk-common-controller-server-cert
    - configMap:
        defaultMode: 420
        name: apptest-cjbnvn9r-wso2-apk-common-log-conf
      name: log-conf-volume
    - name: adapter-webhook-server-cert
      secret:
        defaultMode: 420
        secretName: apptest-cjbnvn9r-wso2-apk-webhook-server-cert
    - name: sts-shared-auth-key
      secret:
        defaultMode: 420
        secretName: apptest-cjbnvn9r-wso2-apk-sts-shared-auth-key
    - name: ratelimiter-truststore-secret-volume
      secret:
        defaultMode: 420
        secretName: apptest-cjbnvn9r-wso2-apk-ratelimiter-server-cert
    - name: kube-api-access-pgfx5
      projected:
        defaultMode: 420
        sources:
        - serviceAccountToken:
            expirationSeconds: 3607
            path: token
        - configMap:
            items:
            - key: ca.crt
              path: ca.crt
            name: kube-root-ca.crt
        - downwardAPI:
            items:
            - fieldRef:
                apiVersion: v1
                fieldPath: metadata.namespace
              path: namespace
  status:
    conditions:
    - lastProbeTime: null
      lastTransitionTime: "2025-12-02T09:45:28Z"
      status: "False"
      type: PodReadyToStartContainers
    - lastProbeTime: null
      lastTransitionTime: "2025-12-02T09:45:28Z"
      status: "True"
      type: Initialized
    - lastProbeTime: null
      lastTransitionTime: "2025-12-02T09:45:28Z"
      message: 'containers with unready status: [commoncontroller]'
      reason: ContainersNotReady
      status: "False"
      type: Ready
    - lastProbeTime: null
      lastTransitionTime: "2025-12-02T09:45:28Z"
      message: 'containers with unready status: [commoncontroller]'
      reason: ContainersNotReady
      status: "False"
      type: ContainersReady
    - lastProbeTime: null
      lastTransitionTime: "2025-12-02T09:45:28Z"
      status: "True"
      type: PodScheduled
    containerStatuses:
    - image: us-docker.pkg.dev/wso2-marketplace-public/wso2-marketplace/apk-common-controller:4.5
      imageID: ""
      lastState: {}
      name: commoncontroller
      ready: false
      restartCount: 0
      started: false
      state:
        waiting:
          reason: ContainerCreating
      volumeMounts:
      - mountPath: /home/wso2/security/keystore/commoncontroller.key
        name: common-controller-keystore-secret-volume
      - mountPath: /home/wso2/security/keystore/commoncontroller.crt
        name: common-controller-keystore-secret-volume
      - mountPath: /home/wso2/security/truststore/adapter-ca.crt
        name: common-controller-keystore-secret-volume
      - mountPath: /home/wso2/security/truststore/ratelimiter.crt
        name: ratelimiter-truststore-secret-volume
      - mountPath: /home/wso2/security/truststore/ca-ratelimiter.crt
        name: ratelimiter-truststore-secret-volume
      - mountPath: /home/wso2/conf/
        name: log-conf-volume
      - mountPath: /tmp/k8s-webhook-server/serving-certs
        name: adapter-webhook-server-cert
        readOnly: true
        recursiveReadOnly: Disabled
      - mountPath: /home/wso2/security/sts/
        name: sts-shared-auth-key
        readOnly: true
        recursiveReadOnly: Disabled
      - mountPath: /var/run/secrets/kubernetes.io/serviceaccount
        name: kube-api-access-pgfx5
        readOnly: true
        recursiveReadOnly: Disabled
    hostIP: 10.142.15.194
    hostIPs:
    - ip: 10.142.15.194
    phase: Pending
    qosClass: Burstable
    startTime: "2025-12-02T09:45:28Z"
- apiVersion: v1
  kind: Pod
  metadata:
    annotations:
      checksum/config: c8e1a5408c7255145e9248da4e4c6e5f383c543a9db43e06662d4fccc2b73614
    creationTimestamp: "2025-12-02T09:45:28Z"
    generateName: apptest-cjbnvn9r-wso2-apk-config-ds-deployment-76f6fc7b79-
    labels:
      app.kubernetes.io/app: configdeployer-ds
      app.kubernetes.io/release: apptest-cjbnvn9r
      pod-template-hash: 76f6fc7b79
    name: apptest-cjbnvn9r-wso2-apk-config-ds-deployment-76f6fc7b79-jxmbz
    namespace: apptest-cjbnvn9r
    ownerReferences:
    - apiVersion: apps/v1
      blockOwnerDeletion: true
      controller: true
      kind: ReplicaSet
      name: apptest-cjbnvn9r-wso2-apk-config-ds-deployment-76f6fc7b79
      uid: 609b8a7c-6a3f-4634-99ce-88973d3dead4
    resourceVersion: "1764668728701039014"
    uid: ad71ceec-8a2f-4194-9a29-48b32e4dd229
  spec:
    affinity:
      podAntiAffinity:
        preferredDuringSchedulingIgnoredDuringExecution:
        - podAffinityTerm:
            labelSelector:
              matchExpressions:
              - key: app.kubernetes.io/app
                operator: In
                values:
                - config-ds
            topologyKey: topology.kubernetes.io/zone
          weight: 100
    containers:
    - image: us-docker.pkg.dev/wso2-marketplace-public/wso2-marketplace/apk-config-deployer-service:4.5
      imagePullPolicy: Always
      livenessProbe:
        failureThreshold: 3
        httpGet:
          path: /health
          port: 9443
          scheme: HTTPS
        initialDelaySeconds: 20
        periodSeconds: 20
        successThreshold: 1
        timeoutSeconds: 1
      name: config-ds
      ports:
      - containerPort: 9443
        protocol: TCP
      readinessProbe:
        failureThreshold: 3
        httpGet:
          path: /health
          port: 9443
          scheme: HTTPS
        initialDelaySeconds: 20
        periodSeconds: 20
        successThreshold: 1
        timeoutSeconds: 1
      resources:
        limits:
          cpu: 500m
          memory: 1Gi
        requests:
          cpu: 200m
          memory: 512Mi
      securityContext:
        allowPrivilegeEscalation: false
        capabilities:
          drop:
          - ALL
        readOnlyRootFilesystem: true
      terminationMessagePath: /dev/termination-log
      terminationMessagePolicy: File
      volumeMounts:
      - mountPath: /home/wso2apk/config-deployer/conf/Config.toml
        name: config-toml-volume
        subPath: Config.toml
      - mountPath: /home/wso2apk/config-deployer/security/config.key
        name: config-ds-tls-volume
        subPath: tls.key
      - mountPath: /home/wso2apk/config-deployer/security/config.pem
        name: config-ds-tls-volume
        subPath: tls.crt
      - mountPath: /home/wso2apk/config-deployer/security/mg.pem
        name: enforcer-jwt-secret-volume
        subPath: mg.pem
      - mountPath: /tmp
        name: tmp
      - mountPath: /home/wso2apk/config-deployer/tmp
        name: config-deployer-temp
      - mountPath: /var/run/secrets/kubernetes.io/serviceaccount
        name: kube-api-access-zff6d
        readOnly: true
    dnsPolicy: ClusterFirst
    enableServiceLinks: true
    nodeName: gke-wso2-apim-gke-test-cpu-pool-370e02e4-tdv6
    preemptionPolicy: PreemptLowerPriority
    priority: 0
    restartPolicy: Always
    schedulerName: default-scheduler
    securityContext:
      runAsNonRoot: true
      seccompProfile:
        type: RuntimeDefault
    serviceAccount: wso2apk-platform
    serviceAccountName: wso2apk-platform
    terminationGracePeriodSeconds: 30
    tolerations:
    - effect: NoExecute
      key: node.kubernetes.io/not-ready
      operator: Exists
      tolerationSeconds: 300
    - effect: NoExecute
      key: node.kubernetes.io/unreachable
      operator: Exists
      tolerationSeconds: 300
    volumes:
    - configMap:
        defaultMode: 420
        name: apptest-cjbnvn9r-wso2-apk-config-ds-configmap
      name: config-toml-volume
    - name: config-ds-tls-volume
      secret:
        defaultMode: 420
        secretName: apptest-cjbnvn9r-wso2-apk-config-ds-server-cert
    - name: enforcer-jwt-secret-volume
      secret:
        defaultMode: 420
        secretName: apptest-cjbnvn9r-wso2-apk-enforcer-keystore-secret
    - emptyDir: {}
      name: tmp
    - emptyDir: {}
      name: config-deployer-temp
    - name: kube-api-access-zff6d
      projected:
        defaultMode: 420
        sources:
        - serviceAccountToken:
            expirationSeconds: 3607
            path: token
        - configMap:
            items:
            - key: ca.crt
              path: ca.crt
            name: kube-root-ca.crt
        - downwardAPI:
            items:
            - fieldRef:
                apiVersion: v1
                fieldPath: metadata.namespace
              path: namespace
  status:
    conditions:
    - lastProbeTime: null
      lastTransitionTime: "2025-12-02T09:45:28Z"
      status: "False"
      type: PodReadyToStartContainers
    - lastProbeTime: null
      lastTransitionTime: "2025-12-02T09:45:28Z"
      status: "True"
      type: Initialized
    - lastProbeTime: null
      lastTransitionTime: "2025-12-02T09:45:28Z"
      message: 'containers with unready status: [config-ds]'
      reason: ContainersNotReady
      status: "False"
      type: Ready
    - lastProbeTime: null
      lastTransitionTime: "2025-12-02T09:45:28Z"
      message: 'containers with unready status: [config-ds]'
      reason: ContainersNotReady
      status: "False"
      type: ContainersReady
    - lastProbeTime: null
      lastTransitionTime: "2025-12-02T09:45:28Z"
      status: "True"
      type: PodScheduled
    containerStatuses:
    - image: us-docker.pkg.dev/wso2-marketplace-public/wso2-marketplace/apk-config-deployer-service:4.5
      imageID: ""
      lastState: {}
      name: config-ds
      ready: false
      restartCount: 0
      started: false
      state:
        waiting:
          reason: ContainerCreating
      volumeMounts:
      - mountPath: /home/wso2apk/config-deployer/conf/Config.toml
        name: config-toml-volume
      - mountPath: /home/wso2apk/config-deployer/security/config.key
        name: config-ds-tls-volume
      - mountPath: /home/wso2apk/config-deployer/security/config.pem
        name: config-ds-tls-volume
      - mountPath: /home/wso2apk/config-deployer/security/mg.pem
        name: enforcer-jwt-secret-volume
      - mountPath: /tmp
        name: tmp
      - mountPath: /home/wso2apk/config-deployer/tmp
        name: config-deployer-temp
      - mountPath: /var/run/secrets/kubernetes.io/serviceaccount
        name: kube-api-access-zff6d
        readOnly: true
        recursiveReadOnly: Disabled
    hostIP: 10.142.15.194
    hostIPs:
    - ip: 10.142.15.194
    phase: Pending
    qosClass: Burstable
    startTime: "2025-12-02T09:45:28Z"
- apiVersion: v1
  kind: Pod
  metadata:
    annotations:
      checksum/config: 18fd8554c652c099ae03055089c498ad1bd3845c0d82adc502056aebb34c5332
    creationTimestamp: "2025-12-02T09:45:29Z"
    generateName: apptest-cjbnvn9r-wso2-apk-gateway-runtime-deployment-668466cf96-
    labels:
      app.kubernetes.io/app: gateway
      app.kubernetes.io/release: apptest-cjbnvn9r
      pod-template-hash: 668466cf96
    name: apptest-cjbnvn9r-wso2-apk-gateway-runtime-deployment-66846t7qzn
    namespace: apptest-cjbnvn9r
    ownerReferences:
    - apiVersion: apps/v1
      blockOwnerDeletion: true
      controller: true
      kind: ReplicaSet
      name: apptest-cjbnvn9r-wso2-apk-gateway-runtime-deployment-668466cf96
      uid: 9d9da16a-9ba4-4b13-89d4-9f638a765d39
    resourceVersion: "1764668729452639024"
    uid: 342ac17e-5f62-4717-b011-f5eeacff5f0c
  spec:
    affinity:
      podAntiAffinity:
        preferredDuringSchedulingIgnoredDuringExecution:
        - podAffinityTerm:
            labelSelector:
              matchExpressions:
              - key: app.kubernetes.io/app
                operator: In
                values:
                - gateway-runtime
            topologyKey: topology.kubernetes.io/zone
          weight: 100
    automountServiceAccountToken: false
    containers:
    - env:
      - name: TOKEN_REVOCATION_ENABLED
        value: "true"
      - name: ADAPTER_HOST_NAME
        value: apptest-cjbnvn9r-wso2-apk-adapter-service.apptest-cjbnvn9r.svc
      - name: ADAPTER_HOST
        value: apptest-cjbnvn9r-wso2-apk-adapter-service.apptest-cjbnvn9r.svc
      - name: COMMON_CONTROLLER_HOST_NAME
        value: apptest-cjbnvn9r-wso2-apk-common-controller-service.apptest-cjbnvn9r.svc
      - name: COMMON_CONTROLLER_HOST
        value: apptest-cjbnvn9r-wso2-apk-common-controller-service.apptest-cjbnvn9r.svc
      - name: RATELIMITER_HOST
        value: apptest-cjbnvn9r-wso2-apk-ratelimiter-service.apptest-cjbnvn9r.svc
      - name: ENFORCER_PRIVATE_KEY_PATH
        value: /home/wso2/security/keystore/enforcer.key
      - name: ENFORCER_PUBLIC_CERT_PATH
        value: /home/wso2/security/keystore/enforcer.crt
      - name: ENFORCER_SERVER_NAME
        value: apptest-cjbnvn9r-wso2-apk-enforcer-service.apptest-cjbnvn9r.svc
      - name: TRUSTED_CA_CERTS_PATH
        value: /home/wso2/security/truststore
      - name: ADAPTER_XDS_PORT
        value: "18000"
      - name: RATELIMITER_PORT
        value: "8091"
      - name: COMMON_CONTROLLER_XDS_PORT
        value: "18002"
      - name: COMMON_CONTROLLER_REST_PORT
        value: "18003"
      - name: ENFORCER_LABEL
        value: wso2-apk-default
      - name: ENFORCER_REGION
        value: UNKNOWN
      - name: XDS_MAX_MSG_SIZE
        value: "4194304"
      - name: XDS_MAX_RETRIES
        value: "3"
      - name: enforcer_admin_pwd
        value: admin
      - name: REDIS_USERNAME
        value: default
      - name: REDIS_PASSWORD
      - name: REDIS_HOST
        value: redis-master
      - name: REDIS_PORT
        value: "6379"
      - name: IS_REDIS_TLS_ENABLED
        value: "false"
      - name: REDIS_REVOKED_TOKENS_CHANNEL
        value: wso2-apk-revoked-tokens-channel
      - name: REDIS_KEY_FILE
        value: /home/wso2/security/truststore/enforcer.key
      - name: REDIS_CERT_FILE
        value: /home/wso2/security/truststore/enforcer.crt
      - name: REDIS_CA_CERT_FILE
        value: /home/wso2/security/truststore/enforcer.crt
      - name: REVOKED_TOKEN_CLEANUP_INTERVAL
        value: "3600"
      image: us-docker.pkg.dev/wso2-marketplace-public/wso2-marketplace/apk-enforcer:4.5
      imagePullPolicy: Always
      livenessProbe:
        exec:
          command:
          - sh
          - check_health.sh
        failureThreshold: 5
        initialDelaySeconds: 20
        periodSeconds: 20
        successThreshold: 1
        timeoutSeconds: 1
      name: enforcer
      ports:
      - containerPort: 8081
        protocol: TCP
      - containerPort: 9001
        protocol: TCP
      - containerPort: 5006
        protocol: TCP
      - containerPort: 8084
        protocol: TCP
      - containerPort: 9092
        protocol: TCP
      - containerPort: 18002
        protocol: TCP
      readinessProbe:
        exec:
          command:
          - sh
          - check_health.sh
        failureThreshold: 5
        initialDelaySeconds: 20
        periodSeconds: 20
        successThreshold: 1
        timeoutSeconds: 1
      resources:
        limits:
          cpu: 500m
          memory: 512Mi
        requests:
          cpu: 200m
          memory: 128Mi
      securityContext:
        allowPrivilegeEscalation: false
        capabilities:
          drop:
          - ALL
        readOnlyRootFilesystem: true
        runAsNonRoot: true
      terminationMessagePath: /dev/termination-log
      terminationMessagePolicy: File
      volumeMounts:
      - mountPath: /tmp
        name: tmp
      - mountPath: /home/wso2/security/keystore/enforcer.key
        name: enforcer-keystore-secret-volume
        subPath: tls.key
      - mountPath: /home/wso2/security/keystore/enforcer.crt
        name: enforcer-keystore-secret-volume
        subPath: tls.crt
      - mountPath: /home/wso2/security/truststore/apk.crt
        name: enforcer-keystore-secret-volume
        subPath: ca.crt
      - mountPath: /home/wso2/security/truststore/enforcer.crt
        name: enforcer-keystore-secret-volume
        subPath: tls.crt
      - mountPath: /home/wso2/security/truststore/adapter.crt
        name: adapter-truststore-secret-volume
        subPath: tls.crt
      - mountPath: /home/wso2/security/truststore/router.crt
        name: router-keystore-secret-volume
        subPath: tls.crt
      - mountPath: /home/wso2/conf/
        name: log-conf-volume
      - mountPath: /home/wso2/check_health.sh
        name: enforcer-health-check-volume
        subPath: check_health.sh
      - mountPath: /home/wso2/security/keystore/mg.pem
        name: enforcer-jwt-secret-volume
        subPath: mg.pem
      - mountPath: /home/wso2/security/truststore/mg.pem
        name: enforcer-jwt-secret-volume
        subPath: mg.pem
      - mountPath: /home/wso2/security/keystore/mg.key
        name: enforcer-jwt-secret-volume
        subPath: mg.key
      - mountPath: /home/wso2/security/truststore/wso2carbon.pem
        name: enforcer-trusted-certs
        subPath: wso2carbon.pem
      - mountPath: /home/wso2/security/truststore/wso2-apim-carbon.pem
        name: enforcer-apikey-cert
        subPath: wso2-apim-carbon.pem
      - mountPath: /home/wso2/security/truststore/idp.pem
        name: idp-certificate-secret-volume
        subPath: wso2carbon.pem
      - mountPath: /home/wso2/security/truststore/ratelimiter.crt
        name: ratelimiter-truststore-secret-volume
        subPath: tls.crt
      - mountPath: /home/wso2/security/truststore/ratelimiter-ca.crt
        name: ratelimiter-truststore-secret-volume
        subPath: ca.crt
    - env:
      - name: ADAPTER_HOST_NAME
        value: apptest-cjbnvn9r-wso2-apk-adapter-service.apptest-cjbnvn9r.svc
      - name: ADAPTER_HOST
        value: apptest-cjbnvn9r-wso2-apk-adapter-service.apptest-cjbnvn9r.svc
      - name: ENFORCER_HOST
        value: 127.0.0.1
      - name: ENFORCER_ANALYTICS_HOST
        value: 127.0.0.1
      - name: ROUTER_ADMIN_HOST
        value: 0.0.0.0
      - name: ROUTER_ADMIN_PORT
        value: "9000"
      - name: ROUTER_PORT
        value: "9095"
      - name: ROUTER_CLUSTER
        value: apk_router_cluster
      - name: ROUTER_LABEL
        value: wso2-apk-default
      - name: ROUTER_PRIVATE_KEY_PATH
        value: /home/wso2/security/keystore/router.key
      - name: ROUTER_PUBLIC_CERT_PATH
        value: /home/wso2/security/keystore/router.crt
      - name: ADAPTER_PORT
        value: "18000"
      - name: ADAPTER_CA_CERT_PATH
        value: /home/wso2/security/truststore/adapter.crt
      - name: ENFORCER_PORT
        value: "8081"
      - name: ENFORCER_ANALYTICS_RECEIVER_PORT
        value: "18090"
      - name: ENFORCER_CA_CERT_PATH
        value: /home/wso2/security/truststore/enforcer.crt
      - name: CONCURRENCY
        value: "2"
      image: us-docker.pkg.dev/wso2-marketplace-public/wso2-marketplace/apk-router:4.5
      imagePullPolicy: Always
      livenessProbe:
        exec:
          command:
          - sh
          - router_check_health.sh
          - health
        failureThreshold: 5
        initialDelaySeconds: 20
        periodSeconds: 20
        successThreshold: 1
        timeoutSeconds: 1
      name: router
      ports:
      - containerPort: 9095
        protocol: TCP
      - containerPort: 9090
        protocol: TCP
      - containerPort: 9091
        protocol: TCP
      - containerPort: 9000
        protocol: TCP
      readinessProbe:
        exec:
          command:
          - sh
          - router_check_health.sh
          - health
        failureThreshold: 5
        initialDelaySeconds: 20
        periodSeconds: 20
        successThreshold: 1
        timeoutSeconds: 1
      resources:
        limits:
          cpu: "1"
          memory: 1028Mi
        requests:
          cpu: 200m
          memory: 128Mi
      securityContext:
        allowPrivilegeEscalation: false
        capabilities:
          drop:
          - ALL
        readOnlyRootFilesystem: true
        runAsNonRoot: true
      startupProbe:
        exec:
          command:
          - sh
          - router_check_health.sh
          - health
        failureThreshold: 5
        initialDelaySeconds: 20
        periodSeconds: 20
        successThreshold: 1
        timeoutSeconds: 1
      terminationMessagePath: /dev/termination-log
      terminationMessagePolicy: File
      volumeMounts:
      - mountPath: /home/wso2/security/keystore/router.key
        name: router-keystore-secret-volume
        subPath: tls.key
      - mountPath: /home/wso2/security/keystore/router.crt
        name: router-keystore-secret-volume
        subPath: tls.crt
      - mountPath: /home/wso2/security/truststore/adapter.crt
        name: adapter-truststore-secret-volume
        subPath: tls.crt
      - mountPath: /home/wso2/security/truststore/enforcer.crt
        name: enforcer-keystore-secret-volume
        subPath: tls.crt
      - mountPath: /home/wso2/conf/
        name: log-conf-volume
      - mountPath: /home/wso2/security/truststore/ratelimiter.crt
        name: ratelimiter-truststore-secret-volume
        subPath: tls.crt
      - mountPath: /home/wso2/security/truststore/ratelimiter-ca.crt
        name: ratelimiter-truststore-secret-volume
        subPath: ca.crt
    dnsPolicy: ClusterFirst
    enableServiceLinks: true
    nodeName: gke-wso2-apim-gke-test-cpu-pool-370e02e4-tdv6
    preemptionPolicy: PreemptLowerPriority
    priority: 0
    restartPolicy: Always
    schedulerName: default-scheduler
    securityContext:
      seccompProfile:
        type: RuntimeDefault
    serviceAccount: default
    serviceAccountName: default
    terminationGracePeriodSeconds: 30
    tolerations:
    - effect: NoExecute
      key: node.kubernetes.io/not-ready
      operator: Exists
      tolerationSeconds: 300
    - effect: NoExecute
      key: node.kubernetes.io/unreachable
      operator: Exists
      tolerationSeconds: 300
    volumes:
    - name: ratelimiter-truststore-secret-volume
      secret:
        defaultMode: 420
        secretName: apptest-cjbnvn9r-wso2-apk-ratelimiter-server-cert
    - name: enforcer-keystore-secret-volume
      secret:
        defaultMode: 420
        secretName: apptest-cjbnvn9r-wso2-apk-enforcer-server-cert
    - configMap:
        defaultMode: 420
        name: apptest-cjbnvn9r-wso2-apk-log-conf
      name: log-conf-volume
    - configMap:
        defaultMode: 420
        name: apptest-cjbnvn9r-wso2-apk-enforcer-grpc-probe-script-conf
      name: enforcer-health-check-volume
    - name: router-keystore-secret-volume
      secret:
        defaultMode: 420
        secretName: apptest-cjbnvn9r-wso2-apk-gateway-server-cert
    - name: adapter-truststore-secret-volume
      secret:
        defaultMode: 420
        secretName: apptest-cjbnvn9r-wso2-apk-adapter-server-cert
    - name: enforcer-jwt-secret-volume
      secret:
        defaultMode: 420
        secretName: apptest-cjbnvn9r-wso2-apk-enforcer-keystore-secret
    - name: enforcer-trusted-certs
      secret:
        defaultMode: 420
        secretName: apptest-cjbnvn9r-wso2-apk-enforcer-truststore-secret
    - name: enforcer-apikey-cert
      secret:
        defaultMode: 420
        secretName: apptest-cjbnvn9r-wso2-apk-enforcer-truststore-secret
    - name: idp-certificate-secret-volume
      secret:
        defaultMode: 420
        secretName: apptest-cjbnvn9r-wso2-apk-enforcer-truststore-secret
    - emptyDir: {}
      name: tmp
  status:
    conditions:
    - lastProbeTime: null
      lastTransitionTime: "2025-12-02T09:45:29Z"
      status: "False"
      type: PodReadyToStartContainers
    - lastProbeTime: null
      lastTransitionTime: "2025-12-02T09:45:29Z"
      status: "True"
      type: Initialized
    - lastProbeTime: null
      lastTransitionTime: "2025-12-02T09:45:29Z"
      message: 'containers with unready status: [enforcer router]'
      reason: ContainersNotReady
      status: "False"
      type: Ready
    - lastProbeTime: null
      lastTransitionTime: "2025-12-02T09:45:29Z"
      message: 'containers with unready status: [enforcer router]'
      reason: ContainersNotReady
      status: "False"
      type: ContainersReady
    - lastProbeTime: null
      lastTransitionTime: "2025-12-02T09:45:29Z"
      status: "True"
      type: PodScheduled
    containerStatuses:
    - image: us-docker.pkg.dev/wso2-marketplace-public/wso2-marketplace/apk-enforcer:4.5
      imageID: ""
      lastState: {}
      name: enforcer
      ready: false
      restartCount: 0
      started: false
      state:
        waiting:
          reason: ContainerCreating
      volumeMounts:
      - mountPath: /tmp
        name: tmp
      - mountPath: /home/wso2/security/keystore/enforcer.key
        name: enforcer-keystore-secret-volume
      - mountPath: /home/wso2/security/keystore/enforcer.crt
        name: enforcer-keystore-secret-volume
      - mountPath: /home/wso2/security/truststore/apk.crt
        name: enforcer-keystore-secret-volume
      - mountPath: /home/wso2/security/truststore/enforcer.crt
        name: enforcer-keystore-secret-volume
      - mountPath: /home/wso2/security/truststore/adapter.crt
        name: adapter-truststore-secret-volume
      - mountPath: /home/wso2/security/truststore/router.crt
        name: router-keystore-secret-volume
      - mountPath: /home/wso2/conf/
        name: log-conf-volume
      - mountPath: /home/wso2/check_health.sh
        name: enforcer-health-check-volume
      - mountPath: /home/wso2/security/keystore/mg.pem
        name: enforcer-jwt-secret-volume
      - mountPath: /home/wso2/security/truststore/mg.pem
        name: enforcer-jwt-secret-volume
      - mountPath: /home/wso2/security/keystore/mg.key
        name: enforcer-jwt-secret-volume
      - mountPath: /home/wso2/security/truststore/wso2carbon.pem
        name: enforcer-trusted-certs
      - mountPath: /home/wso2/security/truststore/wso2-apim-carbon.pem
        name: enforcer-apikey-cert
      - mountPath: /home/wso2/security/truststore/idp.pem
        name: idp-certificate-secret-volume
      - mountPath: /home/wso2/security/truststore/ratelimiter.crt
        name: ratelimiter-truststore-secret-volume
      - mountPath: /home/wso2/security/truststore/ratelimiter-ca.crt
        name: ratelimiter-truststore-secret-volume
    - image: us-docker.pkg.dev/wso2-marketplace-public/wso2-marketplace/apk-router:4.5
      imageID: ""
      lastState: {}
      name: router
      ready: false
      restartCount: 0
      started: false
      state:
        waiting:
          reason: ContainerCreating
      volumeMounts:
      - mountPath: /home/wso2/security/keystore/router.key
        name: router-keystore-secret-volume
      - mountPath: /home/wso2/security/keystore/router.crt
        name: router-keystore-secret-volume
      - mountPath: /home/wso2/security/truststore/adapter.crt
        name: adapter-truststore-secret-volume
      - mountPath: /home/wso2/security/truststore/enforcer.crt
        name: enforcer-keystore-secret-volume
      - mountPath: /home/wso2/conf/
        name: log-conf-volume
      - mountPath: /home/wso2/security/truststore/ratelimiter.crt
        name: ratelimiter-truststore-secret-volume
      - mountPath: /home/wso2/security/truststore/ratelimiter-ca.crt
        name: ratelimiter-truststore-secret-volume
    hostIP: 10.142.15.194
    hostIPs:
    - ip: 10.142.15.194
    phase: Pending
    qosClass: Burstable
    startTime: "2025-12-02T09:45:29Z"
- apiVersion: v1
  kind: Pod
  metadata:
    creationTimestamp: "2025-12-02T09:45:29Z"
    generateName: apptest-cjbnvn9r-wso2-apk-ratelimiter-deployment-5d9c9c9999-
    labels:
      app.kubernetes.io/app: ratelimiter
      app.kubernetes.io/release: apptest-cjbnvn9r
      pod-template-hash: 5d9c9c9999
    name: apptest-cjbnvn9r-wso2-apk-ratelimiter-deployment-5d9c9c999wt85z
    namespace: apptest-cjbnvn9r
    ownerReferences:
    - apiVersion: apps/v1
      blockOwnerDeletion: true
      controller: true
      kind: ReplicaSet
      name: apptest-cjbnvn9r-wso2-apk-ratelimiter-deployment-5d9c9c9999
      uid: 1f22e39d-e078-415b-b099-85e046cf5960
    resourceVersion: "1764668729638431006"
    uid: 04bc1024-b37a-45c7-b7f9-28e224084cd3
  spec:
    affinity:
      podAntiAffinity:
        preferredDuringSchedulingIgnoredDuringExecution:
        - podAffinityTerm:
            labelSelector:
              matchExpressions:
              - key: app.kubernetes.io/app
                operator: In
                values:
                - rate-limiter
            topologyKey: topology.kubernetes.io/zone
          weight: 100
    automountServiceAccountToken: false
    containers:
    - env:
      - name: HOST
        value: 0.0.0.0
      - name: PORT
        value: "8090"
      - name: USE_STATSD
        value: "false"
      - name: LOG_LEVEL
        value: DEBUG
      - name: LIMIT_RESPONSE_HEADERS_ENABLED
        value: "false"
      - name: REDIS_TYPE
        value: single
      - name: REDIS_SOCKET_TYPE
        value: tcp
      - name: REDIS_URL
        value: redis-master:6379
      - name: REDIS_PIPELINE_WINDOW
        value: 0.2ms
      - name: REDIS_PIPELINE_LIMIT
        value: "0"
      - name: GRPC_HOST
        value: 0.0.0.0
      - name: GRPC_PORT
        value: "8091"
      - name: GRPC_SERVER_USE_TLS
        value: "true"
      - name: GRPC_SERVER_TLS_KEY
        value: /home/wso2/security/keystore/ratelimiter.key
      - name: GRPC_SERVER_TLS_CERT
        value: /home/wso2/security/keystore/ratelimiter.crt
      - name: GRPC_CLIENT_TLS_CACERT
        value: /home/wso2/security/truststore/ratelimiter-ca.crt
      - name: RATELIMITER_LABEL
        value: ratelimiter
      - name: CONFIG_GRPC_XDS_SERVER_URL
        value: apptest-cjbnvn9r-wso2-apk-common-controller-service.apptest-cjbnvn9r.svc:18005
      - name: CONFIG_GRPC_XDS_SERVER_USE_TLS
        value: "true"
      - name: CONFIG_GRPC_XDS_CLIENT_TLS_KEY
        value: /home/wso2/security/keystore/ratelimiter.key
      - name: CONFIG_GRPC_XDS_CLIENT_TLS_CERT
        value: /home/wso2/security/keystore/ratelimiter.crt
      - name: CONFIG_GRPC_XDS_SERVER_TLS_CACERT
        value: /home/wso2/security/truststore/ratelimiter-ca.crt
      - name: CONFIG_GRPC_XDS_SERVER_TLS_SAN
        value: apptest-cjbnvn9r-wso2-apk-common-controller-service.apptest-cjbnvn9r.svc
      image: us-docker.pkg.dev/wso2-marketplace-public/wso2-marketplace/apk-ratelimiter:4.5
      imagePullPolicy: Always
      livenessProbe:
        failureThreshold: 5
        httpGet:
          path: /healthcheck
          port: 8090
          scheme: HTTP
        initialDelaySeconds: 20
        periodSeconds: 20
        successThreshold: 1
        timeoutSeconds: 1
      name: ratelimiter
      ports:
      - containerPort: 8090
        protocol: TCP
      - containerPort: 8091
        protocol: TCP
      - containerPort: 6070
        protocol: TCP
      readinessProbe:
        failureThreshold: 5
        httpGet:
          path: /healthcheck
          port: 8090
          scheme: HTTP
        initialDelaySeconds: 20
        periodSeconds: 20
        successThreshold: 1
        timeoutSeconds: 1
      resources:
        limits:
          cpu: 100m
          memory: 128Mi
        requests:
          cpu: 50m
          memory: 64Mi
      securityContext:
        allowPrivilegeEscalation: false
        capabilities:
          drop:
          - ALL
        readOnlyRootFilesystem: true
      terminationMessagePath: /dev/termination-log
      terminationMessagePolicy: File
      volumeMounts:
      - mountPath: /home/wso2/security/keystore/ratelimiter.key
        name: ratelimiter-keystore-secret-volume
        subPath: tls.key
      - mountPath: /home/wso2/security/keystore/ratelimiter.crt
        name: ratelimiter-keystore-secret-volume
        subPath: tls.crt
      - mountPath: /home/wso2/security/truststore/ratelimiter-ca.crt
        name: ratelimiter-keystore-secret-volume
        subPath: ca.crt
      - mountPath: /home/wso2/security/truststore/adapter.pem
        name: common-controller-truststore-secret-volume
        subPath: tls.crt
      - mountPath: /home/wso2/security/truststore/router.pem
        name: router-truststore-secret-volume
        subPath: tls.crt
    dnsPolicy: ClusterFirst
    enableServiceLinks: true
    nodeName: gke-wso2-apim-gke-test-cpu-pool-370e02e4-tdv6
    preemptionPolicy: PreemptLowerPriority
    priority: 0
    restartPolicy: Always
    schedulerName: default-scheduler
    securityContext:
      runAsNonRoot: true
      seccompProfile:
        type: RuntimeDefault
    serviceAccount: wso2apk-platform
    serviceAccountName: wso2apk-platform
    terminationGracePeriodSeconds: 30
    tolerations:
    - effect: NoExecute
      key: node.kubernetes.io/not-ready
      operator: Exists
      tolerationSeconds: 300
    - effect: NoExecute
      key: node.kubernetes.io/unreachable
      operator: Exists
      tolerationSeconds: 300
    volumes:
    - name: ratelimiter-keystore-secret-volume
      secret:
        defaultMode: 420
        secretName: apptest-cjbnvn9r-wso2-apk-ratelimiter-server-cert
    - name: common-controller-truststore-secret-volume
      secret:
        defaultMode: 420
        secretName: apptest-cjbnvn9r-wso2-apk-common-controller-server-cert
    - name: router-truststore-secret-volume
      secret:
        defaultMode: 420
        secretName: apptest-cjbnvn9r-wso2-apk-gateway-server-cert
  status:
    conditions:
    - lastProbeTime: null
      lastTransitionTime: "2025-12-02T09:45:29Z"
      status: "False"
      type: PodReadyToStartContainers
    - lastProbeTime: null
      lastTransitionTime: "2025-12-02T09:45:29Z"
      status: "True"
      type: Initialized
    - lastProbeTime: null
      lastTransitionTime: "2025-12-02T09:45:29Z"
      message: 'containers with unready status: [ratelimiter]'
      reason: ContainersNotReady
      status: "False"
      type: Ready
    - lastProbeTime: null
      lastTransitionTime: "2025-12-02T09:45:29Z"
      message: 'containers with unready status: [ratelimiter]'
      reason: ContainersNotReady
      status: "False"
      type: ContainersReady
    - lastProbeTime: null
      lastTransitionTime: "2025-12-02T09:45:29Z"
      status: "True"
      type: PodScheduled
    containerStatuses:
    - image: us-docker.pkg.dev/wso2-marketplace-public/wso2-marketplace/apk-ratelimiter:4.5
      imageID: ""
      lastState: {}
      name: ratelimiter
      ready: false
      restartCount: 0
      started: false
      state:
        waiting:
          reason: ContainerCreating
      volumeMounts:
      - mountPath: /home/wso2/security/keystore/ratelimiter.key
        name: ratelimiter-keystore-secret-volume
      - mountPath: /home/wso2/security/keystore/ratelimiter.crt
        name: ratelimiter-keystore-secret-volume
      - mountPath: /home/wso2/security/truststore/ratelimiter-ca.crt
        name: ratelimiter-keystore-secret-volume
      - mountPath: /home/wso2/security/truststore/adapter.pem
        name: common-controller-truststore-secret-volume
      - mountPath: /home/wso2/security/truststore/router.pem
        name: router-truststore-secret-volume
    hostIP: 10.142.15.194
    hostIPs:
    - ip: 10.142.15.194
    phase: Pending
    qosClass: Burstable
    startTime: "2025-12-02T09:45:29Z"
- apiVersion: v1
  kind: Pod
  metadata:
    annotations:
      checksum/configmap: 2a9ab4a5432825504d910f022638674ce88eaefe9f9f595ad8bc107377d104fb
      checksum/health: aff24913d801436ea469d8d374b2ddb3ec4c43ee7ab24663d5f8ff1a1b6991a9
      checksum/scripts: bdec350b84a1ace7cc118db113a21c9f160bde3425b07714e1c0c1da722621cf
      checksum/secret: 44136fa355b3678a1146ad16f7e8649e94fb4fc21fe77e8310c060f61caaff8a
    creationTimestamp: "2025-12-02T09:45:29Z"
    generateName: redis-master-
    labels:
      app.kubernetes.io/component: master
      app.kubernetes.io/instance: apptest-cjbnvn9r
      app.kubernetes.io/managed-by: Helm
      app.kubernetes.io/name: redis
      app.kubernetes.io/version: 7.4.2
      apps.kubernetes.io/pod-index: "0"
      controller-revision-hash: redis-master-5fdd667976
      helm.sh/chart: redis-20.10.0
      statefulset.kubernetes.io/pod-name: redis-master-0
    name: redis-master-0
    namespace: apptest-cjbnvn9r
    ownerReferences:
    - apiVersion: apps/v1
      blockOwnerDeletion: true
      controller: true
      kind: StatefulSet
      name: redis-master
      uid: 27b58621-49d4-4276-aa24-8d028136523a
    resourceVersion: "1764668743910239006"
    uid: 35dc8bb7-01c0-4a2a-b809-64c0c758d9ee
  spec:
    affinity:
      podAntiAffinity:
        preferredDuringSchedulingIgnoredDuringExecution:
        - podAffinityTerm:
            labelSelector:
              matchLabels:
                app.kubernetes.io/component: master
                app.kubernetes.io/instance: apptest-cjbnvn9r
                app.kubernetes.io/name: redis
            topologyKey: kubernetes.io/hostname
          weight: 1
    automountServiceAccountToken: false
    containers:
    - args:
      - -c
      - /opt/bitnami/scripts/start-scripts/start-master.sh
      command:
      - /bin/bash
      env:
      - name: BITNAMI_DEBUG
        value: "true"
      - name: REDIS_REPLICATION_MODE
        value: master
      - name: ALLOW_EMPTY_PASSWORD
        value: "yes"
      - name: REDIS_TLS_ENABLED
        value: "no"
      - name: REDIS_PORT
        value: "6379"
      image: docker.io/bitnamilegacy/redis:7.4.2-debian-12-r4
      imagePullPolicy: IfNotPresent
      livenessProbe:
        exec:
          command:
          - sh
          - -c
          - /health/ping_liveness_local.sh 5
        failureThreshold: 5
        initialDelaySeconds: 20
        periodSeconds: 5
        successThreshold: 1
        timeoutSeconds: 6
      name: redis
      ports:
      - containerPort: 6379
        name: redis
        protocol: TCP
      readinessProbe:
        exec:
          command:
          - sh
          - -c
          - /health/ping_readiness_local.sh 1
        failureThreshold: 5
        initialDelaySeconds: 20
        periodSeconds: 5
        successThreshold: 1
        timeoutSeconds: 2
      resources:
        limits:
          cpu: 150m
          ephemeral-storage: 2Gi
          memory: 192Mi
        requests:
          cpu: 100m
          ephemeral-storage: 50Mi
          memory: 128Mi
      securityContext:
        allowPrivilegeEscalation: false
        capabilities:
          drop:
          - ALL
        readOnlyRootFilesystem: true
        runAsGroup: 1001
        runAsNonRoot: true
        seLinuxOptions: {}
        seccompProfile:
          type: RuntimeDefault
      terminationMessagePath: /dev/termination-log
      terminationMessagePolicy: File
      volumeMounts:
      - mountPath: /opt/bitnami/scripts/start-scripts
        name: start-scripts
      - mountPath: /health
        name: health
      - mountPath: /data
        name: redis-data
      - mountPath: /opt/bitnami/redis/mounted-etc
        name: config
      - mountPath: /opt/bitnami/redis/etc/
        name: empty-dir
        subPath: app-conf-dir
      - mountPath: /tmp
        name: empty-dir
        subPath: tmp-dir
    dnsPolicy: ClusterFirst
    enableServiceLinks: true
    hostname: redis-master-0
    nodeName: gke-wso2-apim-gke-test-cpu-pool-370e02e4-tdv6
    preemptionPolicy: PreemptLowerPriority
    priority: 0
    restartPolicy: Always
    schedulerName: default-scheduler
    securityContext:
      fsGroup: 1001
      fsGroupChangePolicy: Always
      runAsNonRoot: true
      seccompProfile:
        type: RuntimeDefault
    serviceAccount: redis-master
    serviceAccountName: redis-master
    subdomain: redis-headless
    terminationGracePeriodSeconds: 30
    tolerations:
    - effect: NoExecute
      key: node.kubernetes.io/not-ready
      operator: Exists
      tolerationSeconds: 300
    - effect: NoExecute
      key: node.kubernetes.io/unreachable
      operator: Exists
      tolerationSeconds: 300
    volumes:
    - name: redis-data
      persistentVolumeClaim:
        claimName: redis-data-redis-master-0
    - configMap:
        defaultMode: 493
        name: redis-scripts
      name: start-scripts
    - configMap:
        defaultMode: 493
        name: redis-health
      name: health
    - configMap:
        defaultMode: 420
        name: redis-configuration
      name: config
    - emptyDir: {}
      name: empty-dir
  status:
    conditions:
    - lastProbeTime: null
      lastTransitionTime: "2025-12-02T09:45:43Z"
      status: "True"
      type: PodReadyToStartContainers
    - lastProbeTime: null
      lastTransitionTime: "2025-12-02T09:45:33Z"
      status: "True"
      type: Initialized
    - lastProbeTime: null
      lastTransitionTime: "2025-12-02T09:45:33Z"
      message: 'containers with unready status: [redis]'
      reason: ContainersNotReady
      status: "False"
      type: Ready
    - lastProbeTime: null
      lastTransitionTime: "2025-12-02T09:45:33Z"
      message: 'containers with unready status: [redis]'
      reason: ContainersNotReady
      status: "False"
      type: ContainersReady
    - lastProbeTime: null
      lastTransitionTime: "2025-12-02T09:45:33Z"
      status: "True"
      type: PodScheduled
    containerStatuses:
    - containerID: containerd://867ee4b3e90a27001c7a5a96d67f7b527bd5c53e48c87d77fc4a99b8dc010ae6
      image: docker.io/bitnamilegacy/redis:7.4.2-debian-12-r4
      imageID: docker.io/bitnamilegacy/redis@sha256:83d5c765b68bdd01603ea5cbad96abc196e37fb875dc2e9fb8b9bdcce59d13d5
      lastState: {}
      name: redis
      ready: false
      restartCount: 0
      started: true
      state:
        running:
          startedAt: "2025-12-02T09:45:43Z"
      volumeMounts:
      - mountPath: /opt/bitnami/scripts/start-scripts
        name: start-scripts
      - mountPath: /health
        name: health
      - mountPath: /data
        name: redis-data
      - mountPath: /opt/bitnami/redis/mounted-etc
        name: config
      - mountPath: /opt/bitnami/redis/etc/
        name: empty-dir
      - mountPath: /tmp
        name: empty-dir
    hostIP: 10.142.15.194
    hostIPs:
    - ip: 10.142.15.194
    phase: Running
    podIP: 10.76.1.48
    podIPs:
    - ip: 10.76.1.48
    qosClass: Burstable
    startTime: "2025-12-02T09:45:33Z"
- apiVersion: v1
  kind: Service
  metadata:
    annotations:
      cloud.google.com/neg: '{"ingress":true}'
      kubectl.kubernetes.io/last-applied-configuration: |
        {"apiVersion":"v1","kind":"Service","metadata":{"annotations":{},"labels":{"app.kubernetes.io/name":"apptest-cjbnvn9r"},"name":"apim-apk-agent-service","namespace":"apptest-cjbnvn9r","ownerReferences":[{"apiVersion":"app.k8s.io/v1beta1","blockOwnerDeletion":true,"kind":"Application","name":"apptest-cjbnvn9r","uid":"69b7b8be-e784-4125-bcec-88e5f1f3ef36"}]},"spec":{"ports":[{"name":"grpc-server","port":18000,"protocol":"TCP"},{"name":"rest-server","port":18001,"protocol":"TCP"}],"selector":{"app.kubernetes.io/app":"apim-apk-agent"}}}
    creationTimestamp: "2025-12-02T09:45:28Z"
    labels:
      app.kubernetes.io/name: apptest-cjbnvn9r
    name: apim-apk-agent-service
    namespace: apptest-cjbnvn9r
    ownerReferences:
    - apiVersion: app.k8s.io/v1beta1
      blockOwnerDeletion: true
      kind: Application
      name: apptest-cjbnvn9r
      uid: 69b7b8be-e784-4125-bcec-88e5f1f3ef36
    resourceVersion: "1764668728273839020"
    uid: 1c728be2-21ed-41ad-873f-f01f54463f51
  spec:
    clusterIP: 34.118.233.178
    clusterIPs:
    - 34.118.233.178
    internalTrafficPolicy: Cluster
    ipFamilies:
    - IPv4
    ipFamilyPolicy: SingleStack
    ports:
    - name: grpc-server
      port: 18000
      protocol: TCP
      targetPort: 18000
    - name: rest-server
      port: 18001
      protocol: TCP
      targetPort: 18001
    selector:
      app.kubernetes.io/app: apim-apk-agent
    sessionAffinity: None
    type: ClusterIP
  status:
    loadBalancer: {}
- apiVersion: v1
  kind: Service
  metadata:
    annotations:
      cloud.google.com/neg: '{"ingress":true}'
      kubectl.kubernetes.io/last-applied-configuration: |
        {"apiVersion":"v1","kind":"Service","metadata":{"annotations":{},"labels":{"app.kubernetes.io/name":"apptest-cjbnvn9r"},"name":"apptest-cjbnvn9r-acp-1-service","namespace":"apptest-cjbnvn9r","ownerReferences":[{"apiVersion":"app.k8s.io/v1beta1","blockOwnerDeletion":true,"kind":"Application","name":"apptest-cjbnvn9r","uid":"69b7b8be-e784-4125-bcec-88e5f1f3ef36"}]},"spec":{"ports":[{"name":"binary","port":9611,"protocol":"TCP"},{"name":"binary-secure","port":9711,"protocol":"TCP"},{"name":"jms-tcp","port":5672,"protocol":"TCP"},{"name":"servlet-https","port":9443,"protocol":"TCP"},{"name":"jwks","port":9763,"protocol":"TCP"}],"selector":{"deployment":"apptest-cjbnvn9r-acp","node":"apptest-cjbnvn9r-acp-1"}}}
    creationTimestamp: "2025-12-02T09:45:27Z"
    labels:
      app.kubernetes.io/name: apptest-cjbnvn9r
    name: apptest-cjbnvn9r-acp-1-service
    namespace: apptest-cjbnvn9r
    ownerReferences:
    - apiVersion: app.k8s.io/v1beta1
      blockOwnerDeletion: true
      kind: Application
      name: apptest-cjbnvn9r
      uid: 69b7b8be-e784-4125-bcec-88e5f1f3ef36
    resourceVersion: "1764668727649439015"
    uid: 1ce8a4f7-e668-487f-a83e-6eb295bcdfef
  spec:
    clusterIP: 34.118.238.8
    clusterIPs:
    - 34.118.238.8
    internalTrafficPolicy: Cluster
    ipFamilies:
    - IPv4
    ipFamilyPolicy: SingleStack
    ports:
    - name: binary
      port: 9611
      protocol: TCP
      targetPort: 9611
    - name: binary-secure
      port: 9711
      protocol: TCP
      targetPort: 9711
    - name: jms-tcp
      port: 5672
      protocol: TCP
      targetPort: 5672
    - name: servlet-https
      port: 9443
      protocol: TCP
      targetPort: 9443
    - name: jwks
      port: 9763
      protocol: TCP
      targetPort: 9763
    selector:
      deployment: apptest-cjbnvn9r-acp
      node: apptest-cjbnvn9r-acp-1
    sessionAffinity: None
    type: ClusterIP
  status:
    loadBalancer: {}
- apiVersion: v1
  kind: Service
  metadata:
    annotations:
      cloud.google.com/neg: '{"ingress":true}'
      kubectl.kubernetes.io/last-applied-configuration: |
        {"apiVersion":"v1","kind":"Service","metadata":{"annotations":{},"labels":{"app.kubernetes.io/name":"apptest-cjbnvn9r"},"name":"apptest-cjbnvn9r-acp-service","namespace":"apptest-cjbnvn9r","ownerReferences":[{"apiVersion":"app.k8s.io/v1beta1","blockOwnerDeletion":true,"kind":"Application","name":"apptest-cjbnvn9r","uid":"69b7b8be-e784-4125-bcec-88e5f1f3ef36"}]},"spec":{"ports":[{"name":"servlet-http","port":9763,"protocol":"TCP"},{"name":"servlet-https","port":9443,"protocol":"TCP"}],"selector":{"deployment":"apptest-cjbnvn9r-acp"}}}
    creationTimestamp: "2025-12-02T09:45:27Z"
    labels:
      app.kubernetes.io/name: apptest-cjbnvn9r
    name: apptest-cjbnvn9r-acp-service
    namespace: apptest-cjbnvn9r
    ownerReferences:
    - apiVersion: app.k8s.io/v1beta1
      blockOwnerDeletion: true
      kind: Application
      name: apptest-cjbnvn9r
      uid: 69b7b8be-e784-4125-bcec-88e5f1f3ef36
    resourceVersion: "1764668727714063006"
    uid: afec580b-bf9f-450c-b667-3bddbdf72540
  spec:
    clusterIP: 34.118.231.145
    clusterIPs:
    - 34.118.231.145
    internalTrafficPolicy: Cluster
    ipFamilies:
    - IPv4
    ipFamilyPolicy: SingleStack
    ports:
    - name: servlet-http
      port: 9763
      protocol: TCP
      targetPort: 9763
    - name: servlet-https
      port: 9443
      protocol: TCP
      targetPort: 9443
    selector:
      deployment: apptest-cjbnvn9r-acp
    sessionAffinity: None
    type: ClusterIP
  status:
    loadBalancer: {}
- apiVersion: v1
  kind: Service
  metadata:
    annotations:
      cloud.google.com/neg: '{"ingress":true}'
      kubectl.kubernetes.io/last-applied-configuration: |
        {"apiVersion":"v1","kind":"Service","metadata":{"annotations":{},"labels":{"app.kubernetes.io/name":"apptest-cjbnvn9r"},"name":"apptest-cjbnvn9r-wso2-apk-adapter-service","namespace":"apptest-cjbnvn9r","ownerReferences":[{"apiVersion":"app.k8s.io/v1beta1","blockOwnerDeletion":true,"kind":"Application","name":"apptest-cjbnvn9r","uid":"69b7b8be-e784-4125-bcec-88e5f1f3ef36"}]},"spec":{"ports":[{"name":"endpoint1","port":8765,"protocol":"TCP"},{"name":"endpoint2","port":18000,"protocol":"TCP"},{"name":"webhook-server","port":443,"protocol":"TCP","targetPort":9443},{"name":"https-rate-limiter","port":18005,"protocol":"TCP"},{"name":"profile-port","port":6060,"protocol":"TCP"}],"selector":{"app.kubernetes.io/app":"adapter","app.kubernetes.io/release":"apptest-cjbnvn9r"}}}
    creationTimestamp: "2025-12-02T09:45:27Z"
    labels:
      app.kubernetes.io/name: apptest-cjbnvn9r
    name: apptest-cjbnvn9r-wso2-apk-adapter-service
    namespace: apptest-cjbnvn9r
    ownerReferences:
    - apiVersion: app.k8s.io/v1beta1
      blockOwnerDeletion: true
      kind: Application
      name: apptest-cjbnvn9r
      uid: 69b7b8be-e784-4125-bcec-88e5f1f3ef36
    resourceVersion: "1764668727946431013"
    uid: 8038f102-b35b-4c93-8920-2f2d5a9bc7d6
  spec:
    clusterIP: 34.118.225.4
    clusterIPs:
    - 34.118.225.4
    internalTrafficPolicy: Cluster
    ipFamilies:
    - IPv4
    ipFamilyPolicy: SingleStack
    ports:
    - name: endpoint1
      port: 8765
      protocol: TCP
      targetPort: 8765
    - name: endpoint2
      port: 18000
      protocol: TCP
      targetPort: 18000
    - name: webhook-server
      port: 443
      protocol: TCP
      targetPort: 9443
    - name: https-rate-limiter
      port: 18005
      protocol: TCP
      targetPort: 18005
    - name: profile-port
      port: 6060
      protocol: TCP
      targetPort: 6060
    selector:
      app.kubernetes.io/app: adapter
      app.kubernetes.io/release: apptest-cjbnvn9r
    sessionAffinity: None
    type: ClusterIP
  status:
    loadBalancer: {}
- apiVersion: v1
  kind: Service
  metadata:
    annotations:
      cloud.google.com/neg: '{"ingress":true}'
      kubectl.kubernetes.io/last-applied-configuration: |
        {"apiVersion":"v1","kind":"Service","metadata":{"annotations":{},"labels":{"app.kubernetes.io/name":"apptest-cjbnvn9r"},"name":"apptest-cjbnvn9r-wso2-apk-common-controller-service","namespace":"apptest-cjbnvn9r","ownerReferences":[{"apiVersion":"app.k8s.io/v1beta1","blockOwnerDeletion":true,"kind":"Application","name":"apptest-cjbnvn9r","uid":"69b7b8be-e784-4125-bcec-88e5f1f3ef36"}]},"spec":{"ports":[{"name":"https-rate-limiter","port":18005,"protocol":"TCP"},{"name":"https-enforcer-xds","port":18002,"protocol":"TCP"},{"name":"webhook-server","port":443,"protocol":"TCP","targetPort":9443},{"name":"https-internal-api","port":18003,"protocol":"TCP"},{"name":"web-server","port":9543,"protocol":"TCP","targetPort":9543}],"selector":{"app.kubernetes.io/app":"commoncontroller","app.kubernetes.io/release":"apptest-cjbnvn9r"}}}
    creationTimestamp: "2025-12-02T09:45:27Z"
    labels:
      app.kubernetes.io/name: apptest-cjbnvn9r
    name: apptest-cjbnvn9r-wso2-apk-common-controller-service
    namespace: apptest-cjbnvn9r
    ownerReferences:
    - apiVersion: app.k8s.io/v1beta1
      blockOwnerDeletion: true
      kind: Application
      name: apptest-cjbnvn9r
      uid: 69b7b8be-e784-4125-bcec-88e5f1f3ef36
    resourceVersion: "1764668728008079009"
    uid: feca2340-6bfa-42f4-a2dc-89d273b8f455
  spec:
    clusterIP: 34.118.233.81
    clusterIPs:
    - 34.118.233.81
    internalTrafficPolicy: Cluster
    ipFamilies:
    - IPv4
    ipFamilyPolicy: SingleStack
    ports:
    - name: https-rate-limiter
      port: 18005
      protocol: TCP
      targetPort: 18005
    - name: https-enforcer-xds
      port: 18002
      protocol: TCP
      targetPort: 18002
    - name: webhook-server
      port: 443
      protocol: TCP
      targetPort: 9443
    - name: https-internal-api
      port: 18003
      protocol: TCP
      targetPort: 18003
    - name: web-server
      port: 9543
      protocol: TCP
      targetPort: 9543
    selector:
      app.kubernetes.io/app: commoncontroller
      app.kubernetes.io/release: apptest-cjbnvn9r
    sessionAffinity: None
    type: ClusterIP
  status:
    loadBalancer: {}
- apiVersion: v1
  kind: Service
  metadata:
    annotations:
      cloud.google.com/neg: '{"ingress":true}'
      kubectl.kubernetes.io/last-applied-configuration: |
        {"apiVersion":"v1","kind":"Service","metadata":{"annotations":{},"labels":{"app.kubernetes.io/name":"apptest-cjbnvn9r"},"name":"apptest-cjbnvn9r-wso2-apk-config-ds-service","namespace":"apptest-cjbnvn9r","ownerReferences":[{"apiVersion":"app.k8s.io/v1beta1","blockOwnerDeletion":true,"kind":"Application","name":"apptest-cjbnvn9r","uid":"69b7b8be-e784-4125-bcec-88e5f1f3ef36"}]},"spec":{"ports":[{"name":"servlet-https","port":9443,"protocol":"TCP"}],"selector":{"app.kubernetes.io/app":"configdeployer-ds","app.kubernetes.io/release":"apptest-cjbnvn9r"}}}
    creationTimestamp: "2025-12-02T09:45:27Z"
    labels:
      app.kubernetes.io/name: apptest-cjbnvn9r
    name: apptest-cjbnvn9r-wso2-apk-config-ds-service
    namespace: apptest-cjbnvn9r
    ownerReferences:
    - apiVersion: app.k8s.io/v1beta1
      blockOwnerDeletion: true
      kind: Application
      name: apptest-cjbnvn9r
      uid: 69b7b8be-e784-4125-bcec-88e5f1f3ef36
    resourceVersion: "1764668727886495017"
    uid: 572c52b7-d7e2-445e-a10b-53e32743d69c
  spec:
    clusterIP: 34.118.229.82
    clusterIPs:
    - 34.118.229.82
    internalTrafficPolicy: Cluster
    ipFamilies:
    - IPv4
    ipFamilyPolicy: SingleStack
    ports:
    - name: servlet-https
      port: 9443
      protocol: TCP
      targetPort: 9443
    selector:
      app.kubernetes.io/app: configdeployer-ds
      app.kubernetes.io/release: apptest-cjbnvn9r
    sessionAffinity: None
    type: ClusterIP
  status:
    loadBalancer: {}
- apiVersion: v1
  kind: Service
  metadata:
    annotations:
      cloud.google.com/neg: '{"ingress":true}'
      kubectl.kubernetes.io/last-applied-configuration: |
        {"apiVersion":"v1","kind":"Service","metadata":{"annotations":{},"labels":{"app.kubernetes.io/name":"apptest-cjbnvn9r"},"name":"apptest-cjbnvn9r-wso2-apk-enforcer-service","namespace":"apptest-cjbnvn9r","ownerReferences":[{"apiVersion":"app.k8s.io/v1beta1","blockOwnerDeletion":true,"kind":"Application","name":"apptest-cjbnvn9r","uid":"69b7b8be-e784-4125-bcec-88e5f1f3ef36"}]},"spec":{"ports":[{"name":"servlet-https","port":9092,"protocol":"TCP"}],"selector":{"app.kubernetes.io/app":"gateway","app.kubernetes.io/release":"apptest-cjbnvn9r"}}}
    creationTimestamp: "2025-12-02T09:45:28Z"
    labels:
      app.kubernetes.io/name: apptest-cjbnvn9r
    name: apptest-cjbnvn9r-wso2-apk-enforcer-service
    namespace: apptest-cjbnvn9r
    ownerReferences:
    - apiVersion: app.k8s.io/v1beta1
      blockOwnerDeletion: true
      kind: Application
      name: apptest-cjbnvn9r
      uid: 69b7b8be-e784-4125-bcec-88e5f1f3ef36
    resourceVersion: "1764668728074687000"
    uid: 159d7d0b-a98f-4554-a57c-4dda52e41a97
  spec:
    clusterIP: 34.118.225.122
    clusterIPs:
    - 34.118.225.122
    internalTrafficPolicy: Cluster
    ipFamilies:
    - IPv4
    ipFamilyPolicy: SingleStack
    ports:
    - name: servlet-https
      port: 9092
      protocol: TCP
      targetPort: 9092
    selector:
      app.kubernetes.io/app: gateway
      app.kubernetes.io/release: apptest-cjbnvn9r
    sessionAffinity: None
    type: ClusterIP
  status:
    loadBalancer: {}
- apiVersion: v1
  kind: Service
  metadata:
    annotations:
      cloud.google.com/neg: '{"ingress":true}'
      kubectl.kubernetes.io/last-applied-configuration: |
        {"apiVersion":"v1","kind":"Service","metadata":{"annotations":{},"labels":{"app.kubernetes.io/name":"apptest-cjbnvn9r"},"name":"apptest-cjbnvn9r-wso2-apk-gateway-service","namespace":"apptest-cjbnvn9r","ownerReferences":[{"apiVersion":"app.k8s.io/v1beta1","blockOwnerDeletion":true,"kind":"Application","name":"apptest-cjbnvn9r","uid":"69b7b8be-e784-4125-bcec-88e5f1f3ef36"}]},"spec":{"ports":[{"name":"https-endpoint","port":9095,"protocol":"TCP"}],"selector":{"app.kubernetes.io/app":"gateway","app.kubernetes.io/release":"apptest-cjbnvn9r"},"type":"LoadBalancer"}}
    creationTimestamp: "2025-12-02T09:45:28Z"
    finalizers:
    - service.kubernetes.io/load-balancer-cleanup
    labels:
      app.kubernetes.io/name: apptest-cjbnvn9r
    name: apptest-cjbnvn9r-wso2-apk-gateway-service
    namespace: apptest-cjbnvn9r
    ownerReferences:
    - apiVersion: app.k8s.io/v1beta1
      blockOwnerDeletion: true
      kind: Application
      name: apptest-cjbnvn9r
      uid: 69b7b8be-e784-4125-bcec-88e5f1f3ef36
    resourceVersion: "1764668728189343009"
    uid: a9fa1e99-bdfd-4e8e-97eb-7a72fc029145
  spec:
    allocateLoadBalancerNodePorts: true
    clusterIP: 34.118.233.241
    clusterIPs:
    - 34.118.233.241
    externalTrafficPolicy: Cluster
    internalTrafficPolicy: Cluster
    ipFamilies:
    - IPv4
    ipFamilyPolicy: SingleStack
    ports:
    - name: https-endpoint
      nodePort: 31245
      port: 9095
      protocol: TCP
      targetPort: 9095
    selector:
      app.kubernetes.io/app: gateway
      app.kubernetes.io/release: apptest-cjbnvn9r
    sessionAffinity: None
    type: LoadBalancer
  status:
    loadBalancer: {}
- apiVersion: v1
  kind: Service
  metadata:
    annotations:
      cloud.google.com/neg: '{"ingress":true}'
      kubectl.kubernetes.io/last-applied-configuration: |
        {"apiVersion":"v1","kind":"Service","metadata":{"annotations":{},"labels":{"app.kubernetes.io/name":"apptest-cjbnvn9r"},"name":"apptest-cjbnvn9r-wso2-apk-ratelimiter-service","namespace":"apptest-cjbnvn9r","ownerReferences":[{"apiVersion":"app.k8s.io/v1beta1","blockOwnerDeletion":true,"kind":"Application","name":"apptest-cjbnvn9r","uid":"69b7b8be-e784-4125-bcec-88e5f1f3ef36"}]},"spec":{"ports":[{"name":"endpoint1","port":8090,"protocol":"TCP"},{"name":"endpoint2","port":8091,"protocol":"TCP"},{"name":"endpoint3","port":6070,"protocol":"TCP"}],"selector":{"app.kubernetes.io/app":"ratelimiter","app.kubernetes.io/release":"apptest-cjbnvn9r"}}}
    creationTimestamp: "2025-12-02T09:45:28Z"
    labels:
      app.kubernetes.io/name: apptest-cjbnvn9r
    name: apptest-cjbnvn9r-wso2-apk-ratelimiter-service
    namespace: apptest-cjbnvn9r
    ownerReferences:
    - apiVersion: app.k8s.io/v1beta1
      blockOwnerDeletion: true
      kind: Application
      name: apptest-cjbnvn9r
      uid: 69b7b8be-e784-4125-bcec-88e5f1f3ef36
    resourceVersion: "1764668728210495016"
    uid: 3750e16a-d591-4671-85b8-e583a0abdf15
  spec:
    clusterIP: 34.118.236.33
    clusterIPs:
    - 34.118.236.33
    internalTrafficPolicy: Cluster
    ipFamilies:
    - IPv4
    ipFamilyPolicy: SingleStack
    ports:
    - name: endpoint1
      port: 8090
      protocol: TCP
      targetPort: 8090
    - name: endpoint2
      port: 8091
      protocol: TCP
      targetPort: 8091
    - name: endpoint3
      port: 6070
      protocol: TCP
      targetPort: 6070
    selector:
      app.kubernetes.io/app: ratelimiter
      app.kubernetes.io/release: apptest-cjbnvn9r
    sessionAffinity: None
    type: ClusterIP
  status:
    loadBalancer: {}
- apiVersion: v1
  kind: Service
  metadata:
    annotations:
      cloud.google.com/neg: '{"ingress":true}'
      kubectl.kubernetes.io/last-applied-configuration: |
        {"apiVersion":"v1","kind":"Service","metadata":{"annotations":{},"labels":{"app.kubernetes.io/instance":"apptest-cjbnvn9r","app.kubernetes.io/managed-by":"Helm","app.kubernetes.io/name":"redis","app.kubernetes.io/version":"7.4.2","helm.sh/chart":"redis-20.10.0"},"name":"redis-headless","namespace":"apptest-cjbnvn9r","ownerReferences":[{"apiVersion":"app.k8s.io/v1beta1","blockOwnerDeletion":true,"kind":"Application","name":"apptest-cjbnvn9r","uid":"69b7b8be-e784-4125-bcec-88e5f1f3ef36"}]},"spec":{"clusterIP":"None","ports":[{"name":"tcp-redis","port":6379,"targetPort":"redis"}],"selector":{"app.kubernetes.io/instance":"apptest-cjbnvn9r","app.kubernetes.io/name":"redis"},"type":"ClusterIP"}}
    creationTimestamp: "2025-12-02T09:45:27Z"
    labels:
      app.kubernetes.io/instance: apptest-cjbnvn9r
      app.kubernetes.io/managed-by: Helm
      app.kubernetes.io/name: redis
      app.kubernetes.io/version: 7.4.2
      helm.sh/chart: redis-20.10.0
    name: redis-headless
    namespace: apptest-cjbnvn9r
    ownerReferences:
    - apiVersion: app.k8s.io/v1beta1
      blockOwnerDeletion: true
      kind: Application
      name: apptest-cjbnvn9r
      uid: 69b7b8be-e784-4125-bcec-88e5f1f3ef36
    resourceVersion: "1764668727751663004"
    uid: 0b948a3f-52f8-4cc3-ae86-cbbdc1c9d6d8
  spec:
    clusterIP: None
    clusterIPs:
    - None
    internalTrafficPolicy: Cluster
    ipFamilies:
    - IPv4
    ipFamilyPolicy: SingleStack
    ports:
    - name: tcp-redis
      port: 6379
      protocol: TCP
      targetPort: redis
    selector:
      app.kubernetes.io/instance: apptest-cjbnvn9r
      app.kubernetes.io/name: redis
    sessionAffinity: None
    type: ClusterIP
  status:
    loadBalancer: {}
- apiVersion: v1
  kind: Service
  metadata:
    annotations:
      cloud.google.com/neg: '{"ingress":true}'
      kubectl.kubernetes.io/last-applied-configuration: |
        {"apiVersion":"v1","kind":"Service","metadata":{"annotations":{},"labels":{"app.kubernetes.io/component":"master","app.kubernetes.io/instance":"apptest-cjbnvn9r","app.kubernetes.io/managed-by":"Helm","app.kubernetes.io/name":"redis","app.kubernetes.io/version":"7.4.2","helm.sh/chart":"redis-20.10.0"},"name":"redis-master","namespace":"apptest-cjbnvn9r","ownerReferences":[{"apiVersion":"app.k8s.io/v1beta1","blockOwnerDeletion":true,"kind":"Application","name":"apptest-cjbnvn9r","uid":"69b7b8be-e784-4125-bcec-88e5f1f3ef36"}]},"spec":{"internalTrafficPolicy":"Cluster","ports":[{"name":"tcp-redis","nodePort":null,"port":6379,"targetPort":"redis"}],"selector":{"app.kubernetes.io/component":"master","app.kubernetes.io/instance":"apptest-cjbnvn9r","app.kubernetes.io/name":"redis"},"sessionAffinity":"None","type":"ClusterIP"}}
    creationTimestamp: "2025-12-02T09:45:27Z"
    labels:
      app.kubernetes.io/component: master
      app.kubernetes.io/instance: apptest-cjbnvn9r
      app.kubernetes.io/managed-by: Helm
      app.kubernetes.io/name: redis
      app.kubernetes.io/version: 7.4.2
      helm.sh/chart: redis-20.10.0
    name: redis-master
    namespace: apptest-cjbnvn9r
    ownerReferences:
    - apiVersion: app.k8s.io/v1beta1
      blockOwnerDeletion: true
      kind: Application
      name: apptest-cjbnvn9r
      uid: 69b7b8be-e784-4125-bcec-88e5f1f3ef36
    resourceVersion: "1764668727814751024"
    uid: d2bc2a6d-410b-4010-9b59-a76c3c6b7945
  spec:
    clusterIP: 34.118.235.31
    clusterIPs:
    - 34.118.235.31
    internalTrafficPolicy: Cluster
    ipFamilies:
    - IPv4
    ipFamilyPolicy: SingleStack
    ports:
    - name: tcp-redis
      port: 6379
      protocol: TCP
      targetPort: redis
    selector:
      app.kubernetes.io/component: master
      app.kubernetes.io/instance: apptest-cjbnvn9r
      app.kubernetes.io/name: redis
    sessionAffinity: None
    type: ClusterIP
  status:
    loadBalancer: {}
- apiVersion: apps/v1
  kind: Deployment
  metadata:
    annotations:
      deployment.kubernetes.io/revision: "1"
      kubectl.kubernetes.io/last-applied-configuration: |
        {"apiVersion":"apps/v1","kind":"Deployment","metadata":{"annotations":{},"labels":{"app.kubernetes.io/app":"apim-apk-agent","app.kubernetes.io/name":"apptest-cjbnvn9r","helm.sh/chart":"apkagent"},"name":"apkagent","namespace":"apptest-cjbnvn9r","ownerReferences":[{"apiVersion":"app.k8s.io/v1beta1","blockOwnerDeletion":true,"kind":"Application","name":"apptest-cjbnvn9r","uid":"69b7b8be-e784-4125-bcec-88e5f1f3ef36"}]},"spec":{"replicas":1,"selector":{"matchLabels":{"app.kubernetes.io/app":"apim-apk-agent","app.kubernetes.io/instance":"apptest-cjbnvn9r","app.kubernetes.io/name":"apkagent"}},"template":{"metadata":{"annotations":{"checksum/config":"f1386741e0bb8883657604c6a4c07b77097ac794746112a899cdbe129c4514ca"},"labels":{"app.kubernetes.io/app":"apim-apk-agent","app.kubernetes.io/instance":"apptest-cjbnvn9r","app.kubernetes.io/name":"apkagent"}},"spec":{"containers":[{"env":[{"name":"APIM_APK_AGENT_PRIVATE_KEY_PATH","value":"/home/wso2/security/keystore/apk-agent.key"},{"name":"APIM_APK_AGENT_PUBLIC_CERT_PATH","value":"/home/wso2/security/keystore/apk-agent.crt"},{"name":"APIM_APK_AGENT_SERVER_NAME","value":"apim-apk-agent-service.apptest-cjbnvn9r.svc"},{"name":"APIM_APK_AGENT_GRPC_PORT","value":"18000"}],"image":"us-docker.pkg.dev/wso2-marketplace-public/wso2-marketplace/apim-apk-agent:4.5","imagePullPolicy":"Always","livenessProbe":{"exec":{"command":["sh","check_health.sh"]},"failureThreshold":5,"initialDelaySeconds":20,"periodSeconds":20},"name":"apkagent","ports":[{"containerPort":18000,"name":"grpc-port"},{"containerPort":18001,"name":"rest-port"}],"readinessProbe":{"exec":{"command":["sh","check_health.sh"]},"failureThreshold":5,"initialDelaySeconds":20,"periodSeconds":20},"resources":{"limits":{"cpu":"200m","memory":"256Mi"},"requests":{"cpu":"100m","memory":"128Mi"}},"volumeMounts":[{"mountPath":"/home/wso2/conf/","name":"log-conf-volume"},{"mountPath":"/home/wso2/security/keystore/apk-agent.key","name":"apk-agent-certificates","subPath":"tls.key"},{"mountPath":"/home/wso2/security/keystore/apk-agent.crt","name":"apk-agent-certificates","subPath":"tls.crt"},{"mountPath":"/home/wso2/security/truststore/apk-agent-ca.crt","name":"apk-agent-certificates","subPath":"ca.crt"}]}],"serviceAccountName":"wso2agent-platform","volumes":[{"configMap":{"name":"apptest-cjbnvn9r-log-conf"},"name":"log-conf-volume"},{"name":"apk-agent-certificates","secret":{"secretName":"apk-agent-server-cert"}}]}}}}
    creationTimestamp: "2025-12-02T09:45:29Z"
    generation: 1
    labels:
      app.kubernetes.io/app: apim-apk-agent
      app.kubernetes.io/name: apptest-cjbnvn9r
      helm.sh/chart: apkagent
    name: apkagent
    namespace: apptest-cjbnvn9r
    ownerReferences:
    - apiVersion: app.k8s.io/v1beta1
      blockOwnerDeletion: true
      kind: Application
      name: apptest-cjbnvn9r
      uid: 69b7b8be-e784-4125-bcec-88e5f1f3ef36
    resourceVersion: "1764668729705759016"
    uid: 2886b15c-07f4-48fe-b587-bead2de2b43f
  spec:
    progressDeadlineSeconds: 600
    replicas: 1
    revisionHistoryLimit: 10
    selector:
      matchLabels:
        app.kubernetes.io/app: apim-apk-agent
        app.kubernetes.io/instance: apptest-cjbnvn9r
        app.kubernetes.io/name: apkagent
    strategy:
      rollingUpdate:
        maxSurge: 25%
        maxUnavailable: 25%
      type: RollingUpdate
    template:
      metadata:
        annotations:
          checksum/config: f1386741e0bb8883657604c6a4c07b77097ac794746112a899cdbe129c4514ca
        creationTimestamp: null
        labels:
          app.kubernetes.io/app: apim-apk-agent
          app.kubernetes.io/instance: apptest-cjbnvn9r
          app.kubernetes.io/name: apkagent
      spec:
        containers:
        - env:
          - name: APIM_APK_AGENT_PRIVATE_KEY_PATH
            value: /home/wso2/security/keystore/apk-agent.key
          - name: APIM_APK_AGENT_PUBLIC_CERT_PATH
            value: /home/wso2/security/keystore/apk-agent.crt
          - name: APIM_APK_AGENT_SERVER_NAME
            value: apim-apk-agent-service.apptest-cjbnvn9r.svc
          - name: APIM_APK_AGENT_GRPC_PORT
            value: "18000"
          image: us-docker.pkg.dev/wso2-marketplace-public/wso2-marketplace/apim-apk-agent:4.5
          imagePullPolicy: Always
          livenessProbe:
            exec:
              command:
              - sh
              - check_health.sh
            failureThreshold: 5
            initialDelaySeconds: 20
            periodSeconds: 20
            successThreshold: 1
            timeoutSeconds: 1
          name: apkagent
          ports:
          - containerPort: 18000
            name: grpc-port
            protocol: TCP
          - containerPort: 18001
            name: rest-port
            protocol: TCP
          readinessProbe:
            exec:
              command:
              - sh
              - check_health.sh
            failureThreshold: 5
            initialDelaySeconds: 20
            periodSeconds: 20
            successThreshold: 1
            timeoutSeconds: 1
          resources:
            limits:
              cpu: 200m
              memory: 256Mi
            requests:
              cpu: 100m
              memory: 128Mi
          terminationMessagePath: /dev/termination-log
          terminationMessagePolicy: File
          volumeMounts:
          - mountPath: /home/wso2/conf/
            name: log-conf-volume
          - mountPath: /home/wso2/security/keystore/apk-agent.key
            name: apk-agent-certificates
            subPath: tls.key
          - mountPath: /home/wso2/security/keystore/apk-agent.crt
            name: apk-agent-certificates
            subPath: tls.crt
          - mountPath: /home/wso2/security/truststore/apk-agent-ca.crt
            name: apk-agent-certificates
            subPath: ca.crt
        dnsPolicy: ClusterFirst
        restartPolicy: Always
        schedulerName: default-scheduler
        securityContext: {}
        serviceAccount: wso2agent-platform
        serviceAccountName: wso2agent-platform
        terminationGracePeriodSeconds: 30
        volumes:
        - configMap:
            defaultMode: 420
            name: apptest-cjbnvn9r-log-conf
          name: log-conf-volume
        - name: apk-agent-certificates
          secret:
            defaultMode: 420
            secretName: apk-agent-server-cert
  status:
    conditions:
    - lastTransitionTime: "2025-12-02T09:45:29Z"
      lastUpdateTime: "2025-12-02T09:45:29Z"
      message: Deployment does not have minimum availability.
      reason: MinimumReplicasUnavailable
      status: "False"
      type: Available
    - lastTransitionTime: "2025-12-02T09:45:29Z"
      lastUpdateTime: "2025-12-02T09:45:29Z"
      message: ReplicaSet "apkagent-568cd8f787" is progressing.
      reason: ReplicaSetUpdated
      status: "True"
      type: Progressing
    observedGeneration: 1
    replicas: 1
    unavailableReplicas: 1
    updatedReplicas: 1
- apiVersion: apps/v1
  kind: Deployment
  metadata:
    annotations:
      deployment.kubernetes.io/revision: "1"
      kubectl.kubernetes.io/last-applied-configuration: |
        {"apiVersion":"apps/v1","kind":"Deployment","metadata":{"annotations":{},"labels":{"app.kubernetes.io/name":"apptest-cjbnvn9r"},"name":"apptest-cjbnvn9r-acp-deployment-1","namespace":"apptest-cjbnvn9r","ownerReferences":[{"apiVersion":"app.k8s.io/v1beta1","blockOwnerDeletion":true,"kind":"Application","name":"apptest-cjbnvn9r","uid":"69b7b8be-e784-4125-bcec-88e5f1f3ef36"}]},"spec":{"replicas":1,"selector":{"matchLabels":{"deployment":"apptest-cjbnvn9r-acp","node":"apptest-cjbnvn9r-acp-1"}},"strategy":{"type":"Recreate"},"template":{"metadata":{"annotations":{"checksum.am.cp.conf":"b161029a8624c675a703ea9441f0b0c44282b8c42035c342ae10a7b3cac9e75f","checksum.am.cp.conf.log4j2":"6dd938f39d31dc49520a30c28c5915a3df355f79250460812b1b3c94d19754ba","checksum.am.cp.conf.secret":"6931efed2d9b235c16cb2483d011065a68d48e84e9adb262621f41a66645fbfb","cloudmarketplace.googleapis.com/product.metadata":"v1:{\"services\":[{\"service_name\":\"wso2-apimanager.endpoints.wso2-marketplace-public.cloud.goog\", \"service_level\":\"default\"}]}"},"labels":{"deployment":"apptest-cjbnvn9r-acp","node":"apptest-cjbnvn9r-acp-1","product":"apim"}},"spec":{"affinity":{"podAntiAffinity":{"preferredDuringSchedulingIgnoredDuringExecution":[{"podAffinityTerm":{"labelSelector":{"matchExpressions":[{"key":"deployment","operator":"In","values":["apptest-cjbnvn9r-acp"]}]},"topologyKey":"topology.kubernetes.io/zone"},"weight":100}]}},"containers":[{"env":[{"name":"PROFILE_NAME","value":"default"},{"name":"NODE_IP","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"status.podIP"}}},{"name":"JVM_MEM_OPTS","value":"-Xms2048m -Xmx2048m"}],"image":"us-docker.pkg.dev/wso2-marketplace-public/wso2-marketplace/wso2am-acp:4.5","imagePullPolicy":"Always","lifecycle":{"preStop":{"exec":{"command":["sh","-c","echo \"Pre stop hook triggered\"; sleep 10; echo \"Shutdown APIM Server\"; ${WSO2_SERVER_HOME}/bin/api-cp.sh stop\n"]}}},"livenessProbe":{"failureThreshold":3,"httpGet":{"path":"/services/Version","port":9763},"initialDelaySeconds":60,"periodSeconds":10},"name":"wso2am-control-plane","ports":[{"containerPort":9763,"protocol":"TCP"},{"containerPort":9443,"protocol":"TCP"},{"containerPort":9711,"protocol":"TCP"},{"containerPort":9611,"protocol":"TCP"},{"containerPort":5672,"protocol":"TCP"}],"readinessProbe":{"failureThreshold":3,"httpGet":{"path":"/services/Version","port":9763},"initialDelaySeconds":60,"periodSeconds":10},"resources":{"limits":{"cpu":"3000m","memory":"5Gi"},"requests":{"cpu":"2000m","memory":"2Gi"}},"securityContext":{"allowPrivilegeEscalation":false,"capabilities":{"drop":["all"]},"runAsNonRoot":true,"runAsUser":10001},"startupProbe":{"exec":{"command":["/bin/sh","-c","timeout 1 bash -c \"\u003c/dev/tcp/localhost/9443\""]},"failureThreshold":3,"initialDelaySeconds":60,"periodSeconds":10},"volumeMounts":[{"mountPath":"/home/wso2carbon/wso2-config-volume/repository/conf/deployment.toml","name":"wso2am-control-plane-conf","subPath":"deployment.toml"},{"mountPath":"/home/wso2carbon/docker-entrypoint.sh","name":"wso2am-control-plane-entrypoint","subPath":"docker-entrypoint.sh"},{"mountPath":"/home/wso2carbon/wso2-config-volume/repository/conf/log4j2.properties","name":"wso2am-control-plane-log4j2","subPath":"log4j2.properties"},{"mountPath":"/home/wso2carbon/wso2-config-volume/repository/deployment/server/webapps/admin/site/public/conf/settings.json","name":"wso2am-conf-admin-settings","subPath":"settings.json"},{"mountPath":"/home/wso2carbon/wso2-config-volume/repository/deployment/server/webapps/devportal/site/public/theme/settings.json","name":"wso2am-conf-devportal-settings","subPath":"settings.json"},{"mountPath":"/home/wso2carbon/wso2-config-volume/repository/deployment/server/webapps/publisher/site/public/conf/settings.json","name":"wso2am-conf-publisher-settings","subPath":"settings.json"}]}],"securityContext":{"seccompProfile":{"type":"RuntimeDefault"}},"volumes":[{"configMap":{"defaultMode":263,"name":"apptest-cjbnvn9r-acp-conf-1"},"name":"wso2am-control-plane-conf"},{"configMap":{"defaultMode":263,"name":"apptest-cjbnvn9r-acp-conf-entrypoint"},"name":"wso2am-control-plane-entrypoint"},{"configMap":{"defaultMode":263,"name":"apptest-cjbnvn9r-acp-conf-log4j2"},"name":"wso2am-control-plane-log4j2"},{"configMap":{"defaultMode":263,"name":"apptest-cjbnvn9r-acp-conf-admin-settings"},"name":"wso2am-conf-admin-settings"},{"configMap":{"defaultMode":263,"name":"apptest-cjbnvn9r-acp-conf-devportal-settings"},"name":"wso2am-conf-devportal-settings"},{"configMap":{"defaultMode":263,"name":"apptest-cjbnvn9r-acp-conf-publisher-settings"},"name":"wso2am-conf-publisher-settings"}]}}}}
    creationTimestamp: "2025-12-02T09:45:28Z"
    generation: 1
    labels:
      app.kubernetes.io/name: apptest-cjbnvn9r
    name: apptest-cjbnvn9r-acp-deployment-1
    namespace: apptest-cjbnvn9r
    ownerReferences:
    - apiVersion: app.k8s.io/v1beta1
      blockOwnerDeletion: true
      kind: Application
      name: apptest-cjbnvn9r
      uid: 69b7b8be-e784-4125-bcec-88e5f1f3ef36
    resourceVersion: "1764668728727247005"
    uid: 02b947b1-1f6a-427c-8855-412204a56074
  spec:
    progressDeadlineSeconds: 600
    replicas: 1
    revisionHistoryLimit: 10
    selector:
      matchLabels:
        deployment: apptest-cjbnvn9r-acp
        node: apptest-cjbnvn9r-acp-1
    strategy:
      type: Recreate
    template:
      metadata:
        annotations:
          checksum.am.cp.conf: b161029a8624c675a703ea9441f0b0c44282b8c42035c342ae10a7b3cac9e75f
          checksum.am.cp.conf.log4j2: 6dd938f39d31dc49520a30c28c5915a3df355f79250460812b1b3c94d19754ba
          checksum.am.cp.conf.secret: 6931efed2d9b235c16cb2483d011065a68d48e84e9adb262621f41a66645fbfb
          cloudmarketplace.googleapis.com/product.metadata: v1:{"services":[{"service_name":"wso2-apimanager.endpoints.wso2-marketplace-public.cloud.goog",
            "service_level":"default"}]}
        creationTimestamp: null
        labels:
          deployment: apptest-cjbnvn9r-acp
          node: apptest-cjbnvn9r-acp-1
          product: apim
      spec:
        affinity:
          podAntiAffinity:
            preferredDuringSchedulingIgnoredDuringExecution:
            - podAffinityTerm:
                labelSelector:
                  matchExpressions:
                  - key: deployment
                    operator: In
                    values:
                    - apptest-cjbnvn9r-acp
                topologyKey: topology.kubernetes.io/zone
              weight: 100
        containers:
        - env:
          - name: PROFILE_NAME
            value: default
          - name: NODE_IP
            valueFrom:
              fieldRef:
                apiVersion: v1
                fieldPath: status.podIP
          - name: JVM_MEM_OPTS
            value: -Xms2048m -Xmx2048m
          image: us-docker.pkg.dev/wso2-marketplace-public/wso2-marketplace/wso2am-acp:4.5
          imagePullPolicy: Always
          lifecycle:
            preStop:
              exec:
                command:
                - sh
                - -c
                - |
                  echo "Pre stop hook triggered"; sleep 10; echo "Shutdown APIM Server"; ${WSO2_SERVER_HOME}/bin/api-cp.sh stop
          livenessProbe:
            failureThreshold: 3
            httpGet:
              path: /services/Version
              port: 9763
              scheme: HTTP
            initialDelaySeconds: 60
            periodSeconds: 10
            successThreshold: 1
            timeoutSeconds: 1
          name: wso2am-control-plane
          ports:
          - containerPort: 9763
            protocol: TCP
          - containerPort: 9443
            protocol: TCP
          - containerPort: 9711
            protocol: TCP
          - containerPort: 9611
            protocol: TCP
          - containerPort: 5672
            protocol: TCP
          readinessProbe:
            failureThreshold: 3
            httpGet:
              path: /services/Version
              port: 9763
              scheme: HTTP
            initialDelaySeconds: 60
            periodSeconds: 10
            successThreshold: 1
            timeoutSeconds: 1
          resources:
            limits:
              cpu: "3"
              memory: 5Gi
            requests:
              cpu: "2"
              memory: 2Gi
          securityContext:
            allowPrivilegeEscalation: false
            capabilities:
              drop:
              - all
            runAsNonRoot: true
            runAsUser: 10001
          startupProbe:
            exec:
              command:
              - /bin/sh
              - -c
              - timeout 1 bash -c "</dev/tcp/localhost/9443"
            failureThreshold: 3
            initialDelaySeconds: 60
            periodSeconds: 10
            successThreshold: 1
            timeoutSeconds: 1
          terminationMessagePath: /dev/termination-log
          terminationMessagePolicy: File
          volumeMounts:
          - mountPath: /home/wso2carbon/wso2-config-volume/repository/conf/deployment.toml
            name: wso2am-control-plane-conf
            subPath: deployment.toml
          - mountPath: /home/wso2carbon/docker-entrypoint.sh
            name: wso2am-control-plane-entrypoint
            subPath: docker-entrypoint.sh
          - mountPath: /home/wso2carbon/wso2-config-volume/repository/conf/log4j2.properties
            name: wso2am-control-plane-log4j2
            subPath: log4j2.properties
          - mountPath: /home/wso2carbon/wso2-config-volume/repository/deployment/server/webapps/admin/site/public/conf/settings.json
            name: wso2am-conf-admin-settings
            subPath: settings.json
          - mountPath: /home/wso2carbon/wso2-config-volume/repository/deployment/server/webapps/devportal/site/public/theme/settings.json
            name: wso2am-conf-devportal-settings
            subPath: settings.json
          - mountPath: /home/wso2carbon/wso2-config-volume/repository/deployment/server/webapps/publisher/site/public/conf/settings.json
            name: wso2am-conf-publisher-settings
            subPath: settings.json
        dnsPolicy: ClusterFirst
        restartPolicy: Always
        schedulerName: default-scheduler
        securityContext:
          seccompProfile:
            type: RuntimeDefault
        terminationGracePeriodSeconds: 30
        volumes:
        - configMap:
            defaultMode: 263
            name: apptest-cjbnvn9r-acp-conf-1
          name: wso2am-control-plane-conf
        - configMap:
            defaultMode: 263
            name: apptest-cjbnvn9r-acp-conf-entrypoint
          name: wso2am-control-plane-entrypoint
        - configMap:
            defaultMode: 263
            name: apptest-cjbnvn9r-acp-conf-log4j2
          name: wso2am-control-plane-log4j2
        - configMap:
            defaultMode: 263
            name: apptest-cjbnvn9r-acp-conf-admin-settings
          name: wso2am-conf-admin-settings
        - configMap:
            defaultMode: 263
            name: apptest-cjbnvn9r-acp-conf-devportal-settings
          name: wso2am-conf-devportal-settings
        - configMap:
            defaultMode: 263
            name: apptest-cjbnvn9r-acp-conf-publisher-settings
          name: wso2am-conf-publisher-settings
  status:
    conditions:
    - lastTransitionTime: "2025-12-02T09:45:28Z"
      lastUpdateTime: "2025-12-02T09:45:28Z"
      message: Deployment does not have minimum availability.
      reason: MinimumReplicasUnavailable
      status: "False"
      type: Available
    - lastTransitionTime: "2025-12-02T09:45:28Z"
      lastUpdateTime: "2025-12-02T09:45:28Z"
      message: ReplicaSet "apptest-cjbnvn9r-acp-deployment-1-57955fdcc4" is progressing.
      reason: ReplicaSetUpdated
      status: "True"
      type: Progressing
    observedGeneration: 1
    replicas: 1
    unavailableReplicas: 1
    updatedReplicas: 1
- apiVersion: apps/v1
  kind: Deployment
  metadata:
    annotations:
      deployment.kubernetes.io/revision: "1"
      kubectl.kubernetes.io/last-applied-configuration: |
        {"apiVersion":"apps/v1","kind":"Deployment","metadata":{"annotations":{},"labels":{"app.kubernetes.io/name":"apptest-cjbnvn9r"},"name":"apptest-cjbnvn9r-wso2-apk-adapter-deployment","namespace":"apptest-cjbnvn9r","ownerReferences":[{"apiVersion":"app.k8s.io/v1beta1","blockOwnerDeletion":true,"kind":"Application","name":"apptest-cjbnvn9r","uid":"69b7b8be-e784-4125-bcec-88e5f1f3ef36"}]},"spec":{"replicas":1,"selector":{"matchLabels":{"app.kubernetes.io/app":"adapter","app.kubernetes.io/release":"apptest-cjbnvn9r"}},"strategy":{"type":"RollingUpdate"},"template":{"metadata":{"annotations":{"checksum/config":"18fd8554c652c099ae03055089c498ad1bd3845c0d82adc502056aebb34c5332"},"labels":{"app.kubernetes.io/app":"adapter","app.kubernetes.io/release":"apptest-cjbnvn9r"}},"spec":{"affinity":{"podAntiAffinity":{"preferredDuringSchedulingIgnoredDuringExecution":[{"podAffinityTerm":{"labelSelector":{"matchExpressions":[{"key":"app.kubernetes.io/app","operator":"In","values":["adapter"]}]},"topologyKey":"topology.kubernetes.io/zone"},"weight":100}]}},"containers":[{"env":[{"name":"OPERATOR_POD_NAMESPACE","valueFrom":{"fieldRef":{"fieldPath":"metadata.namespace"}}},{"name":"ADAPTER_PRIVATE_KEY_PATH","value":"/home/wso2/security/keystore/adapter.key"},{"name":"ADAPTER_PUBLIC_CERT_PATH","value":"/home/wso2/security/keystore/adapter.crt"},{"name":"ADAPTER_SERVER_NAME","value":"apptest-cjbnvn9r-wso2-apk-adapter-service.apptest-cjbnvn9r.svc"}],"image":"us-docker.pkg.dev/wso2-marketplace-public/wso2-marketplace/apk-adapter:4.5","imagePullPolicy":"Always","livenessProbe":{"exec":{"command":["sh","check_health.sh"]},"failureThreshold":5,"initialDelaySeconds":20,"periodSeconds":20},"name":"adapter","ports":[{"containerPort":18000,"protocol":"TCP"},{"containerPort":8765,"protocol":"TCP"},{"containerPort":18005,"protocol":"TCP"}],"readinessProbe":{"exec":{"command":["sh","check_health.sh"]},"failureThreshold":5,"initialDelaySeconds":20,"periodSeconds":20},"resources":{"limits":{"cpu":"200m","memory":"128Mi"},"requests":{"cpu":"50m","memory":"64Mi"}},"securityContext":{"allowPrivilegeEscalation":false,"capabilities":{"drop":["ALL"]},"readOnlyRootFilesystem":true},"volumeMounts":[{"mountPath":"/home/wso2/security/keystore/adapter.key","name":"adapter-keystore-secret-volume","subPath":"tls.key"},{"mountPath":"/home/wso2/security/keystore/adapter.crt","name":"adapter-keystore-secret-volume","subPath":"tls.crt"},{"mountPath":"/home/wso2/security/truststore/adapter-ca.crt","name":"adapter-keystore-secret-volume","subPath":"ca.crt"},{"mountPath":"/home/wso2/security/truststore/router.crt","name":"router-truststore-secret-volume","subPath":"tls.crt"},{"mountPath":"/home/wso2/security/truststore/enforcer.crt","name":"enforcer-truststore-secret-volume","subPath":"tls.crt"},{"mountPath":"/home/wso2/security/truststore/consul","name":"adapter-truststore-consul-secret-volume"},{"mountPath":"/home/wso2/conf/","name":"log-conf-volume"},{"mountPath":"/home/wso2/security/truststore/wso2-apim-carbon.pem","name":"enforcer-apikey-cert","subPath":"wso2-apim-carbon.pem"}]}],"securityContext":{"runAsNonRoot":true,"seccompProfile":{"type":"RuntimeDefault"}},"serviceAccountName":"wso2apk-platform","volumes":[{"name":"adapter-keystore-secret-volume","secret":{"defaultMode":420,"secretName":"apptest-cjbnvn9r-wso2-apk-adapter-server-cert"}},{"name":"adapter-truststore-consul-secret-volume","secret":{"secretName":"apptest-cjbnvn9r-wso2-apk-adapter-truststore-consul-secret"}},{"configMap":{"name":"apptest-cjbnvn9r-wso2-apk-log-conf"},"name":"log-conf-volume"},{"name":"router-truststore-secret-volume","secret":null},{"name":"enforcer-truststore-secret-volume","secret":{"secretName":"apptest-cjbnvn9r-wso2-apk-enforcer-server-cert"}},{"name":"enforcer-apikey-cert","secret":{"secretName":"apptest-cjbnvn9r-wso2-apk-enforcer-truststore-secret"}}]}}}}
    creationTimestamp: "2025-12-02T09:45:28Z"
    generation: 1
    labels:
      app.kubernetes.io/name: apptest-cjbnvn9r
    name: apptest-cjbnvn9r-wso2-apk-adapter-deployment
    namespace: apptest-cjbnvn9r
    ownerReferences:
    - apiVersion: app.k8s.io/v1beta1
      blockOwnerDeletion: true
      kind: Application
      name: apptest-cjbnvn9r
      uid: 69b7b8be-e784-4125-bcec-88e5f1f3ef36
    resourceVersion: "1764668728923983013"
    uid: b4321570-c72e-4143-85ad-9ebb0ae00d33
  spec:
    progressDeadlineSeconds: 600
    replicas: 1
    revisionHistoryLimit: 10
    selector:
      matchLabels:
        app.kubernetes.io/app: adapter
        app.kubernetes.io/release: apptest-cjbnvn9r
    strategy:
      rollingUpdate:
        maxSurge: 25%
        maxUnavailable: 25%
      type: RollingUpdate
    template:
      metadata:
        annotations:
          checksum/config: 18fd8554c652c099ae03055089c498ad1bd3845c0d82adc502056aebb34c5332
        creationTimestamp: null
        labels:
          app.kubernetes.io/app: adapter
          app.kubernetes.io/release: apptest-cjbnvn9r
      spec:
        affinity:
          podAntiAffinity:
            preferredDuringSchedulingIgnoredDuringExecution:
            - podAffinityTerm:
                labelSelector:
                  matchExpressions:
                  - key: app.kubernetes.io/app
                    operator: In
                    values:
                    - adapter
                topologyKey: topology.kubernetes.io/zone
              weight: 100
        containers:
        - env:
          - name: OPERATOR_POD_NAMESPACE
            valueFrom:
              fieldRef:
                apiVersion: v1
                fieldPath: metadata.namespace
          - name: ADAPTER_PRIVATE_KEY_PATH
            value: /home/wso2/security/keystore/adapter.key
          - name: ADAPTER_PUBLIC_CERT_PATH
            value: /home/wso2/security/keystore/adapter.crt
          - name: ADAPTER_SERVER_NAME
            value: apptest-cjbnvn9r-wso2-apk-adapter-service.apptest-cjbnvn9r.svc
          image: us-docker.pkg.dev/wso2-marketplace-public/wso2-marketplace/apk-adapter:4.5
          imagePullPolicy: Always
          livenessProbe:
            exec:
              command:
              - sh
              - check_health.sh
            failureThreshold: 5
            initialDelaySeconds: 20
            periodSeconds: 20
            successThreshold: 1
            timeoutSeconds: 1
          name: adapter
          ports:
          - containerPort: 18000
            protocol: TCP
          - containerPort: 8765
            protocol: TCP
          - containerPort: 18005
            protocol: TCP
          readinessProbe:
            exec:
              command:
              - sh
              - check_health.sh
            failureThreshold: 5
            initialDelaySeconds: 20
            periodSeconds: 20
            successThreshold: 1
            timeoutSeconds: 1
          resources:
            limits:
              cpu: 200m
              memory: 128Mi
            requests:
              cpu: 50m
              memory: 64Mi
          securityContext:
            allowPrivilegeEscalation: false
            capabilities:
              drop:
              - ALL
            readOnlyRootFilesystem: true
          terminationMessagePath: /dev/termination-log
          terminationMessagePolicy: File
          volumeMounts:
          - mountPath: /home/wso2/security/keystore/adapter.key
            name: adapter-keystore-secret-volume
            subPath: tls.key
          - mountPath: /home/wso2/security/keystore/adapter.crt
            name: adapter-keystore-secret-volume
            subPath: tls.crt
          - mountPath: /home/wso2/security/truststore/adapter-ca.crt
            name: adapter-keystore-secret-volume
            subPath: ca.crt
          - mountPath: /home/wso2/security/truststore/router.crt
            name: router-truststore-secret-volume
            subPath: tls.crt
          - mountPath: /home/wso2/security/truststore/enforcer.crt
            name: enforcer-truststore-secret-volume
            subPath: tls.crt
          - mountPath: /home/wso2/security/truststore/consul
            name: adapter-truststore-consul-secret-volume
          - mountPath: /home/wso2/conf/
            name: log-conf-volume
          - mountPath: /home/wso2/security/truststore/wso2-apim-carbon.pem
            name: enforcer-apikey-cert
            subPath: wso2-apim-carbon.pem
        dnsPolicy: ClusterFirst
        restartPolicy: Always
        schedulerName: default-scheduler
        securityContext:
          runAsNonRoot: true
          seccompProfile:
            type: RuntimeDefault
        serviceAccount: wso2apk-platform
        serviceAccountName: wso2apk-platform
        terminationGracePeriodSeconds: 30
        volumes:
        - name: adapter-keystore-secret-volume
          secret:
            defaultMode: 420
            secretName: apptest-cjbnvn9r-wso2-apk-adapter-server-cert
        - name: adapter-truststore-consul-secret-volume
          secret:
            defaultMode: 420
            secretName: apptest-cjbnvn9r-wso2-apk-adapter-truststore-consul-secret
        - configMap:
            defaultMode: 420
            name: apptest-cjbnvn9r-wso2-apk-log-conf
          name: log-conf-volume
        - emptyDir: {}
          name: router-truststore-secret-volume
        - name: enforcer-truststore-secret-volume
          secret:
            defaultMode: 420
            secretName: apptest-cjbnvn9r-wso2-apk-enforcer-server-cert
        - name: enforcer-apikey-cert
          secret:
            defaultMode: 420
            secretName: apptest-cjbnvn9r-wso2-apk-enforcer-truststore-secret
  status:
    conditions:
    - lastTransitionTime: "2025-12-02T09:45:28Z"
      lastUpdateTime: "2025-12-02T09:45:28Z"
      message: Deployment does not have minimum availability.
      reason: MinimumReplicasUnavailable
      status: "False"
      type: Available
    - lastTransitionTime: "2025-12-02T09:45:28Z"
      lastUpdateTime: "2025-12-02T09:45:28Z"
      message: ReplicaSet "apptest-cjbnvn9r-wso2-apk-adapter-deployment-b599d79c6"
        is progressing.
      reason: ReplicaSetUpdated
      status: "True"
      type: Progressing
    observedGeneration: 1
    replicas: 1
    unavailableReplicas: 1
    updatedReplicas: 1
- apiVersion: apps/v1
  kind: Deployment
  metadata:
    annotations:
      deployment.kubernetes.io/revision: "1"
      kubectl.kubernetes.io/last-applied-configuration: |
        {"apiVersion":"apps/v1","kind":"Deployment","metadata":{"annotations":{},"labels":{"app.kubernetes.io/name":"apptest-cjbnvn9r"},"name":"apptest-cjbnvn9r-wso2-apk-common-controller-deployment","namespace":"apptest-cjbnvn9r","ownerReferences":[{"apiVersion":"app.k8s.io/v1beta1","blockOwnerDeletion":true,"kind":"Application","name":"apptest-cjbnvn9r","uid":"69b7b8be-e784-4125-bcec-88e5f1f3ef36"}]},"spec":{"replicas":1,"selector":{"matchLabels":{"app.kubernetes.io/app":"commoncontroller","app.kubernetes.io/release":"apptest-cjbnvn9r"}},"strategy":{"type":"RollingUpdate"},"template":{"metadata":{"annotations":{"checksum/config":"4f5df4b548f725c558fd44def3c42dd668a147a662999bf2ce2b85a33f035e03"},"labels":{"app.kubernetes.io/app":"commoncontroller","app.kubernetes.io/release":"apptest-cjbnvn9r"}},"spec":{"affinity":{"podAntiAffinity":{"preferredDuringSchedulingIgnoredDuringExecution":[{"podAffinityTerm":{"labelSelector":{"matchExpressions":[{"key":"app.kubernetes.io/app","operator":"In","values":["common-controller"]}]},"topologyKey":"topology.kubernetes.io/zone"},"weight":100}]}},"containers":[{"env":[{"name":"OPERATOR_POD_NAMESPACE","valueFrom":{"fieldRef":{"fieldPath":"metadata.namespace"}}},{"name":"COMMON_CONTROLLER_PRIVATE_KEY_PATH","value":"/home/wso2/security/keystore/commoncontroller.key"},{"name":"COMMON_CONTROLLER_PUBLIC_CERT_PATH","value":"/home/wso2/security/keystore/commoncontroller.crt"},{"name":"COMMON_CONTROLLER_SERVER_NAME","value":"apptest-cjbnvn9r-wso2-apk-common-controller-service.apptest-cjbnvn9r.svc"}],"image":"us-docker.pkg.dev/wso2-marketplace-public/wso2-marketplace/apk-common-controller:4.5","imagePullPolicy":"Always","livenessProbe":{"exec":{"command":["sh","check_health.sh"]},"failureThreshold":5,"initialDelaySeconds":20,"periodSeconds":20},"name":"commoncontroller","ports":[{"containerPort":18005,"protocol":"TCP"},{"containerPort":18002,"protocol":"TCP"},{"containerPort":9543,"protocol":"TCP"},{"containerPort":18003,"protocol":"TCP"}],"readinessProbe":{"exec":{"command":["sh","check_health.sh"]},"failureThreshold":5,"initialDelaySeconds":20,"periodSeconds":20},"resources":{"limits":{"cpu":"200m","memory":"128Mi"},"requests":{"cpu":"50m","memory":"64Mi"}},"securityContext":{"allowPrivilegeEscalation":false,"capabilities":{"drop":["ALL"]},"readOnlyRootFilesystem":true},"volumeMounts":[{"mountPath":"/home/wso2/security/keystore/commoncontroller.key","name":"common-controller-keystore-secret-volume","subPath":"tls.key"},{"mountPath":"/home/wso2/security/keystore/commoncontroller.crt","name":"common-controller-keystore-secret-volume","subPath":"tls.crt"},{"mountPath":"/home/wso2/security/truststore/adapter-ca.crt","name":"common-controller-keystore-secret-volume","subPath":"ca.crt"},{"mountPath":"/home/wso2/security/truststore/ratelimiter.crt","name":"ratelimiter-truststore-secret-volume","subPath":"tls.crt"},{"mountPath":"/home/wso2/security/truststore/ca-ratelimiter.crt","name":"ratelimiter-truststore-secret-volume","subPath":"ca.crt"},{"mountPath":"/home/wso2/conf/","name":"log-conf-volume"},{"mountPath":"/tmp/k8s-webhook-server/serving-certs","name":"adapter-webhook-server-cert","readOnly":true},{"mountPath":"/home/wso2/security/sts/","name":"sts-shared-auth-key","readOnly":true}]}],"securityContext":{"runAsNonRoot":true,"seccompProfile":{"type":"RuntimeDefault"}},"serviceAccountName":"wso2apk-platform","volumes":[{"name":"common-controller-keystore-secret-volume","secret":{"defaultMode":420,"secretName":"apptest-cjbnvn9r-wso2-apk-common-controller-server-cert"}},{"configMap":{"name":"apptest-cjbnvn9r-wso2-apk-common-log-conf"},"name":"log-conf-volume"},{"name":"adapter-webhook-server-cert","secret":{"defaultMode":420,"secretName":"apptest-cjbnvn9r-wso2-apk-webhook-server-cert"}},{"name":"sts-shared-auth-key","secret":{"defaultMode":420,"secretName":"apptest-cjbnvn9r-wso2-apk-sts-shared-auth-key"}},{"name":"ratelimiter-truststore-secret-volume","secret":{"secretName":"apptest-cjbnvn9r-wso2-apk-ratelimiter-server-cert"}}]}}}}
    creationTimestamp: "2025-12-02T09:45:28Z"
    generation: 1
    labels:
      app.kubernetes.io/name: apptest-cjbnvn9r
    name: apptest-cjbnvn9r-wso2-apk-common-controller-deployment
    namespace: apptest-cjbnvn9r
    ownerReferences:
    - apiVersion: app.k8s.io/v1beta1
      blockOwnerDeletion: true
      kind: Application
      name: apptest-cjbnvn9r
      uid: 69b7b8be-e784-4125-bcec-88e5f1f3ef36
    resourceVersion: "1764668729017407006"
    uid: d833663c-8eeb-4b93-9f78-fa89c4323dec
  spec:
    progressDeadlineSeconds: 600
    replicas: 1
    revisionHistoryLimit: 10
    selector:
      matchLabels:
        app.kubernetes.io/app: commoncontroller
        app.kubernetes.io/release: apptest-cjbnvn9r
    strategy:
      rollingUpdate:
        maxSurge: 25%
        maxUnavailable: 25%
      type: RollingUpdate
    template:
      metadata:
        annotations:
          checksum/config: 4f5df4b548f725c558fd44def3c42dd668a147a662999bf2ce2b85a33f035e03
        creationTimestamp: null
        labels:
          app.kubernetes.io/app: commoncontroller
          app.kubernetes.io/release: apptest-cjbnvn9r
      spec:
        affinity:
          podAntiAffinity:
            preferredDuringSchedulingIgnoredDuringExecution:
            - podAffinityTerm:
                labelSelector:
                  matchExpressions:
                  - key: app.kubernetes.io/app
                    operator: In
                    values:
                    - common-controller
                topologyKey: topology.kubernetes.io/zone
              weight: 100
        containers:
        - env:
          - name: OPERATOR_POD_NAMESPACE
            valueFrom:
              fieldRef:
                apiVersion: v1
                fieldPath: metadata.namespace
          - name: COMMON_CONTROLLER_PRIVATE_KEY_PATH
            value: /home/wso2/security/keystore/commoncontroller.key
          - name: COMMON_CONTROLLER_PUBLIC_CERT_PATH
            value: /home/wso2/security/keystore/commoncontroller.crt
          - name: COMMON_CONTROLLER_SERVER_NAME
            value: apptest-cjbnvn9r-wso2-apk-common-controller-service.apptest-cjbnvn9r.svc
          image: us-docker.pkg.dev/wso2-marketplace-public/wso2-marketplace/apk-common-controller:4.5
          imagePullPolicy: Always
          livenessProbe:
            exec:
              command:
              - sh
              - check_health.sh
            failureThreshold: 5
            initialDelaySeconds: 20
            periodSeconds: 20
            successThreshold: 1
            timeoutSeconds: 1
          name: commoncontroller
          ports:
          - containerPort: 18005
            protocol: TCP
          - containerPort: 18002
            protocol: TCP
          - containerPort: 9543
            protocol: TCP
          - containerPort: 18003
            protocol: TCP
          readinessProbe:
            exec:
              command:
              - sh
              - check_health.sh
            failureThreshold: 5
            initialDelaySeconds: 20
            periodSeconds: 20
            successThreshold: 1
            timeoutSeconds: 1
          resources:
            limits:
              cpu: 200m
              memory: 128Mi
            requests:
              cpu: 50m
              memory: 64Mi
          securityContext:
            allowPrivilegeEscalation: false
            capabilities:
              drop:
              - ALL
            readOnlyRootFilesystem: true
          terminationMessagePath: /dev/termination-log
          terminationMessagePolicy: File
          volumeMounts:
          - mountPath: /home/wso2/security/keystore/commoncontroller.key
            name: common-controller-keystore-secret-volume
            subPath: tls.key
          - mountPath: /home/wso2/security/keystore/commoncontroller.crt
            name: common-controller-keystore-secret-volume
            subPath: tls.crt
          - mountPath: /home/wso2/security/truststore/adapter-ca.crt
            name: common-controller-keystore-secret-volume
            subPath: ca.crt
          - mountPath: /home/wso2/security/truststore/ratelimiter.crt
            name: ratelimiter-truststore-secret-volume
            subPath: tls.crt
          - mountPath: /home/wso2/security/truststore/ca-ratelimiter.crt
            name: ratelimiter-truststore-secret-volume
            subPath: ca.crt
          - mountPath: /home/wso2/conf/
            name: log-conf-volume
          - mountPath: /tmp/k8s-webhook-server/serving-certs
            name: adapter-webhook-server-cert
            readOnly: true
          - mountPath: /home/wso2/security/sts/
            name: sts-shared-auth-key
            readOnly: true
        dnsPolicy: ClusterFirst
        restartPolicy: Always
        schedulerName: default-scheduler
        securityContext:
          runAsNonRoot: true
          seccompProfile:
            type: RuntimeDefault
        serviceAccount: wso2apk-platform
        serviceAccountName: wso2apk-platform
        terminationGracePeriodSeconds: 30
        volumes:
        - name: common-controller-keystore-secret-volume
          secret:
            defaultMode: 420
            secretName: apptest-cjbnvn9r-wso2-apk-common-controller-server-cert
        - configMap:
            defaultMode: 420
            name: apptest-cjbnvn9r-wso2-apk-common-log-conf
          name: log-conf-volume
        - name: adapter-webhook-server-cert
          secret:
            defaultMode: 420
            secretName: apptest-cjbnvn9r-wso2-apk-webhook-server-cert
        - name: sts-shared-auth-key
          secret:
            defaultMode: 420
            secretName: apptest-cjbnvn9r-wso2-apk-sts-shared-auth-key
        - name: ratelimiter-truststore-secret-volume
          secret:
            defaultMode: 420
            secretName: apptest-cjbnvn9r-wso2-apk-ratelimiter-server-cert
  status:
    conditions:
    - lastTransitionTime: "2025-12-02T09:45:28Z"
      lastUpdateTime: "2025-12-02T09:45:28Z"
      message: Deployment does not have minimum availability.
      reason: MinimumReplicasUnavailable
      status: "False"
      type: Available
    - lastTransitionTime: "2025-12-02T09:45:28Z"
      lastUpdateTime: "2025-12-02T09:45:28Z"
      message: ReplicaSet "apptest-cjbnvn9r-wso2-apk-common-controller-deployment-7b5d596d46"
        is progressing.
      reason: ReplicaSetUpdated
      status: "True"
      type: Progressing
    observedGeneration: 1
    replicas: 1
    unavailableReplicas: 1
    updatedReplicas: 1
- apiVersion: apps/v1
  kind: Deployment
  metadata:
    annotations:
      deployment.kubernetes.io/revision: "1"
      kubectl.kubernetes.io/last-applied-configuration: |
        {"apiVersion":"apps/v1","kind":"Deployment","metadata":{"annotations":{},"labels":{"app.kubernetes.io/name":"apptest-cjbnvn9r"},"name":"apptest-cjbnvn9r-wso2-apk-config-ds-deployment","namespace":"apptest-cjbnvn9r","ownerReferences":[{"apiVersion":"app.k8s.io/v1beta1","blockOwnerDeletion":true,"kind":"Application","name":"apptest-cjbnvn9r","uid":"69b7b8be-e784-4125-bcec-88e5f1f3ef36"}]},"spec":{"replicas":1,"selector":{"matchLabels":{"app.kubernetes.io/app":"configdeployer-ds","app.kubernetes.io/release":"apptest-cjbnvn9r"}},"strategy":{"type":"RollingUpdate"},"template":{"metadata":{"annotations":{"checksum/config":"c8e1a5408c7255145e9248da4e4c6e5f383c543a9db43e06662d4fccc2b73614"},"labels":{"app.kubernetes.io/app":"configdeployer-ds","app.kubernetes.io/release":"apptest-cjbnvn9r"}},"spec":{"affinity":{"podAntiAffinity":{"preferredDuringSchedulingIgnoredDuringExecution":[{"podAffinityTerm":{"labelSelector":{"matchExpressions":[{"key":"app.kubernetes.io/app","operator":"In","values":["config-ds"]}]},"topologyKey":"topology.kubernetes.io/zone"},"weight":100}]}},"containers":[{"env":null,"image":"us-docker.pkg.dev/wso2-marketplace-public/wso2-marketplace/apk-config-deployer-service:4.5","imagePullPolicy":"Always","livenessProbe":{"httpGet":{"path":"/health","port":9443,"scheme":"HTTPS"},"initialDelaySeconds":20,"periodSeconds":20},"name":"config-ds","ports":[{"containerPort":9443,"protocol":"TCP"}],"readinessProbe":{"httpGet":{"path":"/health","port":9443,"scheme":"HTTPS"},"initialDelaySeconds":20,"periodSeconds":20},"resources":{"limits":{"cpu":"500m","memory":"1024Mi"},"requests":{"cpu":"200m","memory":"512Mi"}},"securityContext":{"allowPrivilegeEscalation":false,"capabilities":{"drop":["ALL"]},"readOnlyRootFilesystem":true},"volumeMounts":[{"mountPath":"/home/wso2apk/config-deployer/conf/Config.toml","name":"config-toml-volume","subPath":"Config.toml"},{"mountPath":"/home/wso2apk/config-deployer/security/config.key","name":"config-ds-tls-volume","subPath":"tls.key"},{"mountPath":"/home/wso2apk/config-deployer/security/config.pem","name":"config-ds-tls-volume","subPath":"tls.crt"},{"mountPath":"/home/wso2apk/config-deployer/security/mg.pem","name":"enforcer-jwt-secret-volume","subPath":"mg.pem"},{"mountPath":"/tmp","name":"tmp"},{"mountPath":"/home/wso2apk/config-deployer/tmp","name":"config-deployer-temp"}]}],"securityContext":{"runAsNonRoot":true,"seccompProfile":{"type":"RuntimeDefault"}},"serviceAccountName":"wso2apk-platform","volumes":[{"configMap":{"name":"apptest-cjbnvn9r-wso2-apk-config-ds-configmap"},"name":"config-toml-volume"},{"name":"config-ds-tls-volume","secret":{"secretName":"apptest-cjbnvn9r-wso2-apk-config-ds-server-cert"}},{"name":"enforcer-jwt-secret-volume","secret":{"secretName":"apptest-cjbnvn9r-wso2-apk-enforcer-keystore-secret"}},{"emptyDir":{},"name":"tmp"},{"emptyDir":{},"name":"config-deployer-temp"}]}}}}
    creationTimestamp: "2025-12-02T09:45:28Z"
    generation: 1
    labels:
      app.kubernetes.io/name: apptest-cjbnvn9r
    name: apptest-cjbnvn9r-wso2-apk-config-ds-deployment
    namespace: apptest-cjbnvn9r
    ownerReferences:
    - apiVersion: app.k8s.io/v1beta1
      blockOwnerDeletion: true
      kind: Application
      name: apptest-cjbnvn9r
      uid: 69b7b8be-e784-4125-bcec-88e5f1f3ef36
    resourceVersion: "1764668728872895006"
    uid: da335cac-957f-4cbf-82db-1e0c402ea9cd
  spec:
    progressDeadlineSeconds: 600
    replicas: 1
    revisionHistoryLimit: 10
    selector:
      matchLabels:
        app.kubernetes.io/app: configdeployer-ds
        app.kubernetes.io/release: apptest-cjbnvn9r
    strategy:
      rollingUpdate:
        maxSurge: 25%
        maxUnavailable: 25%
      type: RollingUpdate
    template:
      metadata:
        annotations:
          checksum/config: c8e1a5408c7255145e9248da4e4c6e5f383c543a9db43e06662d4fccc2b73614
        creationTimestamp: null
        labels:
          app.kubernetes.io/app: configdeployer-ds
          app.kubernetes.io/release: apptest-cjbnvn9r
      spec:
        affinity:
          podAntiAffinity:
            preferredDuringSchedulingIgnoredDuringExecution:
            - podAffinityTerm:
                labelSelector:
                  matchExpressions:
                  - key: app.kubernetes.io/app
                    operator: In
                    values:
                    - config-ds
                topologyKey: topology.kubernetes.io/zone
              weight: 100
        containers:
        - image: us-docker.pkg.dev/wso2-marketplace-public/wso2-marketplace/apk-config-deployer-service:4.5
          imagePullPolicy: Always
          livenessProbe:
            failureThreshold: 3
            httpGet:
              path: /health
              port: 9443
              scheme: HTTPS
            initialDelaySeconds: 20
            periodSeconds: 20
            successThreshold: 1
            timeoutSeconds: 1
          name: config-ds
          ports:
          - containerPort: 9443
            protocol: TCP
          readinessProbe:
            failureThreshold: 3
            httpGet:
              path: /health
              port: 9443
              scheme: HTTPS
            initialDelaySeconds: 20
            periodSeconds: 20
            successThreshold: 1
            timeoutSeconds: 1
          resources:
            limits:
              cpu: 500m
              memory: 1Gi
            requests:
              cpu: 200m
              memory: 512Mi
          securityContext:
            allowPrivilegeEscalation: false
            capabilities:
              drop:
              - ALL
            readOnlyRootFilesystem: true
          terminationMessagePath: /dev/termination-log
          terminationMessagePolicy: File
          volumeMounts:
          - mountPath: /home/wso2apk/config-deployer/conf/Config.toml
            name: config-toml-volume
            subPath: Config.toml
          - mountPath: /home/wso2apk/config-deployer/security/config.key
            name: config-ds-tls-volume
            subPath: tls.key
          - mountPath: /home/wso2apk/config-deployer/security/config.pem
            name: config-ds-tls-volume
            subPath: tls.crt
          - mountPath: /home/wso2apk/config-deployer/security/mg.pem
            name: enforcer-jwt-secret-volume
            subPath: mg.pem
          - mountPath: /tmp
            name: tmp
          - mountPath: /home/wso2apk/config-deployer/tmp
            name: config-deployer-temp
        dnsPolicy: ClusterFirst
        restartPolicy: Always
        schedulerName: default-scheduler
        securityContext:
          runAsNonRoot: true
          seccompProfile:
            type: RuntimeDefault
        serviceAccount: wso2apk-platform
        serviceAccountName: wso2apk-platform
        terminationGracePeriodSeconds: 30
        volumes:
        - configMap:
            defaultMode: 420
            name: apptest-cjbnvn9r-wso2-apk-config-ds-configmap
          name: config-toml-volume
        - name: config-ds-tls-volume
          secret:
            defaultMode: 420
            secretName: apptest-cjbnvn9r-wso2-apk-config-ds-server-cert
        - name: enforcer-jwt-secret-volume
          secret:
            defaultMode: 420
            secretName: apptest-cjbnvn9r-wso2-apk-enforcer-keystore-secret
        - emptyDir: {}
          name: tmp
        - emptyDir: {}
          name: config-deployer-temp
  status:
    conditions:
    - lastTransitionTime: "2025-12-02T09:45:28Z"
      lastUpdateTime: "2025-12-02T09:45:28Z"
      message: Deployment does not have minimum availability.
      reason: MinimumReplicasUnavailable
      status: "False"
      type: Available
    - lastTransitionTime: "2025-12-02T09:45:28Z"
      lastUpdateTime: "2025-12-02T09:45:28Z"
      message: ReplicaSet "apptest-cjbnvn9r-wso2-apk-config-ds-deployment-76f6fc7b79"
        is progressing.
      reason: ReplicaSetUpdated
      status: "True"
      type: Progressing
    observedGeneration: 1
    replicas: 1
    unavailableReplicas: 1
    updatedReplicas: 1
- apiVersion: apps/v1
  kind: Deployment
  metadata:
    annotations:
      deployment.kubernetes.io/revision: "1"
      kubectl.kubernetes.io/last-applied-configuration: |
        {"apiVersion":"apps/v1","kind":"Deployment","metadata":{"annotations":{},"labels":{"app.kubernetes.io/name":"apptest-cjbnvn9r"},"name":"apptest-cjbnvn9r-wso2-apk-gateway-runtime-deployment","namespace":"apptest-cjbnvn9r","ownerReferences":[{"apiVersion":"app.k8s.io/v1beta1","blockOwnerDeletion":true,"kind":"Application","name":"apptest-cjbnvn9r","uid":"69b7b8be-e784-4125-bcec-88e5f1f3ef36"}]},"spec":{"replicas":1,"selector":{"matchLabels":{"app.kubernetes.io/app":"gateway","app.kubernetes.io/release":"apptest-cjbnvn9r"}},"strategy":{"type":null},"template":{"metadata":{"annotations":{"checksum/config":"18fd8554c652c099ae03055089c498ad1bd3845c0d82adc502056aebb34c5332"},"labels":{"app.kubernetes.io/app":"gateway","app.kubernetes.io/release":"apptest-cjbnvn9r"}},"spec":{"affinity":{"podAntiAffinity":{"preferredDuringSchedulingIgnoredDuringExecution":[{"podAffinityTerm":{"labelSelector":{"matchExpressions":[{"key":"app.kubernetes.io/app","operator":"In","values":["gateway-runtime"]}]},"topologyKey":"topology.kubernetes.io/zone"},"weight":100}]}},"automountServiceAccountToken":false,"containers":[{"env":[{"name":"TOKEN_REVOCATION_ENABLED","value":"true"},{"name":"ADAPTER_HOST_NAME","value":"apptest-cjbnvn9r-wso2-apk-adapter-service.apptest-cjbnvn9r.svc"},{"name":"ADAPTER_HOST","value":"apptest-cjbnvn9r-wso2-apk-adapter-service.apptest-cjbnvn9r.svc"},{"name":"COMMON_CONTROLLER_HOST_NAME","value":"apptest-cjbnvn9r-wso2-apk-common-controller-service.apptest-cjbnvn9r.svc"},{"name":"COMMON_CONTROLLER_HOST","value":"apptest-cjbnvn9r-wso2-apk-common-controller-service.apptest-cjbnvn9r.svc"},{"name":"RATELIMITER_HOST","value":"apptest-cjbnvn9r-wso2-apk-ratelimiter-service.apptest-cjbnvn9r.svc"},{"name":"ENFORCER_PRIVATE_KEY_PATH","value":"/home/wso2/security/keystore/enforcer.key"},{"name":"ENFORCER_PUBLIC_CERT_PATH","value":"/home/wso2/security/keystore/enforcer.crt"},{"name":"ENFORCER_SERVER_NAME","value":"apptest-cjbnvn9r-wso2-apk-enforcer-service.apptest-cjbnvn9r.svc"},{"name":"TRUSTED_CA_CERTS_PATH","value":"/home/wso2/security/truststore"},{"name":"ADAPTER_XDS_PORT","value":"18000"},{"name":"RATELIMITER_PORT","value":"8091"},{"name":"COMMON_CONTROLLER_XDS_PORT","value":"18002"},{"name":"COMMON_CONTROLLER_REST_PORT","value":"18003"},{"name":"ENFORCER_LABEL","value":"wso2-apk-default"},{"name":"ENFORCER_REGION","value":"UNKNOWN"},{"name":"XDS_MAX_MSG_SIZE","value":"4194304"},{"name":"XDS_MAX_RETRIES","value":"3"},{"name":"enforcer_admin_pwd","value":"admin"},{"name":"REDIS_USERNAME","value":"default"},{"name":"REDIS_PASSWORD","value":""},{"name":"REDIS_HOST","value":"redis-master"},{"name":"REDIS_PORT","value":"6379"},{"name":"IS_REDIS_TLS_ENABLED","value":"false"},{"name":"REDIS_REVOKED_TOKENS_CHANNEL","value":"wso2-apk-revoked-tokens-channel"},{"name":"REDIS_KEY_FILE","value":"/home/wso2/security/truststore/enforcer.key"},{"name":"REDIS_CERT_FILE","value":"/home/wso2/security/truststore/enforcer.crt"},{"name":"REDIS_CA_CERT_FILE","value":"/home/wso2/security/truststore/enforcer.crt"},{"name":"REVOKED_TOKEN_CLEANUP_INTERVAL","value":"3600"}],"image":"us-docker.pkg.dev/wso2-marketplace-public/wso2-marketplace/apk-enforcer:4.5","imagePullPolicy":"Always","livenessProbe":{"exec":{"command":["sh","check_health.sh"]},"failureThreshold":5,"initialDelaySeconds":20,"periodSeconds":20},"name":"enforcer","ports":[{"containerPort":8081,"protocol":"TCP"},{"containerPort":9001,"protocol":"TCP"},{"containerPort":5006,"protocol":"TCP"},{"containerPort":8084,"protocol":"TCP"},{"containerPort":9092,"protocol":"TCP"},{"containerPort":18002,"protocol":"TCP"}],"readinessProbe":{"exec":{"command":["sh","check_health.sh"]},"failureThreshold":5,"initialDelaySeconds":20,"periodSeconds":20},"resources":{"limits":{"cpu":"500m","memory":"512Mi"},"requests":{"cpu":"200m","memory":"128Mi"}},"securityContext":{"allowPrivilegeEscalation":false,"capabilities":{"drop":["ALL"]},"readOnlyRootFilesystem":true,"runAsNonRoot":true},"volumeMounts":[{"mountPath":"/tmp","name":"tmp"},{"mountPath":"/home/wso2/security/keystore/enforcer.key","name":"enforcer-keystore-secret-volume","subPath":"tls.key"},{"mountPath":"/home/wso2/security/keystore/enforcer.crt","name":"enforcer-keystore-secret-volume","subPath":"tls.crt"},{"mountPath":"/home/wso2/security/truststore/apk.crt","name":"enforcer-keystore-secret-volume","subPath":"ca.crt"},{"mountPath":"/home/wso2/security/truststore/enforcer.crt","name":"enforcer-keystore-secret-volume","subPath":"tls.crt"},{"mountPath":"/home/wso2/security/truststore/adapter.crt","name":"adapter-truststore-secret-volume","subPath":"tls.crt"},{"mountPath":"/home/wso2/security/truststore/router.crt","name":"router-keystore-secret-volume","subPath":"tls.crt"},{"mountPath":"/home/wso2/conf/","name":"log-conf-volume"},{"mountPath":"/home/wso2/check_health.sh","name":"enforcer-health-check-volume","subPath":"check_health.sh"},{"mountPath":"/home/wso2/security/keystore/mg.pem","name":"enforcer-jwt-secret-volume","subPath":"mg.pem"},{"mountPath":"/home/wso2/security/truststore/mg.pem","name":"enforcer-jwt-secret-volume","subPath":"mg.pem"},{"mountPath":"/home/wso2/security/keystore/mg.key","name":"enforcer-jwt-secret-volume","subPath":"mg.key"},{"mountPath":"/home/wso2/security/truststore/wso2carbon.pem","name":"enforcer-trusted-certs","subPath":"wso2carbon.pem"},{"mountPath":"/home/wso2/security/truststore/wso2-apim-carbon.pem","name":"enforcer-apikey-cert","subPath":"wso2-apim-carbon.pem"},{"mountPath":"/home/wso2/security/truststore/idp.pem","name":"idp-certificate-secret-volume","subPath":"wso2carbon.pem"},{"mountPath":"/home/wso2/security/truststore/ratelimiter.crt","name":"ratelimiter-truststore-secret-volume","subPath":"tls.crt"},{"mountPath":"/home/wso2/security/truststore/ratelimiter-ca.crt","name":"ratelimiter-truststore-secret-volume","subPath":"ca.crt"}]},{"env":[{"name":"ADAPTER_HOST_NAME","value":"apptest-cjbnvn9r-wso2-apk-adapter-service.apptest-cjbnvn9r.svc"},{"name":"ADAPTER_HOST","value":"apptest-cjbnvn9r-wso2-apk-adapter-service.apptest-cjbnvn9r.svc"},{"name":"ENFORCER_HOST","value":"127.0.0.1"},{"name":"ENFORCER_ANALYTICS_HOST","value":"127.0.0.1"},{"name":"ROUTER_ADMIN_HOST","value":"0.0.0.0"},{"name":"ROUTER_ADMIN_PORT","value":"9000"},{"name":"ROUTER_PORT","value":"9095"},{"name":"ROUTER_CLUSTER","value":"apk_router_cluster"},{"name":"ROUTER_LABEL","value":"wso2-apk-default"},{"name":"ROUTER_PRIVATE_KEY_PATH","value":"/home/wso2/security/keystore/router.key"},{"name":"ROUTER_PUBLIC_CERT_PATH","value":"/home/wso2/security/keystore/router.crt"},{"name":"ADAPTER_PORT","value":"18000"},{"name":"ADAPTER_CA_CERT_PATH","value":"/home/wso2/security/truststore/adapter.crt"},{"name":"ENFORCER_PORT","value":"8081"},{"name":"ENFORCER_ANALYTICS_RECEIVER_PORT","value":"18090"},{"name":"ENFORCER_CA_CERT_PATH","value":"/home/wso2/security/truststore/enforcer.crt"},{"name":"CONCURRENCY","value":"2"}],"image":"us-docker.pkg.dev/wso2-marketplace-public/wso2-marketplace/apk-router:4.5","imagePullPolicy":"Always","livenessProbe":{"exec":{"command":["sh","router_check_health.sh","health"]},"failureThreshold":5,"initialDelaySeconds":20,"periodSeconds":20},"name":"router","ports":[{"containerPort":9095,"protocol":"TCP"},{"containerPort":9090,"protocol":"TCP"},{"containerPort":9091,"protocol":"TCP"},{"containerPort":9000,"protocol":"TCP"}],"readinessProbe":{"exec":{"command":["sh","router_check_health.sh","health"]},"failureThreshold":5,"initialDelaySeconds":20,"periodSeconds":20},"resources":{"limits":{"cpu":"1000m","memory":"1028Mi"},"requests":{"cpu":"200m","memory":"128Mi"}},"securityContext":{"allowPrivilegeEscalation":false,"capabilities":{"drop":["ALL"]},"readOnlyRootFilesystem":true,"runAsNonRoot":true},"startupProbe":{"exec":{"command":["sh","router_check_health.sh","health"]},"failureThreshold":5,"initialDelaySeconds":20,"periodSeconds":20},"volumeMounts":[{"mountPath":"/home/wso2/security/keystore/router.key","name":"router-keystore-secret-volume","subPath":"tls.key"},{"mountPath":"/home/wso2/security/keystore/router.crt","name":"router-keystore-secret-volume","subPath":"tls.crt"},{"mountPath":"/home/wso2/security/truststore/adapter.crt","name":"adapter-truststore-secret-volume","subPath":"tls.crt"},{"mountPath":"/home/wso2/security/truststore/enforcer.crt","name":"enforcer-keystore-secret-volume","subPath":"tls.crt"},{"mountPath":"/home/wso2/conf/","name":"log-conf-volume"},{"mountPath":"/home/wso2/security/truststore/ratelimiter.crt","name":"ratelimiter-truststore-secret-volume","subPath":"tls.crt"},{"mountPath":"/home/wso2/security/truststore/ratelimiter-ca.crt","name":"ratelimiter-truststore-secret-volume","subPath":"ca.crt"}]}],"securityContext":{"seccompProfile":{"type":"RuntimeDefault"}},"volumes":[{"name":"ratelimiter-truststore-secret-volume","secret":{"secretName":"apptest-cjbnvn9r-wso2-apk-ratelimiter-server-cert"}},{"name":"enforcer-keystore-secret-volume","secret":{"secretName":"apptest-cjbnvn9r-wso2-apk-enforcer-server-cert"}},{"configMap":{"name":"apptest-cjbnvn9r-wso2-apk-log-conf"},"name":"log-conf-volume"},{"configMap":{"name":"apptest-cjbnvn9r-wso2-apk-enforcer-grpc-probe-script-conf"},"name":"enforcer-health-check-volume"},{"name":"router-keystore-secret-volume","secret":{"secretName":"apptest-cjbnvn9r-wso2-apk-gateway-server-cert"}},{"name":"adapter-truststore-secret-volume","secret":{"secretName":"apptest-cjbnvn9r-wso2-apk-adapter-server-cert"}},{"name":"enforcer-jwt-secret-volume","secret":{"secretName":"apptest-cjbnvn9r-wso2-apk-enforcer-keystore-secret"}},{"name":"enforcer-trusted-certs","secret":{"secretName":"apptest-cjbnvn9r-wso2-apk-enforcer-truststore-secret"}},{"name":"enforcer-apikey-cert","secret":{"secretName":"apptest-cjbnvn9r-wso2-apk-enforcer-truststore-secret"}},{"name":"idp-certificate-secret-volume","secret":{"secretName":"apptest-cjbnvn9r-wso2-apk-enforcer-truststore-secret"}},{"emptyDir":{},"name":"tmp"}]}}}}
    creationTimestamp: "2025-12-02T09:45:28Z"
    generation: 1
    labels:
      app.kubernetes.io/name: apptest-cjbnvn9r
    name: apptest-cjbnvn9r-wso2-apk-gateway-runtime-deployment
    namespace: apptest-cjbnvn9r
    ownerReferences:
    - apiVersion: app.k8s.io/v1beta1
      blockOwnerDeletion: true
      kind: Application
      name: apptest-cjbnvn9r
      uid: 69b7b8be-e784-4125-bcec-88e5f1f3ef36
    resourceVersion: "1764668729551791000"
    uid: 2d68a965-c90e-4b2a-b436-7c43cd738227
  spec:
    progressDeadlineSeconds: 600
    replicas: 1
    revisionHistoryLimit: 10
    selector:
      matchLabels:
        app.kubernetes.io/app: gateway
        app.kubernetes.io/release: apptest-cjbnvn9r
    strategy:
      rollingUpdate:
        maxSurge: 25%
        maxUnavailable: 25%
      type: RollingUpdate
    template:
      metadata:
        annotations:
          checksum/config: 18fd8554c652c099ae03055089c498ad1bd3845c0d82adc502056aebb34c5332
        creationTimestamp: null
        labels:
          app.kubernetes.io/app: gateway
          app.kubernetes.io/release: apptest-cjbnvn9r
      spec:
        affinity:
          podAntiAffinity:
            preferredDuringSchedulingIgnoredDuringExecution:
            - podAffinityTerm:
                labelSelector:
                  matchExpressions:
                  - key: app.kubernetes.io/app
                    operator: In
                    values:
                    - gateway-runtime
                topologyKey: topology.kubernetes.io/zone
              weight: 100
        automountServiceAccountToken: false
        containers:
        - env:
          - name: TOKEN_REVOCATION_ENABLED
            value: "true"
          - name: ADAPTER_HOST_NAME
            value: apptest-cjbnvn9r-wso2-apk-adapter-service.apptest-cjbnvn9r.svc
          - name: ADAPTER_HOST
            value: apptest-cjbnvn9r-wso2-apk-adapter-service.apptest-cjbnvn9r.svc
          - name: COMMON_CONTROLLER_HOST_NAME
            value: apptest-cjbnvn9r-wso2-apk-common-controller-service.apptest-cjbnvn9r.svc
          - name: COMMON_CONTROLLER_HOST
            value: apptest-cjbnvn9r-wso2-apk-common-controller-service.apptest-cjbnvn9r.svc
          - name: RATELIMITER_HOST
            value: apptest-cjbnvn9r-wso2-apk-ratelimiter-service.apptest-cjbnvn9r.svc
          - name: ENFORCER_PRIVATE_KEY_PATH
            value: /home/wso2/security/keystore/enforcer.key
          - name: ENFORCER_PUBLIC_CERT_PATH
            value: /home/wso2/security/keystore/enforcer.crt
          - name: ENFORCER_SERVER_NAME
            value: apptest-cjbnvn9r-wso2-apk-enforcer-service.apptest-cjbnvn9r.svc
          - name: TRUSTED_CA_CERTS_PATH
            value: /home/wso2/security/truststore
          - name: ADAPTER_XDS_PORT
            value: "18000"
          - name: RATELIMITER_PORT
            value: "8091"
          - name: COMMON_CONTROLLER_XDS_PORT
            value: "18002"
          - name: COMMON_CONTROLLER_REST_PORT
            value: "18003"
          - name: ENFORCER_LABEL
            value: wso2-apk-default
          - name: ENFORCER_REGION
            value: UNKNOWN
          - name: XDS_MAX_MSG_SIZE
            value: "4194304"
          - name: XDS_MAX_RETRIES
            value: "3"
          - name: enforcer_admin_pwd
            value: admin
          - name: REDIS_USERNAME
            value: default
          - name: REDIS_PASSWORD
          - name: REDIS_HOST
            value: redis-master
          - name: REDIS_PORT
            value: "6379"
          - name: IS_REDIS_TLS_ENABLED
            value: "false"
          - name: REDIS_REVOKED_TOKENS_CHANNEL
            value: wso2-apk-revoked-tokens-channel
          - name: REDIS_KEY_FILE
            value: /home/wso2/security/truststore/enforcer.key
          - name: REDIS_CERT_FILE
            value: /home/wso2/security/truststore/enforcer.crt
          - name: REDIS_CA_CERT_FILE
            value: /home/wso2/security/truststore/enforcer.crt
          - name: REVOKED_TOKEN_CLEANUP_INTERVAL
            value: "3600"
          image: us-docker.pkg.dev/wso2-marketplace-public/wso2-marketplace/apk-enforcer:4.5
          imagePullPolicy: Always
          livenessProbe:
            exec:
              command:
              - sh
              - check_health.sh
            failureThreshold: 5
            initialDelaySeconds: 20
            periodSeconds: 20
            successThreshold: 1
            timeoutSeconds: 1
          name: enforcer
          ports:
          - containerPort: 8081
            protocol: TCP
          - containerPort: 9001
            protocol: TCP
          - containerPort: 5006
            protocol: TCP
          - containerPort: 8084
            protocol: TCP
          - containerPort: 9092
            protocol: TCP
          - containerPort: 18002
            protocol: TCP
          readinessProbe:
            exec:
              command:
              - sh
              - check_health.sh
            failureThreshold: 5
            initialDelaySeconds: 20
            periodSeconds: 20
            successThreshold: 1
            timeoutSeconds: 1
          resources:
            limits:
              cpu: 500m
              memory: 512Mi
            requests:
              cpu: 200m
              memory: 128Mi
          securityContext:
            allowPrivilegeEscalation: false
            capabilities:
              drop:
              - ALL
            readOnlyRootFilesystem: true
            runAsNonRoot: true
          terminationMessagePath: /dev/termination-log
          terminationMessagePolicy: File
          volumeMounts:
          - mountPath: /tmp
            name: tmp
          - mountPath: /home/wso2/security/keystore/enforcer.key
            name: enforcer-keystore-secret-volume
            subPath: tls.key
          - mountPath: /home/wso2/security/keystore/enforcer.crt
            name: enforcer-keystore-secret-volume
            subPath: tls.crt
          - mountPath: /home/wso2/security/truststore/apk.crt
            name: enforcer-keystore-secret-volume
            subPath: ca.crt
          - mountPath: /home/wso2/security/truststore/enforcer.crt
            name: enforcer-keystore-secret-volume
            subPath: tls.crt
          - mountPath: /home/wso2/security/truststore/adapter.crt
            name: adapter-truststore-secret-volume
            subPath: tls.crt
          - mountPath: /home/wso2/security/truststore/router.crt
            name: router-keystore-secret-volume
            subPath: tls.crt
          - mountPath: /home/wso2/conf/
            name: log-conf-volume
          - mountPath: /home/wso2/check_health.sh
            name: enforcer-health-check-volume
            subPath: check_health.sh
          - mountPath: /home/wso2/security/keystore/mg.pem
            name: enforcer-jwt-secret-volume
            subPath: mg.pem
          - mountPath: /home/wso2/security/truststore/mg.pem
            name: enforcer-jwt-secret-volume
            subPath: mg.pem
          - mountPath: /home/wso2/security/keystore/mg.key
            name: enforcer-jwt-secret-volume
            subPath: mg.key
          - mountPath: /home/wso2/security/truststore/wso2carbon.pem
            name: enforcer-trusted-certs
            subPath: wso2carbon.pem
          - mountPath: /home/wso2/security/truststore/wso2-apim-carbon.pem
            name: enforcer-apikey-cert
            subPath: wso2-apim-carbon.pem
          - mountPath: /home/wso2/security/truststore/idp.pem
            name: idp-certificate-secret-volume
            subPath: wso2carbon.pem
          - mountPath: /home/wso2/security/truststore/ratelimiter.crt
            name: ratelimiter-truststore-secret-volume
            subPath: tls.crt
          - mountPath: /home/wso2/security/truststore/ratelimiter-ca.crt
            name: ratelimiter-truststore-secret-volume
            subPath: ca.crt
        - env:
          - name: ADAPTER_HOST_NAME
            value: apptest-cjbnvn9r-wso2-apk-adapter-service.apptest-cjbnvn9r.svc
          - name: ADAPTER_HOST
            value: apptest-cjbnvn9r-wso2-apk-adapter-service.apptest-cjbnvn9r.svc
          - name: ENFORCER_HOST
            value: 127.0.0.1
          - name: ENFORCER_ANALYTICS_HOST
            value: 127.0.0.1
          - name: ROUTER_ADMIN_HOST
            value: 0.0.0.0
          - name: ROUTER_ADMIN_PORT
            value: "9000"
          - name: ROUTER_PORT
            value: "9095"
          - name: ROUTER_CLUSTER
            value: apk_router_cluster
          - name: ROUTER_LABEL
            value: wso2-apk-default
          - name: ROUTER_PRIVATE_KEY_PATH
            value: /home/wso2/security/keystore/router.key
          - name: ROUTER_PUBLIC_CERT_PATH
            value: /home/wso2/security/keystore/router.crt
          - name: ADAPTER_PORT
            value: "18000"
          - name: ADAPTER_CA_CERT_PATH
            value: /home/wso2/security/truststore/adapter.crt
          - name: ENFORCER_PORT
            value: "8081"
          - name: ENFORCER_ANALYTICS_RECEIVER_PORT
            value: "18090"
          - name: ENFORCER_CA_CERT_PATH
            value: /home/wso2/security/truststore/enforcer.crt
          - name: CONCURRENCY
            value: "2"
          image: us-docker.pkg.dev/wso2-marketplace-public/wso2-marketplace/apk-router:4.5
          imagePullPolicy: Always
          livenessProbe:
            exec:
              command:
              - sh
              - router_check_health.sh
              - health
            failureThreshold: 5
            initialDelaySeconds: 20
            periodSeconds: 20
            successThreshold: 1
            timeoutSeconds: 1
          name: router
          ports:
          - containerPort: 9095
            protocol: TCP
          - containerPort: 9090
            protocol: TCP
          - containerPort: 9091
            protocol: TCP
          - containerPort: 9000
            protocol: TCP
          readinessProbe:
            exec:
              command:
              - sh
              - router_check_health.sh
              - health
            failureThreshold: 5
            initialDelaySeconds: 20
            periodSeconds: 20
            successThreshold: 1
            timeoutSeconds: 1
          resources:
            limits:
              cpu: "1"
              memory: 1028Mi
            requests:
              cpu: 200m
              memory: 128Mi
          securityContext:
            allowPrivilegeEscalation: false
            capabilities:
              drop:
              - ALL
            readOnlyRootFilesystem: true
            runAsNonRoot: true
          startupProbe:
            exec:
              command:
              - sh
              - router_check_health.sh
              - health
            failureThreshold: 5
            initialDelaySeconds: 20
            periodSeconds: 20
            successThreshold: 1
            timeoutSeconds: 1
          terminationMessagePath: /dev/termination-log
          terminationMessagePolicy: File
          volumeMounts:
          - mountPath: /home/wso2/security/keystore/router.key
            name: router-keystore-secret-volume
            subPath: tls.key
          - mountPath: /home/wso2/security/keystore/router.crt
            name: router-keystore-secret-volume
            subPath: tls.crt
          - mountPath: /home/wso2/security/truststore/adapter.crt
            name: adapter-truststore-secret-volume
            subPath: tls.crt
          - mountPath: /home/wso2/security/truststore/enforcer.crt
            name: enforcer-keystore-secret-volume
            subPath: tls.crt
          - mountPath: /home/wso2/conf/
            name: log-conf-volume
          - mountPath: /home/wso2/security/truststore/ratelimiter.crt
            name: ratelimiter-truststore-secret-volume
            subPath: tls.crt
          - mountPath: /home/wso2/security/truststore/ratelimiter-ca.crt
            name: ratelimiter-truststore-secret-volume
            subPath: ca.crt
        dnsPolicy: ClusterFirst
        restartPolicy: Always
        schedulerName: default-scheduler
        securityContext:
          seccompProfile:
            type: RuntimeDefault
        terminationGracePeriodSeconds: 30
        volumes:
        - name: ratelimiter-truststore-secret-volume
          secret:
            defaultMode: 420
            secretName: apptest-cjbnvn9r-wso2-apk-ratelimiter-server-cert
        - name: enforcer-keystore-secret-volume
          secret:
            defaultMode: 420
            secretName: apptest-cjbnvn9r-wso2-apk-enforcer-server-cert
        - configMap:
            defaultMode: 420
            name: apptest-cjbnvn9r-wso2-apk-log-conf
          name: log-conf-volume
        - configMap:
            defaultMode: 420
            name: apptest-cjbnvn9r-wso2-apk-enforcer-grpc-probe-script-conf
          name: enforcer-health-check-volume
        - name: router-keystore-secret-volume
          secret:
            defaultMode: 420
            secretName: apptest-cjbnvn9r-wso2-apk-gateway-server-cert
        - name: adapter-truststore-secret-volume
          secret:
            defaultMode: 420
            secretName: apptest-cjbnvn9r-wso2-apk-adapter-server-cert
        - name: enforcer-jwt-secret-volume
          secret:
            defaultMode: 420
            secretName: apptest-cjbnvn9r-wso2-apk-enforcer-keystore-secret
        - name: enforcer-trusted-certs
          secret:
            defaultMode: 420
            secretName: apptest-cjbnvn9r-wso2-apk-enforcer-truststore-secret
        - name: enforcer-apikey-cert
          secret:
            defaultMode: 420
            secretName: apptest-cjbnvn9r-wso2-apk-enforcer-truststore-secret
        - name: idp-certificate-secret-volume
          secret:
            defaultMode: 420
            secretName: apptest-cjbnvn9r-wso2-apk-enforcer-truststore-secret
        - emptyDir: {}
          name: tmp
  status:
    conditions:
    - lastTransitionTime: "2025-12-02T09:45:29Z"
      lastUpdateTime: "2025-12-02T09:45:29Z"
      message: Deployment does not have minimum availability.
      reason: MinimumReplicasUnavailable
      status: "False"
      type: Available
    - lastTransitionTime: "2025-12-02T09:45:28Z"
      lastUpdateTime: "2025-12-02T09:45:29Z"
      message: ReplicaSet "apptest-cjbnvn9r-wso2-apk-gateway-runtime-deployment-668466cf96"
        is progressing.
      reason: ReplicaSetUpdated
      status: "True"
      type: Progressing
    observedGeneration: 1
    replicas: 1
    unavailableReplicas: 1
    updatedReplicas: 1
- apiVersion: apps/v1
  kind: Deployment
  metadata:
    annotations:
      deployment.kubernetes.io/revision: "1"
      kubectl.kubernetes.io/last-applied-configuration: |
        {"apiVersion":"apps/v1","kind":"Deployment","metadata":{"annotations":{},"labels":{"app.kubernetes.io/name":"apptest-cjbnvn9r"},"name":"apptest-cjbnvn9r-wso2-apk-ratelimiter-deployment","namespace":"apptest-cjbnvn9r","ownerReferences":[{"apiVersion":"app.k8s.io/v1beta1","blockOwnerDeletion":true,"kind":"Application","name":"apptest-cjbnvn9r","uid":"69b7b8be-e784-4125-bcec-88e5f1f3ef36"}]},"spec":{"replicas":1,"selector":{"matchLabels":{"app.kubernetes.io/app":"ratelimiter","app.kubernetes.io/release":"apptest-cjbnvn9r"}},"strategy":{"type":"RollingUpdate"},"template":{"metadata":{"labels":{"app.kubernetes.io/app":"ratelimiter","app.kubernetes.io/release":"apptest-cjbnvn9r"}},"spec":{"affinity":{"podAntiAffinity":{"preferredDuringSchedulingIgnoredDuringExecution":[{"podAffinityTerm":{"labelSelector":{"matchExpressions":[{"key":"app.kubernetes.io/app","operator":"In","values":["rate-limiter"]}]},"topologyKey":"topology.kubernetes.io/zone"},"weight":100}]}},"automountServiceAccountToken":false,"containers":[{"env":[{"name":"HOST","value":"0.0.0.0"},{"name":"PORT","value":"8090"},{"name":"USE_STATSD","value":"false"},{"name":"LOG_LEVEL","value":"DEBUG"},{"name":"LIMIT_RESPONSE_HEADERS_ENABLED","value":"false"},{"name":"REDIS_TYPE","value":"single"},{"name":"REDIS_SOCKET_TYPE","value":"tcp"},{"name":"REDIS_URL","value":"redis-master:6379"},{"name":"REDIS_PIPELINE_WINDOW","value":"0.2ms"},{"name":"REDIS_PIPELINE_LIMIT","value":"0"},{"name":"GRPC_HOST","value":"0.0.0.0"},{"name":"GRPC_PORT","value":"8091"},{"name":"GRPC_SERVER_USE_TLS","value":"true"},{"name":"GRPC_SERVER_TLS_KEY","value":"/home/wso2/security/keystore/ratelimiter.key"},{"name":"GRPC_SERVER_TLS_CERT","value":"/home/wso2/security/keystore/ratelimiter.crt"},{"name":"GRPC_CLIENT_TLS_CACERT","value":"/home/wso2/security/truststore/ratelimiter-ca.crt"},{"name":"RATELIMITER_LABEL","value":"ratelimiter"},{"name":"CONFIG_GRPC_XDS_SERVER_URL","value":"apptest-cjbnvn9r-wso2-apk-common-controller-service.apptest-cjbnvn9r.svc:18005"},{"name":"CONFIG_GRPC_XDS_SERVER_USE_TLS","value":"true"},{"name":"CONFIG_GRPC_XDS_CLIENT_TLS_KEY","value":"/home/wso2/security/keystore/ratelimiter.key"},{"name":"CONFIG_GRPC_XDS_CLIENT_TLS_CERT","value":"/home/wso2/security/keystore/ratelimiter.crt"},{"name":"CONFIG_GRPC_XDS_SERVER_TLS_CACERT","value":"/home/wso2/security/truststore/ratelimiter-ca.crt"},{"name":"CONFIG_GRPC_XDS_SERVER_TLS_SAN","value":"apptest-cjbnvn9r-wso2-apk-common-controller-service.apptest-cjbnvn9r.svc"}],"image":"us-docker.pkg.dev/wso2-marketplace-public/wso2-marketplace/apk-ratelimiter:4.5","imagePullPolicy":"Always","livenessProbe":{"failureThreshold":5,"httpGet":{"path":"/healthcheck","port":8090,"scheme":"HTTP"},"initialDelaySeconds":20,"periodSeconds":20},"name":"ratelimiter","ports":[{"containerPort":8090,"protocol":"TCP"},{"containerPort":8091,"protocol":"TCP"},{"containerPort":6070,"protocol":"TCP"}],"readinessProbe":{"failureThreshold":5,"httpGet":{"path":"/healthcheck","port":8090,"scheme":"HTTP"},"initialDelaySeconds":20,"periodSeconds":20},"resources":{"limits":{"cpu":"100m","memory":"128Mi"},"requests":{"cpu":"50m","memory":"64Mi"}},"securityContext":{"allowPrivilegeEscalation":false,"capabilities":{"drop":["ALL"]},"readOnlyRootFilesystem":true},"volumeMounts":[{"mountPath":"/home/wso2/security/keystore/ratelimiter.key","name":"ratelimiter-keystore-secret-volume","subPath":"tls.key"},{"mountPath":"/home/wso2/security/keystore/ratelimiter.crt","name":"ratelimiter-keystore-secret-volume","subPath":"tls.crt"},{"mountPath":"/home/wso2/security/truststore/ratelimiter-ca.crt","name":"ratelimiter-keystore-secret-volume","subPath":"ca.crt"},{"mountPath":"/home/wso2/security/truststore/adapter.pem","name":"common-controller-truststore-secret-volume","subPath":"tls.crt"},{"mountPath":"/home/wso2/security/truststore/router.pem","name":"router-truststore-secret-volume","subPath":"tls.crt"}]}],"securityContext":{"runAsNonRoot":true,"seccompProfile":{"type":"RuntimeDefault"}},"serviceAccountName":"wso2apk-platform","volumes":[{"name":"ratelimiter-keystore-secret-volume","secret":{"defaultMode":420,"secretName":"apptest-cjbnvn9r-wso2-apk-ratelimiter-server-cert"}},{"name":"common-controller-truststore-secret-volume","secret":{"defaultMode":420,"secretName":"apptest-cjbnvn9r-wso2-apk-common-controller-server-cert"}},{"name":"router-truststore-secret-volume","secret":{"defaultMode":420,"secretName":"apptest-cjbnvn9r-wso2-apk-gateway-server-cert"}}]}}}}
    creationTimestamp: "2025-12-02T09:45:28Z"
    generation: 1
    labels:
      app.kubernetes.io/name: apptest-cjbnvn9r
    name: apptest-cjbnvn9r-wso2-apk-ratelimiter-deployment
    namespace: apptest-cjbnvn9r
    ownerReferences:
    - apiVersion: app.k8s.io/v1beta1
      blockOwnerDeletion: true
      kind: Application
      name: apptest-cjbnvn9r
      uid: 69b7b8be-e784-4125-bcec-88e5f1f3ef36
    resourceVersion: "1764668729602863003"
    uid: 7dbf853e-dfdb-41a8-a427-275863402ef5
  spec:
    progressDeadlineSeconds: 600
    replicas: 1
    revisionHistoryLimit: 10
    selector:
      matchLabels:
        app.kubernetes.io/app: ratelimiter
        app.kubernetes.io/release: apptest-cjbnvn9r
    strategy:
      rollingUpdate:
        maxSurge: 25%
        maxUnavailable: 25%
      type: RollingUpdate
    template:
      metadata:
        creationTimestamp: null
        labels:
          app.kubernetes.io/app: ratelimiter
          app.kubernetes.io/release: apptest-cjbnvn9r
      spec:
        affinity:
          podAntiAffinity:
            preferredDuringSchedulingIgnoredDuringExecution:
            - podAffinityTerm:
                labelSelector:
                  matchExpressions:
                  - key: app.kubernetes.io/app
                    operator: In
                    values:
                    - rate-limiter
                topologyKey: topology.kubernetes.io/zone
              weight: 100
        automountServiceAccountToken: false
        containers:
        - env:
          - name: HOST
            value: 0.0.0.0
          - name: PORT
            value: "8090"
          - name: USE_STATSD
            value: "false"
          - name: LOG_LEVEL
            value: DEBUG
          - name: LIMIT_RESPONSE_HEADERS_ENABLED
            value: "false"
          - name: REDIS_TYPE
            value: single
          - name: REDIS_SOCKET_TYPE
            value: tcp
          - name: REDIS_URL
            value: redis-master:6379
          - name: REDIS_PIPELINE_WINDOW
            value: 0.2ms
          - name: REDIS_PIPELINE_LIMIT
            value: "0"
          - name: GRPC_HOST
            value: 0.0.0.0
          - name: GRPC_PORT
            value: "8091"
          - name: GRPC_SERVER_USE_TLS
            value: "true"
          - name: GRPC_SERVER_TLS_KEY
            value: /home/wso2/security/keystore/ratelimiter.key
          - name: GRPC_SERVER_TLS_CERT
            value: /home/wso2/security/keystore/ratelimiter.crt
          - name: GRPC_CLIENT_TLS_CACERT
            value: /home/wso2/security/truststore/ratelimiter-ca.crt
          - name: RATELIMITER_LABEL
            value: ratelimiter
          - name: CONFIG_GRPC_XDS_SERVER_URL
            value: apptest-cjbnvn9r-wso2-apk-common-controller-service.apptest-cjbnvn9r.svc:18005
          - name: CONFIG_GRPC_XDS_SERVER_USE_TLS
            value: "true"
          - name: CONFIG_GRPC_XDS_CLIENT_TLS_KEY
            value: /home/wso2/security/keystore/ratelimiter.key
          - name: CONFIG_GRPC_XDS_CLIENT_TLS_CERT
            value: /home/wso2/security/keystore/ratelimiter.crt
          - name: CONFIG_GRPC_XDS_SERVER_TLS_CACERT
            value: /home/wso2/security/truststore/ratelimiter-ca.crt
          - name: CONFIG_GRPC_XDS_SERVER_TLS_SAN
            value: apptest-cjbnvn9r-wso2-apk-common-controller-service.apptest-cjbnvn9r.svc
          image: us-docker.pkg.dev/wso2-marketplace-public/wso2-marketplace/apk-ratelimiter:4.5
          imagePullPolicy: Always
          livenessProbe:
            failureThreshold: 5
            httpGet:
              path: /healthcheck
              port: 8090
              scheme: HTTP
            initialDelaySeconds: 20
            periodSeconds: 20
            successThreshold: 1
            timeoutSeconds: 1
          name: ratelimiter
          ports:
          - containerPort: 8090
            protocol: TCP
          - containerPort: 8091
            protocol: TCP
          - containerPort: 6070
            protocol: TCP
          readinessProbe:
            failureThreshold: 5
            httpGet:
              path: /healthcheck
              port: 8090
              scheme: HTTP
            initialDelaySeconds: 20
            periodSeconds: 20
            successThreshold: 1
            timeoutSeconds: 1
          resources:
            limits:
              cpu: 100m
              memory: 128Mi
            requests:
              cpu: 50m
              memory: 64Mi
          securityContext:
            allowPrivilegeEscalation: false
            capabilities:
              drop:
              - ALL
            readOnlyRootFilesystem: true
          terminationMessagePath: /dev/termination-log
          terminationMessagePolicy: File
          volumeMounts:
          - mountPath: /home/wso2/security/keystore/ratelimiter.key
            name: ratelimiter-keystore-secret-volume
            subPath: tls.key
          - mountPath: /home/wso2/security/keystore/ratelimiter.crt
            name: ratelimiter-keystore-secret-volume
            subPath: tls.crt
          - mountPath: /home/wso2/security/truststore/ratelimiter-ca.crt
            name: ratelimiter-keystore-secret-volume
            subPath: ca.crt
          - mountPath: /home/wso2/security/truststore/adapter.pem
            name: common-controller-truststore-secret-volume
            subPath: tls.crt
          - mountPath: /home/wso2/security/truststore/router.pem
            name: router-truststore-secret-volume
            subPath: tls.crt
        dnsPolicy: ClusterFirst
        restartPolicy: Always
        schedulerName: default-scheduler
        securityContext:
          runAsNonRoot: true
          seccompProfile:
            type: RuntimeDefault
        serviceAccount: wso2apk-platform
        serviceAccountName: wso2apk-platform
        terminationGracePeriodSeconds: 30
        volumes:
        - name: ratelimiter-keystore-secret-volume
          secret:
            defaultMode: 420
            secretName: apptest-cjbnvn9r-wso2-apk-ratelimiter-server-cert
        - name: common-controller-truststore-secret-volume
          secret:
            defaultMode: 420
            secretName: apptest-cjbnvn9r-wso2-apk-common-controller-server-cert
        - name: router-truststore-secret-volume
          secret:
            defaultMode: 420
            secretName: apptest-cjbnvn9r-wso2-apk-gateway-server-cert
  status:
    conditions:
    - lastTransitionTime: "2025-12-02T09:45:29Z"
      lastUpdateTime: "2025-12-02T09:45:29Z"
      message: Deployment does not have minimum availability.
      reason: MinimumReplicasUnavailable
      status: "False"
      type: Available
    - lastTransitionTime: "2025-12-02T09:45:29Z"
      lastUpdateTime: "2025-12-02T09:45:29Z"
      message: ReplicaSet "apptest-cjbnvn9r-wso2-apk-ratelimiter-deployment-5d9c9c9999"
        is progressing.
      reason: ReplicaSetUpdated
      status: "True"
      type: Progressing
    observedGeneration: 1
    replicas: 1
    unavailableReplicas: 1
    updatedReplicas: 1
- apiVersion: apps/v1
  kind: ReplicaSet
  metadata:
    annotations:
      deployment.kubernetes.io/desired-replicas: "1"
      deployment.kubernetes.io/max-replicas: "2"
      deployment.kubernetes.io/revision: "1"
    creationTimestamp: "2025-12-02T09:45:29Z"
    generation: 1
    labels:
      app.kubernetes.io/app: apim-apk-agent
      app.kubernetes.io/instance: apptest-cjbnvn9r
      app.kubernetes.io/name: apkagent
      pod-template-hash: 568cd8f787
    name: apkagent-568cd8f787
    namespace: apptest-cjbnvn9r
    ownerReferences:
    - apiVersion: apps/v1
      blockOwnerDeletion: true
      controller: true
      kind: Deployment
      name: apkagent
      uid: 2886b15c-07f4-48fe-b587-bead2de2b43f
    resourceVersion: "1764668729658447015"
    uid: a1b2d655-acf6-4bc1-8373-8db47635723c
  spec:
    replicas: 1
    selector:
      matchLabels:
        app.kubernetes.io/app: apim-apk-agent
        app.kubernetes.io/instance: apptest-cjbnvn9r
        app.kubernetes.io/name: apkagent
        pod-template-hash: 568cd8f787
    template:
      metadata:
        annotations:
          checksum/config: f1386741e0bb8883657604c6a4c07b77097ac794746112a899cdbe129c4514ca
        creationTimestamp: null
        labels:
          app.kubernetes.io/app: apim-apk-agent
          app.kubernetes.io/instance: apptest-cjbnvn9r
          app.kubernetes.io/name: apkagent
          pod-template-hash: 568cd8f787
      spec:
        containers:
        - env:
          - name: APIM_APK_AGENT_PRIVATE_KEY_PATH
            value: /home/wso2/security/keystore/apk-agent.key
          - name: APIM_APK_AGENT_PUBLIC_CERT_PATH
            value: /home/wso2/security/keystore/apk-agent.crt
          - name: APIM_APK_AGENT_SERVER_NAME
            value: apim-apk-agent-service.apptest-cjbnvn9r.svc
          - name: APIM_APK_AGENT_GRPC_PORT
            value: "18000"
          image: us-docker.pkg.dev/wso2-marketplace-public/wso2-marketplace/apim-apk-agent:4.5
          imagePullPolicy: Always
          livenessProbe:
            exec:
              command:
              - sh
              - check_health.sh
            failureThreshold: 5
            initialDelaySeconds: 20
            periodSeconds: 20
            successThreshold: 1
            timeoutSeconds: 1
          name: apkagent
          ports:
          - containerPort: 18000
            name: grpc-port
            protocol: TCP
          - containerPort: 18001
            name: rest-port
            protocol: TCP
          readinessProbe:
            exec:
              command:
              - sh
              - check_health.sh
            failureThreshold: 5
            initialDelaySeconds: 20
            periodSeconds: 20
            successThreshold: 1
            timeoutSeconds: 1
          resources:
            limits:
              cpu: 200m
              memory: 256Mi
            requests:
              cpu: 100m
              memory: 128Mi
          terminationMessagePath: /dev/termination-log
          terminationMessagePolicy: File
          volumeMounts:
          - mountPath: /home/wso2/conf/
            name: log-conf-volume
          - mountPath: /home/wso2/security/keystore/apk-agent.key
            name: apk-agent-certificates
            subPath: tls.key
          - mountPath: /home/wso2/security/keystore/apk-agent.crt
            name: apk-agent-certificates
            subPath: tls.crt
          - mountPath: /home/wso2/security/truststore/apk-agent-ca.crt
            name: apk-agent-certificates
            subPath: ca.crt
        dnsPolicy: ClusterFirst
        restartPolicy: Always
        schedulerName: default-scheduler
        securityContext: {}
        serviceAccount: wso2agent-platform
        serviceAccountName: wso2agent-platform
        terminationGracePeriodSeconds: 30
        volumes:
        - configMap:
            defaultMode: 420
            name: apptest-cjbnvn9r-log-conf
          name: log-conf-volume
        - name: apk-agent-certificates
          secret:
            defaultMode: 420
            secretName: apk-agent-server-cert
  status:
    fullyLabeledReplicas: 1
    observedGeneration: 1
    replicas: 1
- apiVersion: apps/v1
  kind: ReplicaSet
  metadata:
    annotations:
      deployment.kubernetes.io/desired-replicas: "1"
      deployment.kubernetes.io/max-replicas: "1"
      deployment.kubernetes.io/revision: "1"
    creationTimestamp: "2025-12-02T09:45:28Z"
    generation: 1
    labels:
      deployment: apptest-cjbnvn9r-acp
      node: apptest-cjbnvn9r-acp-1
      pod-template-hash: 57955fdcc4
      product: apim
    name: apptest-cjbnvn9r-acp-deployment-1-57955fdcc4
    namespace: apptest-cjbnvn9r
    ownerReferences:
    - apiVersion: apps/v1
      blockOwnerDeletion: true
      controller: true
      kind: Deployment
      name: apptest-cjbnvn9r-acp-deployment-1
      uid: 02b947b1-1f6a-427c-8855-412204a56074
    resourceVersion: "1764668728667727017"
    uid: 3dd6059a-1d6c-430b-8963-981ee2254600
  spec:
    replicas: 1
    selector:
      matchLabels:
        deployment: apptest-cjbnvn9r-acp
        node: apptest-cjbnvn9r-acp-1
        pod-template-hash: 57955fdcc4
    template:
      metadata:
        annotations:
          checksum.am.cp.conf: b161029a8624c675a703ea9441f0b0c44282b8c42035c342ae10a7b3cac9e75f
          checksum.am.cp.conf.log4j2: 6dd938f39d31dc49520a30c28c5915a3df355f79250460812b1b3c94d19754ba
          checksum.am.cp.conf.secret: 6931efed2d9b235c16cb2483d011065a68d48e84e9adb262621f41a66645fbfb
          cloudmarketplace.googleapis.com/product.metadata: v1:{"services":[{"service_name":"wso2-apimanager.endpoints.wso2-marketplace-public.cloud.goog",
            "service_level":"default"}]}
        creationTimestamp: null
        labels:
          deployment: apptest-cjbnvn9r-acp
          node: apptest-cjbnvn9r-acp-1
          pod-template-hash: 57955fdcc4
          product: apim
      spec:
        affinity:
          podAntiAffinity:
            preferredDuringSchedulingIgnoredDuringExecution:
            - podAffinityTerm:
                labelSelector:
                  matchExpressions:
                  - key: deployment
                    operator: In
                    values:
                    - apptest-cjbnvn9r-acp
                topologyKey: topology.kubernetes.io/zone
              weight: 100
        containers:
        - env:
          - name: PROFILE_NAME
            value: default
          - name: NODE_IP
            valueFrom:
              fieldRef:
                apiVersion: v1
                fieldPath: status.podIP
          - name: JVM_MEM_OPTS
            value: -Xms2048m -Xmx2048m
          image: us-docker.pkg.dev/wso2-marketplace-public/wso2-marketplace/wso2am-acp:4.5
          imagePullPolicy: Always
          lifecycle:
            preStop:
              exec:
                command:
                - sh
                - -c
                - |
                  echo "Pre stop hook triggered"; sleep 10; echo "Shutdown APIM Server"; ${WSO2_SERVER_HOME}/bin/api-cp.sh stop
          livenessProbe:
            failureThreshold: 3
            httpGet:
              path: /services/Version
              port: 9763
              scheme: HTTP
            initialDelaySeconds: 60
            periodSeconds: 10
            successThreshold: 1
            timeoutSeconds: 1
          name: wso2am-control-plane
          ports:
          - containerPort: 9763
            protocol: TCP
          - containerPort: 9443
            protocol: TCP
          - containerPort: 9711
            protocol: TCP
          - containerPort: 9611
            protocol: TCP
          - containerPort: 5672
            protocol: TCP
          readinessProbe:
            failureThreshold: 3
            httpGet:
              path: /services/Version
              port: 9763
              scheme: HTTP
            initialDelaySeconds: 60
            periodSeconds: 10
            successThreshold: 1
            timeoutSeconds: 1
          resources:
            limits:
              cpu: "3"
              memory: 5Gi
            requests:
              cpu: "2"
              memory: 2Gi
          securityContext:
            allowPrivilegeEscalation: false
            capabilities:
              drop:
              - all
            runAsNonRoot: true
            runAsUser: 10001
          startupProbe:
            exec:
              command:
              - /bin/sh
              - -c
              - timeout 1 bash -c "</dev/tcp/localhost/9443"
            failureThreshold: 3
            initialDelaySeconds: 60
            periodSeconds: 10
            successThreshold: 1
            timeoutSeconds: 1
          terminationMessagePath: /dev/termination-log
          terminationMessagePolicy: File
          volumeMounts:
          - mountPath: /home/wso2carbon/wso2-config-volume/repository/conf/deployment.toml
            name: wso2am-control-plane-conf
            subPath: deployment.toml
          - mountPath: /home/wso2carbon/docker-entrypoint.sh
            name: wso2am-control-plane-entrypoint
            subPath: docker-entrypoint.sh
          - mountPath: /home/wso2carbon/wso2-config-volume/repository/conf/log4j2.properties
            name: wso2am-control-plane-log4j2
            subPath: log4j2.properties
          - mountPath: /home/wso2carbon/wso2-config-volume/repository/deployment/server/webapps/admin/site/public/conf/settings.json
            name: wso2am-conf-admin-settings
            subPath: settings.json
          - mountPath: /home/wso2carbon/wso2-config-volume/repository/deployment/server/webapps/devportal/site/public/theme/settings.json
            name: wso2am-conf-devportal-settings
            subPath: settings.json
          - mountPath: /home/wso2carbon/wso2-config-volume/repository/deployment/server/webapps/publisher/site/public/conf/settings.json
            name: wso2am-conf-publisher-settings
            subPath: settings.json
        dnsPolicy: ClusterFirst
        restartPolicy: Always
        schedulerName: default-scheduler
        securityContext:
          seccompProfile:
            type: RuntimeDefault
        terminationGracePeriodSeconds: 30
        volumes:
        - configMap:
            defaultMode: 263
            name: apptest-cjbnvn9r-acp-conf-1
          name: wso2am-control-plane-conf
        - configMap:
            defaultMode: 263
            name: apptest-cjbnvn9r-acp-conf-entrypoint
          name: wso2am-control-plane-entrypoint
        - configMap:
            defaultMode: 263
            name: apptest-cjbnvn9r-acp-conf-log4j2
          name: wso2am-control-plane-log4j2
        - configMap:
            defaultMode: 263
            name: apptest-cjbnvn9r-acp-conf-admin-settings
          name: wso2am-conf-admin-settings
        - configMap:
            defaultMode: 263
            name: apptest-cjbnvn9r-acp-conf-devportal-settings
          name: wso2am-conf-devportal-settings
        - configMap:
            defaultMode: 263
            name: apptest-cjbnvn9r-acp-conf-publisher-settings
          name: wso2am-conf-publisher-settings
  status:
    fullyLabeledReplicas: 1
    observedGeneration: 1
    replicas: 1
- apiVersion: apps/v1
  kind: ReplicaSet
  metadata:
    annotations:
      deployment.kubernetes.io/desired-replicas: "1"
      deployment.kubernetes.io/max-replicas: "2"
      deployment.kubernetes.io/revision: "1"
    creationTimestamp: "2025-12-02T09:45:28Z"
    generation: 1
    labels:
      app.kubernetes.io/app: adapter
      app.kubernetes.io/release: apptest-cjbnvn9r
      pod-template-hash: b599d79c6
    name: apptest-cjbnvn9r-wso2-apk-adapter-deployment-b599d79c6
    namespace: apptest-cjbnvn9r
    ownerReferences:
    - apiVersion: apps/v1
      blockOwnerDeletion: true
      controller: true
      kind: Deployment
      name: apptest-cjbnvn9r-wso2-apk-adapter-deployment
      uid: b4321570-c72e-4143-85ad-9ebb0ae00d33
    resourceVersion: "1764668728878367014"
    uid: 1e46a5f3-160a-4bb2-97c6-d0acb10ad94e
  spec:
    replicas: 1
    selector:
      matchLabels:
        app.kubernetes.io/app: adapter
        app.kubernetes.io/release: apptest-cjbnvn9r
        pod-template-hash: b599d79c6
    template:
      metadata:
        annotations:
          checksum/config: 18fd8554c652c099ae03055089c498ad1bd3845c0d82adc502056aebb34c5332
        creationTimestamp: null
        labels:
          app.kubernetes.io/app: adapter
          app.kubernetes.io/release: apptest-cjbnvn9r
          pod-template-hash: b599d79c6
      spec:
        affinity:
          podAntiAffinity:
            preferredDuringSchedulingIgnoredDuringExecution:
            - podAffinityTerm:
                labelSelector:
                  matchExpressions:
                  - key: app.kubernetes.io/app
                    operator: In
                    values:
                    - adapter
                topologyKey: topology.kubernetes.io/zone
              weight: 100
        containers:
        - env:
          - name: OPERATOR_POD_NAMESPACE
            valueFrom:
              fieldRef:
                apiVersion: v1
                fieldPath: metadata.namespace
          - name: ADAPTER_PRIVATE_KEY_PATH
            value: /home/wso2/security/keystore/adapter.key
          - name: ADAPTER_PUBLIC_CERT_PATH
            value: /home/wso2/security/keystore/adapter.crt
          - name: ADAPTER_SERVER_NAME
            value: apptest-cjbnvn9r-wso2-apk-adapter-service.apptest-cjbnvn9r.svc
          image: us-docker.pkg.dev/wso2-marketplace-public/wso2-marketplace/apk-adapter:4.5
          imagePullPolicy: Always
          livenessProbe:
            exec:
              command:
              - sh
              - check_health.sh
            failureThreshold: 5
            initialDelaySeconds: 20
            periodSeconds: 20
            successThreshold: 1
            timeoutSeconds: 1
          name: adapter
          ports:
          - containerPort: 18000
            protocol: TCP
          - containerPort: 8765
            protocol: TCP
          - containerPort: 18005
            protocol: TCP
          readinessProbe:
            exec:
              command:
              - sh
              - check_health.sh
            failureThreshold: 5
            initialDelaySeconds: 20
            periodSeconds: 20
            successThreshold: 1
            timeoutSeconds: 1
          resources:
            limits:
              cpu: 200m
              memory: 128Mi
            requests:
              cpu: 50m
              memory: 64Mi
          securityContext:
            allowPrivilegeEscalation: false
            capabilities:
              drop:
              - ALL
            readOnlyRootFilesystem: true
          terminationMessagePath: /dev/termination-log
          terminationMessagePolicy: File
          volumeMounts:
          - mountPath: /home/wso2/security/keystore/adapter.key
            name: adapter-keystore-secret-volume
            subPath: tls.key
          - mountPath: /home/wso2/security/keystore/adapter.crt
            name: adapter-keystore-secret-volume
            subPath: tls.crt
          - mountPath: /home/wso2/security/truststore/adapter-ca.crt
            name: adapter-keystore-secret-volume
            subPath: ca.crt
          - mountPath: /home/wso2/security/truststore/router.crt
            name: router-truststore-secret-volume
            subPath: tls.crt
          - mountPath: /home/wso2/security/truststore/enforcer.crt
            name: enforcer-truststore-secret-volume
            subPath: tls.crt
          - mountPath: /home/wso2/security/truststore/consul
            name: adapter-truststore-consul-secret-volume
          - mountPath: /home/wso2/conf/
            name: log-conf-volume
          - mountPath: /home/wso2/security/truststore/wso2-apim-carbon.pem
            name: enforcer-apikey-cert
            subPath: wso2-apim-carbon.pem
        dnsPolicy: ClusterFirst
        restartPolicy: Always
        schedulerName: default-scheduler
        securityContext:
          runAsNonRoot: true
          seccompProfile:
            type: RuntimeDefault
        serviceAccount: wso2apk-platform
        serviceAccountName: wso2apk-platform
        terminationGracePeriodSeconds: 30
        volumes:
        - name: adapter-keystore-secret-volume
          secret:
            defaultMode: 420
            secretName: apptest-cjbnvn9r-wso2-apk-adapter-server-cert
        - name: adapter-truststore-consul-secret-volume
          secret:
            defaultMode: 420
            secretName: apptest-cjbnvn9r-wso2-apk-adapter-truststore-consul-secret
        - configMap:
            defaultMode: 420
            name: apptest-cjbnvn9r-wso2-apk-log-conf
          name: log-conf-volume
        - emptyDir: {}
          name: router-truststore-secret-volume
        - name: enforcer-truststore-secret-volume
          secret:
            defaultMode: 420
            secretName: apptest-cjbnvn9r-wso2-apk-enforcer-server-cert
        - name: enforcer-apikey-cert
          secret:
            defaultMode: 420
            secretName: apptest-cjbnvn9r-wso2-apk-enforcer-truststore-secret
  status:
    fullyLabeledReplicas: 1
    observedGeneration: 1
    replicas: 1
- apiVersion: apps/v1
  kind: ReplicaSet
  metadata:
    annotations:
      deployment.kubernetes.io/desired-replicas: "1"
      deployment.kubernetes.io/max-replicas: "2"
      deployment.kubernetes.io/revision: "1"
    creationTimestamp: "2025-12-02T09:45:28Z"
    generation: 1
    labels:
      app.kubernetes.io/app: commoncontroller
      app.kubernetes.io/release: apptest-cjbnvn9r
      pod-template-hash: 7b5d596d46
    name: apptest-cjbnvn9r-wso2-apk-common-controller-deployment-7b5d596d46
    namespace: apptest-cjbnvn9r
    ownerReferences:
    - apiVersion: apps/v1
      blockOwnerDeletion: true
      controller: true
      kind: Deployment
      name: apptest-cjbnvn9r-wso2-apk-common-controller-deployment
      uid: d833663c-8eeb-4b93-9f78-fa89c4323dec
    resourceVersion: "1764668728960367015"
    uid: 8e30bcc0-1c08-45ff-83f5-f34a609ad766
  spec:
    replicas: 1
    selector:
      matchLabels:
        app.kubernetes.io/app: commoncontroller
        app.kubernetes.io/release: apptest-cjbnvn9r
        pod-template-hash: 7b5d596d46
    template:
      metadata:
        annotations:
          checksum/config: 4f5df4b548f725c558fd44def3c42dd668a147a662999bf2ce2b85a33f035e03
        creationTimestamp: null
        labels:
          app.kubernetes.io/app: commoncontroller
          app.kubernetes.io/release: apptest-cjbnvn9r
          pod-template-hash: 7b5d596d46
      spec:
        affinity:
          podAntiAffinity:
            preferredDuringSchedulingIgnoredDuringExecution:
            - podAffinityTerm:
                labelSelector:
                  matchExpressions:
                  - key: app.kubernetes.io/app
                    operator: In
                    values:
                    - common-controller
                topologyKey: topology.kubernetes.io/zone
              weight: 100
        containers:
        - env:
          - name: OPERATOR_POD_NAMESPACE
            valueFrom:
              fieldRef:
                apiVersion: v1
                fieldPath: metadata.namespace
          - name: COMMON_CONTROLLER_PRIVATE_KEY_PATH
            value: /home/wso2/security/keystore/commoncontroller.key
          - name: COMMON_CONTROLLER_PUBLIC_CERT_PATH
            value: /home/wso2/security/keystore/commoncontroller.crt
          - name: COMMON_CONTROLLER_SERVER_NAME
            value: apptest-cjbnvn9r-wso2-apk-common-controller-service.apptest-cjbnvn9r.svc
          image: us-docker.pkg.dev/wso2-marketplace-public/wso2-marketplace/apk-common-controller:4.5
          imagePullPolicy: Always
          livenessProbe:
            exec:
              command:
              - sh
              - check_health.sh
            failureThreshold: 5
            initialDelaySeconds: 20
            periodSeconds: 20
            successThreshold: 1
            timeoutSeconds: 1
          name: commoncontroller
          ports:
          - containerPort: 18005
            protocol: TCP
          - containerPort: 18002
            protocol: TCP
          - containerPort: 9543
            protocol: TCP
          - containerPort: 18003
            protocol: TCP
          readinessProbe:
            exec:
              command:
              - sh
              - check_health.sh
            failureThreshold: 5
            initialDelaySeconds: 20
            periodSeconds: 20
            successThreshold: 1
            timeoutSeconds: 1
          resources:
            limits:
              cpu: 200m
              memory: 128Mi
            requests:
              cpu: 50m
              memory: 64Mi
          securityContext:
            allowPrivilegeEscalation: false
            capabilities:
              drop:
              - ALL
            readOnlyRootFilesystem: true
          terminationMessagePath: /dev/termination-log
          terminationMessagePolicy: File
          volumeMounts:
          - mountPath: /home/wso2/security/keystore/commoncontroller.key
            name: common-controller-keystore-secret-volume
            subPath: tls.key
          - mountPath: /home/wso2/security/keystore/commoncontroller.crt
            name: common-controller-keystore-secret-volume
            subPath: tls.crt
          - mountPath: /home/wso2/security/truststore/adapter-ca.crt
            name: common-controller-keystore-secret-volume
            subPath: ca.crt
          - mountPath: /home/wso2/security/truststore/ratelimiter.crt
            name: ratelimiter-truststore-secret-volume
            subPath: tls.crt
          - mountPath: /home/wso2/security/truststore/ca-ratelimiter.crt
            name: ratelimiter-truststore-secret-volume
            subPath: ca.crt
          - mountPath: /home/wso2/conf/
            name: log-conf-volume
          - mountPath: /tmp/k8s-webhook-server/serving-certs
            name: adapter-webhook-server-cert
            readOnly: true
          - mountPath: /home/wso2/security/sts/
            name: sts-shared-auth-key
            readOnly: true
        dnsPolicy: ClusterFirst
        restartPolicy: Always
        schedulerName: default-scheduler
        securityContext:
          runAsNonRoot: true
          seccompProfile:
            type: RuntimeDefault
        serviceAccount: wso2apk-platform
        serviceAccountName: wso2apk-platform
        terminationGracePeriodSeconds: 30
        volumes:
        - name: common-controller-keystore-secret-volume
          secret:
            defaultMode: 420
            secretName: apptest-cjbnvn9r-wso2-apk-common-controller-server-cert
        - configMap:
            defaultMode: 420
            name: apptest-cjbnvn9r-wso2-apk-common-log-conf
          name: log-conf-volume
        - name: adapter-webhook-server-cert
          secret:
            defaultMode: 420
            secretName: apptest-cjbnvn9r-wso2-apk-webhook-server-cert
        - name: sts-shared-auth-key
          secret:
            defaultMode: 420
            secretName: apptest-cjbnvn9r-wso2-apk-sts-shared-auth-key
        - name: ratelimiter-truststore-secret-volume
          secret:
            defaultMode: 420
            secretName: apptest-cjbnvn9r-wso2-apk-ratelimiter-server-cert
  status:
    fullyLabeledReplicas: 1
    observedGeneration: 1
    replicas: 1
- apiVersion: apps/v1
  kind: ReplicaSet
  metadata:
    annotations:
      deployment.kubernetes.io/desired-replicas: "1"
      deployment.kubernetes.io/max-replicas: "2"
      deployment.kubernetes.io/revision: "1"
    creationTimestamp: "2025-12-02T09:45:28Z"
    generation: 1
    labels:
      app.kubernetes.io/app: configdeployer-ds
      app.kubernetes.io/release: apptest-cjbnvn9r
      pod-template-hash: 76f6fc7b79
    name: apptest-cjbnvn9r-wso2-apk-config-ds-deployment-76f6fc7b79
    namespace: apptest-cjbnvn9r
    ownerReferences:
    - apiVersion: apps/v1
      blockOwnerDeletion: true
      controller: true
      kind: Deployment
      name: apptest-cjbnvn9r-wso2-apk-config-ds-deployment
      uid: da335cac-957f-4cbf-82db-1e0c402ea9cd
    resourceVersion: "1764668728807391003"
    uid: 609b8a7c-6a3f-4634-99ce-88973d3dead4
  spec:
    replicas: 1
    selector:
      matchLabels:
        app.kubernetes.io/app: configdeployer-ds
        app.kubernetes.io/release: apptest-cjbnvn9r
        pod-template-hash: 76f6fc7b79
    template:
      metadata:
        annotations:
          checksum/config: c8e1a5408c7255145e9248da4e4c6e5f383c543a9db43e06662d4fccc2b73614
        creationTimestamp: null
        labels:
          app.kubernetes.io/app: configdeployer-ds
          app.kubernetes.io/release: apptest-cjbnvn9r
          pod-template-hash: 76f6fc7b79
      spec:
        affinity:
          podAntiAffinity:
            preferredDuringSchedulingIgnoredDuringExecution:
            - podAffinityTerm:
                labelSelector:
                  matchExpressions:
                  - key: app.kubernetes.io/app
                    operator: In
                    values:
                    - config-ds
                topologyKey: topology.kubernetes.io/zone
              weight: 100
        containers:
        - image: us-docker.pkg.dev/wso2-marketplace-public/wso2-marketplace/apk-config-deployer-service:4.5
          imagePullPolicy: Always
          livenessProbe:
            failureThreshold: 3
            httpGet:
              path: /health
              port: 9443
              scheme: HTTPS
            initialDelaySeconds: 20
            periodSeconds: 20
            successThreshold: 1
            timeoutSeconds: 1
          name: config-ds
          ports:
          - containerPort: 9443
            protocol: TCP
          readinessProbe:
            failureThreshold: 3
            httpGet:
              path: /health
              port: 9443
              scheme: HTTPS
            initialDelaySeconds: 20
            periodSeconds: 20
            successThreshold: 1
            timeoutSeconds: 1
          resources:
            limits:
              cpu: 500m
              memory: 1Gi
            requests:
              cpu: 200m
              memory: 512Mi
          securityContext:
            allowPrivilegeEscalation: false
            capabilities:
              drop:
              - ALL
            readOnlyRootFilesystem: true
          terminationMessagePath: /dev/termination-log
          terminationMessagePolicy: File
          volumeMounts:
          - mountPath: /home/wso2apk/config-deployer/conf/Config.toml
            name: config-toml-volume
            subPath: Config.toml
          - mountPath: /home/wso2apk/config-deployer/security/config.key
            name: config-ds-tls-volume
            subPath: tls.key
          - mountPath: /home/wso2apk/config-deployer/security/config.pem
            name: config-ds-tls-volume
            subPath: tls.crt
          - mountPath: /home/wso2apk/config-deployer/security/mg.pem
            name: enforcer-jwt-secret-volume
            subPath: mg.pem
          - mountPath: /tmp
            name: tmp
          - mountPath: /home/wso2apk/config-deployer/tmp
            name: config-deployer-temp
        dnsPolicy: ClusterFirst
        restartPolicy: Always
        schedulerName: default-scheduler
        securityContext:
          runAsNonRoot: true
          seccompProfile:
            type: RuntimeDefault
        serviceAccount: wso2apk-platform
        serviceAccountName: wso2apk-platform
        terminationGracePeriodSeconds: 30
        volumes:
        - configMap:
            defaultMode: 420
            name: apptest-cjbnvn9r-wso2-apk-config-ds-configmap
          name: config-toml-volume
        - name: config-ds-tls-volume
          secret:
            defaultMode: 420
            secretName: apptest-cjbnvn9r-wso2-apk-config-ds-server-cert
        - name: enforcer-jwt-secret-volume
          secret:
            defaultMode: 420
            secretName: apptest-cjbnvn9r-wso2-apk-enforcer-keystore-secret
        - emptyDir: {}
          name: tmp
        - emptyDir: {}
          name: config-deployer-temp
  status:
    fullyLabeledReplicas: 1
    observedGeneration: 1
    replicas: 1
- apiVersion: apps/v1
  kind: ReplicaSet
  metadata:
    annotations:
      deployment.kubernetes.io/desired-replicas: "1"
      deployment.kubernetes.io/max-replicas: "2"
      deployment.kubernetes.io/revision: "1"
    creationTimestamp: "2025-12-02T09:45:28Z"
    generation: 1
    labels:
      app.kubernetes.io/app: gateway
      app.kubernetes.io/release: apptest-cjbnvn9r
      pod-template-hash: 668466cf96
    name: apptest-cjbnvn9r-wso2-apk-gateway-runtime-deployment-668466cf96
    namespace: apptest-cjbnvn9r
    ownerReferences:
    - apiVersion: apps/v1
      blockOwnerDeletion: true
      controller: true
      kind: Deployment
      name: apptest-cjbnvn9r-wso2-apk-gateway-runtime-deployment
      uid: 2d68a965-c90e-4b2a-b436-7c43cd738227
    resourceVersion: "1764668729429567010"
    uid: 9d9da16a-9ba4-4b13-89d4-9f638a765d39
  spec:
    replicas: 1
    selector:
      matchLabels:
        app.kubernetes.io/app: gateway
        app.kubernetes.io/release: apptest-cjbnvn9r
        pod-template-hash: 668466cf96
    template:
      metadata:
        annotations:
          checksum/config: 18fd8554c652c099ae03055089c498ad1bd3845c0d82adc502056aebb34c5332
        creationTimestamp: null
        labels:
          app.kubernetes.io/app: gateway
          app.kubernetes.io/release: apptest-cjbnvn9r
          pod-template-hash: 668466cf96
      spec:
        affinity:
          podAntiAffinity:
            preferredDuringSchedulingIgnoredDuringExecution:
            - podAffinityTerm:
                labelSelector:
                  matchExpressions:
                  - key: app.kubernetes.io/app
                    operator: In
                    values:
                    - gateway-runtime
                topologyKey: topology.kubernetes.io/zone
              weight: 100
        automountServiceAccountToken: false
        containers:
        - env:
          - name: TOKEN_REVOCATION_ENABLED
            value: "true"
          - name: ADAPTER_HOST_NAME
            value: apptest-cjbnvn9r-wso2-apk-adapter-service.apptest-cjbnvn9r.svc
          - name: ADAPTER_HOST
            value: apptest-cjbnvn9r-wso2-apk-adapter-service.apptest-cjbnvn9r.svc
          - name: COMMON_CONTROLLER_HOST_NAME
            value: apptest-cjbnvn9r-wso2-apk-common-controller-service.apptest-cjbnvn9r.svc
          - name: COMMON_CONTROLLER_HOST
            value: apptest-cjbnvn9r-wso2-apk-common-controller-service.apptest-cjbnvn9r.svc
          - name: RATELIMITER_HOST
            value: apptest-cjbnvn9r-wso2-apk-ratelimiter-service.apptest-cjbnvn9r.svc
          - name: ENFORCER_PRIVATE_KEY_PATH
            value: /home/wso2/security/keystore/enforcer.key
          - name: ENFORCER_PUBLIC_CERT_PATH
            value: /home/wso2/security/keystore/enforcer.crt
          - name: ENFORCER_SERVER_NAME
            value: apptest-cjbnvn9r-wso2-apk-enforcer-service.apptest-cjbnvn9r.svc
          - name: TRUSTED_CA_CERTS_PATH
            value: /home/wso2/security/truststore
          - name: ADAPTER_XDS_PORT
            value: "18000"
          - name: RATELIMITER_PORT
            value: "8091"
          - name: COMMON_CONTROLLER_XDS_PORT
            value: "18002"
          - name: COMMON_CONTROLLER_REST_PORT
            value: "18003"
          - name: ENFORCER_LABEL
            value: wso2-apk-default
          - name: ENFORCER_REGION
            value: UNKNOWN
          - name: XDS_MAX_MSG_SIZE
            value: "4194304"
          - name: XDS_MAX_RETRIES
            value: "3"
          - name: enforcer_admin_pwd
            value: admin
          - name: REDIS_USERNAME
            value: default
          - name: REDIS_PASSWORD
          - name: REDIS_HOST
            value: redis-master
          - name: REDIS_PORT
            value: "6379"
          - name: IS_REDIS_TLS_ENABLED
            value: "false"
          - name: REDIS_REVOKED_TOKENS_CHANNEL
            value: wso2-apk-revoked-tokens-channel
          - name: REDIS_KEY_FILE
            value: /home/wso2/security/truststore/enforcer.key
          - name: REDIS_CERT_FILE
            value: /home/wso2/security/truststore/enforcer.crt
          - name: REDIS_CA_CERT_FILE
            value: /home/wso2/security/truststore/enforcer.crt
          - name: REVOKED_TOKEN_CLEANUP_INTERVAL
            value: "3600"
          image: us-docker.pkg.dev/wso2-marketplace-public/wso2-marketplace/apk-enforcer:4.5
          imagePullPolicy: Always
          livenessProbe:
            exec:
              command:
              - sh
              - check_health.sh
            failureThreshold: 5
            initialDelaySeconds: 20
            periodSeconds: 20
            successThreshold: 1
            timeoutSeconds: 1
          name: enforcer
          ports:
          - containerPort: 8081
            protocol: TCP
          - containerPort: 9001
            protocol: TCP
          - containerPort: 5006
            protocol: TCP
          - containerPort: 8084
            protocol: TCP
          - containerPort: 9092
            protocol: TCP
          - containerPort: 18002
            protocol: TCP
          readinessProbe:
            exec:
              command:
              - sh
              - check_health.sh
            failureThreshold: 5
            initialDelaySeconds: 20
            periodSeconds: 20
            successThreshold: 1
            timeoutSeconds: 1
          resources:
            limits:
              cpu: 500m
              memory: 512Mi
            requests:
              cpu: 200m
              memory: 128Mi
          securityContext:
            allowPrivilegeEscalation: false
            capabilities:
              drop:
              - ALL
            readOnlyRootFilesystem: true
            runAsNonRoot: true
          terminationMessagePath: /dev/termination-log
          terminationMessagePolicy: File
          volumeMounts:
          - mountPath: /tmp
            name: tmp
          - mountPath: /home/wso2/security/keystore/enforcer.key
            name: enforcer-keystore-secret-volume
            subPath: tls.key
          - mountPath: /home/wso2/security/keystore/enforcer.crt
            name: enforcer-keystore-secret-volume
            subPath: tls.crt
          - mountPath: /home/wso2/security/truststore/apk.crt
            name: enforcer-keystore-secret-volume
            subPath: ca.crt
          - mountPath: /home/wso2/security/truststore/enforcer.crt
            name: enforcer-keystore-secret-volume
            subPath: tls.crt
          - mountPath: /home/wso2/security/truststore/adapter.crt
            name: adapter-truststore-secret-volume
            subPath: tls.crt
          - mountPath: /home/wso2/security/truststore/router.crt
            name: router-keystore-secret-volume
            subPath: tls.crt
          - mountPath: /home/wso2/conf/
            name: log-conf-volume
          - mountPath: /home/wso2/check_health.sh
            name: enforcer-health-check-volume
            subPath: check_health.sh
          - mountPath: /home/wso2/security/keystore/mg.pem
            name: enforcer-jwt-secret-volume
            subPath: mg.pem
          - mountPath: /home/wso2/security/truststore/mg.pem
            name: enforcer-jwt-secret-volume
            subPath: mg.pem
          - mountPath: /home/wso2/security/keystore/mg.key
            name: enforcer-jwt-secret-volume
            subPath: mg.key
          - mountPath: /home/wso2/security/truststore/wso2carbon.pem
            name: enforcer-trusted-certs
            subPath: wso2carbon.pem
          - mountPath: /home/wso2/security/truststore/wso2-apim-carbon.pem
            name: enforcer-apikey-cert
            subPath: wso2-apim-carbon.pem
          - mountPath: /home/wso2/security/truststore/idp.pem
            name: idp-certificate-secret-volume
            subPath: wso2carbon.pem
          - mountPath: /home/wso2/security/truststore/ratelimiter.crt
            name: ratelimiter-truststore-secret-volume
            subPath: tls.crt
          - mountPath: /home/wso2/security/truststore/ratelimiter-ca.crt
            name: ratelimiter-truststore-secret-volume
            subPath: ca.crt
        - env:
          - name: ADAPTER_HOST_NAME
            value: apptest-cjbnvn9r-wso2-apk-adapter-service.apptest-cjbnvn9r.svc
          - name: ADAPTER_HOST
            value: apptest-cjbnvn9r-wso2-apk-adapter-service.apptest-cjbnvn9r.svc
          - name: ENFORCER_HOST
            value: 127.0.0.1
          - name: ENFORCER_ANALYTICS_HOST
            value: 127.0.0.1
          - name: ROUTER_ADMIN_HOST
            value: 0.0.0.0
          - name: ROUTER_ADMIN_PORT
            value: "9000"
          - name: ROUTER_PORT
            value: "9095"
          - name: ROUTER_CLUSTER
            value: apk_router_cluster
          - name: ROUTER_LABEL
            value: wso2-apk-default
          - name: ROUTER_PRIVATE_KEY_PATH
            value: /home/wso2/security/keystore/router.key
          - name: ROUTER_PUBLIC_CERT_PATH
            value: /home/wso2/security/keystore/router.crt
          - name: ADAPTER_PORT
            value: "18000"
          - name: ADAPTER_CA_CERT_PATH
            value: /home/wso2/security/truststore/adapter.crt
          - name: ENFORCER_PORT
            value: "8081"
          - name: ENFORCER_ANALYTICS_RECEIVER_PORT
            value: "18090"
          - name: ENFORCER_CA_CERT_PATH
            value: /home/wso2/security/truststore/enforcer.crt
          - name: CONCURRENCY
            value: "2"
          image: us-docker.pkg.dev/wso2-marketplace-public/wso2-marketplace/apk-router:4.5
          imagePullPolicy: Always
          livenessProbe:
            exec:
              command:
              - sh
              - router_check_health.sh
              - health
            failureThreshold: 5
            initialDelaySeconds: 20
            periodSeconds: 20
            successThreshold: 1
            timeoutSeconds: 1
          name: router
          ports:
          - containerPort: 9095
            protocol: TCP
          - containerPort: 9090
            protocol: TCP
          - containerPort: 9091
            protocol: TCP
          - containerPort: 9000
            protocol: TCP
          readinessProbe:
            exec:
              command:
              - sh
              - router_check_health.sh
              - health
            failureThreshold: 5
            initialDelaySeconds: 20
            periodSeconds: 20
            successThreshold: 1
            timeoutSeconds: 1
          resources:
            limits:
              cpu: "1"
              memory: 1028Mi
            requests:
              cpu: 200m
              memory: 128Mi
          securityContext:
            allowPrivilegeEscalation: false
            capabilities:
              drop:
              - ALL
            readOnlyRootFilesystem: true
            runAsNonRoot: true
          startupProbe:
            exec:
              command:
              - sh
              - router_check_health.sh
              - health
            failureThreshold: 5
            initialDelaySeconds: 20
            periodSeconds: 20
            successThreshold: 1
            timeoutSeconds: 1
          terminationMessagePath: /dev/termination-log
          terminationMessagePolicy: File
          volumeMounts:
          - mountPath: /home/wso2/security/keystore/router.key
            name: router-keystore-secret-volume
            subPath: tls.key
          - mountPath: /home/wso2/security/keystore/router.crt
            name: router-keystore-secret-volume
            subPath: tls.crt
          - mountPath: /home/wso2/security/truststore/adapter.crt
            name: adapter-truststore-secret-volume
            subPath: tls.crt
          - mountPath: /home/wso2/security/truststore/enforcer.crt
            name: enforcer-keystore-secret-volume
            subPath: tls.crt
          - mountPath: /home/wso2/conf/
            name: log-conf-volume
          - mountPath: /home/wso2/security/truststore/ratelimiter.crt
            name: ratelimiter-truststore-secret-volume
            subPath: tls.crt
          - mountPath: /home/wso2/security/truststore/ratelimiter-ca.crt
            name: ratelimiter-truststore-secret-volume
            subPath: ca.crt
        dnsPolicy: ClusterFirst
        restartPolicy: Always
        schedulerName: default-scheduler
        securityContext:
          seccompProfile:
            type: RuntimeDefault
        terminationGracePeriodSeconds: 30
        volumes:
        - name: ratelimiter-truststore-secret-volume
          secret:
            defaultMode: 420
            secretName: apptest-cjbnvn9r-wso2-apk-ratelimiter-server-cert
        - name: enforcer-keystore-secret-volume
          secret:
            defaultMode: 420
            secretName: apptest-cjbnvn9r-wso2-apk-enforcer-server-cert
        - configMap:
            defaultMode: 420
            name: apptest-cjbnvn9r-wso2-apk-log-conf
          name: log-conf-volume
        - configMap:
            defaultMode: 420
            name: apptest-cjbnvn9r-wso2-apk-enforcer-grpc-probe-script-conf
          name: enforcer-health-check-volume
        - name: router-keystore-secret-volume
          secret:
            defaultMode: 420
            secretName: apptest-cjbnvn9r-wso2-apk-gateway-server-cert
        - name: adapter-truststore-secret-volume
          secret:
            defaultMode: 420
            secretName: apptest-cjbnvn9r-wso2-apk-adapter-server-cert
        - name: enforcer-jwt-secret-volume
          secret:
            defaultMode: 420
            secretName: apptest-cjbnvn9r-wso2-apk-enforcer-keystore-secret
        - name: enforcer-trusted-certs
          secret:
            defaultMode: 420
            secretName: apptest-cjbnvn9r-wso2-apk-enforcer-truststore-secret
        - name: enforcer-apikey-cert
          secret:
            defaultMode: 420
            secretName: apptest-cjbnvn9r-wso2-apk-enforcer-truststore-secret
        - name: idp-certificate-secret-volume
          secret:
            defaultMode: 420
            secretName: apptest-cjbnvn9r-wso2-apk-enforcer-truststore-secret
        - emptyDir: {}
          name: tmp
  status:
    fullyLabeledReplicas: 1
    observedGeneration: 1
    replicas: 1
- apiVersion: apps/v1
  kind: ReplicaSet
  metadata:
    annotations:
      deployment.kubernetes.io/desired-replicas: "1"
      deployment.kubernetes.io/max-replicas: "2"
      deployment.kubernetes.io/revision: "1"
    creationTimestamp: "2025-12-02T09:45:29Z"
    generation: 1
    labels:
      app.kubernetes.io/app: ratelimiter
      app.kubernetes.io/release: apptest-cjbnvn9r
      pod-template-hash: 5d9c9c9999
    name: apptest-cjbnvn9r-wso2-apk-ratelimiter-deployment-5d9c9c9999
    namespace: apptest-cjbnvn9r
    ownerReferences:
    - apiVersion: apps/v1
      blockOwnerDeletion: true
      controller: true
      kind: Deployment
      name: apptest-cjbnvn9r-wso2-apk-ratelimiter-deployment
      uid: 7dbf853e-dfdb-41a8-a427-275863402ef5
    resourceVersion: "1764668729534527019"
    uid: 1f22e39d-e078-415b-b099-85e046cf5960
  spec:
    replicas: 1
    selector:
      matchLabels:
        app.kubernetes.io/app: ratelimiter
        app.kubernetes.io/release: apptest-cjbnvn9r
        pod-template-hash: 5d9c9c9999
    template:
      metadata:
        creationTimestamp: null
        labels:
          app.kubernetes.io/app: ratelimiter
          app.kubernetes.io/release: apptest-cjbnvn9r
          pod-template-hash: 5d9c9c9999
      spec:
        affinity:
          podAntiAffinity:
            preferredDuringSchedulingIgnoredDuringExecution:
            - podAffinityTerm:
                labelSelector:
                  matchExpressions:
                  - key: app.kubernetes.io/app
                    operator: In
                    values:
                    - rate-limiter
                topologyKey: topology.kubernetes.io/zone
              weight: 100
        automountServiceAccountToken: false
        containers:
        - env:
          - name: HOST
            value: 0.0.0.0
          - name: PORT
            value: "8090"
          - name: USE_STATSD
            value: "false"
          - name: LOG_LEVEL
            value: DEBUG
          - name: LIMIT_RESPONSE_HEADERS_ENABLED
            value: "false"
          - name: REDIS_TYPE
            value: single
          - name: REDIS_SOCKET_TYPE
            value: tcp
          - name: REDIS_URL
            value: redis-master:6379
          - name: REDIS_PIPELINE_WINDOW
            value: 0.2ms
          - name: REDIS_PIPELINE_LIMIT
            value: "0"
          - name: GRPC_HOST
            value: 0.0.0.0
          - name: GRPC_PORT
            value: "8091"
          - name: GRPC_SERVER_USE_TLS
            value: "true"
          - name: GRPC_SERVER_TLS_KEY
            value: /home/wso2/security/keystore/ratelimiter.key
          - name: GRPC_SERVER_TLS_CERT
            value: /home/wso2/security/keystore/ratelimiter.crt
          - name: GRPC_CLIENT_TLS_CACERT
            value: /home/wso2/security/truststore/ratelimiter-ca.crt
          - name: RATELIMITER_LABEL
            value: ratelimiter
          - name: CONFIG_GRPC_XDS_SERVER_URL
            value: apptest-cjbnvn9r-wso2-apk-common-controller-service.apptest-cjbnvn9r.svc:18005
          - name: CONFIG_GRPC_XDS_SERVER_USE_TLS
            value: "true"
          - name: CONFIG_GRPC_XDS_CLIENT_TLS_KEY
            value: /home/wso2/security/keystore/ratelimiter.key
          - name: CONFIG_GRPC_XDS_CLIENT_TLS_CERT
            value: /home/wso2/security/keystore/ratelimiter.crt
          - name: CONFIG_GRPC_XDS_SERVER_TLS_CACERT
            value: /home/wso2/security/truststore/ratelimiter-ca.crt
          - name: CONFIG_GRPC_XDS_SERVER_TLS_SAN
            value: apptest-cjbnvn9r-wso2-apk-common-controller-service.apptest-cjbnvn9r.svc
          image: us-docker.pkg.dev/wso2-marketplace-public/wso2-marketplace/apk-ratelimiter:4.5
          imagePullPolicy: Always
          livenessProbe:
            failureThreshold: 5
            httpGet:
              path: /healthcheck
              port: 8090
              scheme: HTTP
            initialDelaySeconds: 20
            periodSeconds: 20
            successThreshold: 1
            timeoutSeconds: 1
          name: ratelimiter
          ports:
          - containerPort: 8090
            protocol: TCP
          - containerPort: 8091
            protocol: TCP
          - containerPort: 6070
            protocol: TCP
          readinessProbe:
            failureThreshold: 5
            httpGet:
              path: /healthcheck
              port: 8090
              scheme: HTTP
            initialDelaySeconds: 20
            periodSeconds: 20
            successThreshold: 1
            timeoutSeconds: 1
          resources:
            limits:
              cpu: 100m
              memory: 128Mi
            requests:
              cpu: 50m
              memory: 64Mi
          securityContext:
            allowPrivilegeEscalation: false
            capabilities:
              drop:
              - ALL
            readOnlyRootFilesystem: true
          terminationMessagePath: /dev/termination-log
          terminationMessagePolicy: File
          volumeMounts:
          - mountPath: /home/wso2/security/keystore/ratelimiter.key
            name: ratelimiter-keystore-secret-volume
            subPath: tls.key
          - mountPath: /home/wso2/security/keystore/ratelimiter.crt
            name: ratelimiter-keystore-secret-volume
            subPath: tls.crt
          - mountPath: /home/wso2/security/truststore/ratelimiter-ca.crt
            name: ratelimiter-keystore-secret-volume
            subPath: ca.crt
          - mountPath: /home/wso2/security/truststore/adapter.pem
            name: common-controller-truststore-secret-volume
            subPath: tls.crt
          - mountPath: /home/wso2/security/truststore/router.pem
            name: router-truststore-secret-volume
            subPath: tls.crt
        dnsPolicy: ClusterFirst
        restartPolicy: Always
        schedulerName: default-scheduler
        securityContext:
          runAsNonRoot: true
          seccompProfile:
            type: RuntimeDefault
        serviceAccount: wso2apk-platform
        serviceAccountName: wso2apk-platform
        terminationGracePeriodSeconds: 30
        volumes:
        - name: ratelimiter-keystore-secret-volume
          secret:
            defaultMode: 420
            secretName: apptest-cjbnvn9r-wso2-apk-ratelimiter-server-cert
        - name: common-controller-truststore-secret-volume
          secret:
            defaultMode: 420
            secretName: apptest-cjbnvn9r-wso2-apk-common-controller-server-cert
        - name: router-truststore-secret-volume
          secret:
            defaultMode: 420
            secretName: apptest-cjbnvn9r-wso2-apk-gateway-server-cert
  status:
    fullyLabeledReplicas: 1
    observedGeneration: 1
    replicas: 1
- apiVersion: apps/v1
  kind: StatefulSet
  metadata:
    annotations:
      kubectl.kubernetes.io/last-applied-configuration: |
        {"apiVersion":"apps/v1","kind":"StatefulSet","metadata":{"annotations":{},"labels":{"app.kubernetes.io/component":"master","app.kubernetes.io/instance":"apptest-cjbnvn9r","app.kubernetes.io/managed-by":"Helm","app.kubernetes.io/name":"redis","app.kubernetes.io/version":"7.4.2","helm.sh/chart":"redis-20.10.0"},"name":"redis-master","namespace":"apptest-cjbnvn9r","ownerReferences":[{"apiVersion":"app.k8s.io/v1beta1","blockOwnerDeletion":true,"kind":"Application","name":"apptest-cjbnvn9r","uid":"69b7b8be-e784-4125-bcec-88e5f1f3ef36"}]},"spec":{"replicas":1,"revisionHistoryLimit":10,"selector":{"matchLabels":{"app.kubernetes.io/component":"master","app.kubernetes.io/instance":"apptest-cjbnvn9r","app.kubernetes.io/name":"redis"}},"serviceName":"redis-headless","template":{"metadata":{"annotations":{"checksum/configmap":"2a9ab4a5432825504d910f022638674ce88eaefe9f9f595ad8bc107377d104fb","checksum/health":"aff24913d801436ea469d8d374b2ddb3ec4c43ee7ab24663d5f8ff1a1b6991a9","checksum/scripts":"bdec350b84a1ace7cc118db113a21c9f160bde3425b07714e1c0c1da722621cf","checksum/secret":"44136fa355b3678a1146ad16f7e8649e94fb4fc21fe77e8310c060f61caaff8a"},"labels":{"app.kubernetes.io/component":"master","app.kubernetes.io/instance":"apptest-cjbnvn9r","app.kubernetes.io/managed-by":"Helm","app.kubernetes.io/name":"redis","app.kubernetes.io/version":"7.4.2","helm.sh/chart":"redis-20.10.0"}},"spec":{"affinity":{"nodeAffinity":null,"podAffinity":null,"podAntiAffinity":{"preferredDuringSchedulingIgnoredDuringExecution":[{"podAffinityTerm":{"labelSelector":{"matchLabels":{"app.kubernetes.io/component":"master","app.kubernetes.io/instance":"apptest-cjbnvn9r","app.kubernetes.io/name":"redis"}},"topologyKey":"kubernetes.io/hostname"},"weight":1}]}},"automountServiceAccountToken":false,"containers":[{"args":["-c","/opt/bitnami/scripts/start-scripts/start-master.sh"],"command":["/bin/bash"],"env":[{"name":"BITNAMI_DEBUG","value":"true"},{"name":"REDIS_REPLICATION_MODE","value":"master"},{"name":"ALLOW_EMPTY_PASSWORD","value":"yes"},{"name":"REDIS_TLS_ENABLED","value":"no"},{"name":"REDIS_PORT","value":"6379"}],"image":"docker.io/bitnamilegacy/redis:7.4.2-debian-12-r4","imagePullPolicy":"IfNotPresent","livenessProbe":{"exec":{"command":["sh","-c","/health/ping_liveness_local.sh 5"]},"failureThreshold":5,"initialDelaySeconds":20,"periodSeconds":5,"successThreshold":1,"timeoutSeconds":6},"name":"redis","ports":[{"containerPort":6379,"name":"redis"}],"readinessProbe":{"exec":{"command":["sh","-c","/health/ping_readiness_local.sh 1"]},"failureThreshold":5,"initialDelaySeconds":20,"periodSeconds":5,"successThreshold":1,"timeoutSeconds":2},"resources":{"limits":{"cpu":"150m","ephemeral-storage":"2Gi","memory":"192Mi"},"requests":{"cpu":"100m","ephemeral-storage":"50Mi","memory":"128Mi"}},"securityContext":{"allowPrivilegeEscalation":false,"capabilities":{"drop":["ALL"]},"readOnlyRootFilesystem":true,"runAsGroup":1001,"runAsNonRoot":true,"seLinuxOptions":{},"seccompProfile":{"type":"RuntimeDefault"}},"volumeMounts":[{"mountPath":"/opt/bitnami/scripts/start-scripts","name":"start-scripts"},{"mountPath":"/health","name":"health"},{"mountPath":"/data","name":"redis-data"},{"mountPath":"/opt/bitnami/redis/mounted-etc","name":"config"},{"mountPath":"/opt/bitnami/redis/etc/","name":"empty-dir","subPath":"app-conf-dir"},{"mountPath":"/tmp","name":"empty-dir","subPath":"tmp-dir"}]}],"enableServiceLinks":true,"securityContext":{"fsGroup":1001,"fsGroupChangePolicy":"Always","runAsNonRoot":true,"seccompProfile":{"type":"RuntimeDefault"},"supplementalGroups":[],"sysctls":[]},"serviceAccountName":"redis-master","terminationGracePeriodSeconds":30,"volumes":[{"configMap":{"defaultMode":493,"name":"redis-scripts"},"name":"start-scripts"},{"configMap":{"defaultMode":493,"name":"redis-health"},"name":"health"},{"configMap":{"name":"redis-configuration"},"name":"config"},{"emptyDir":{},"name":"empty-dir"}]}},"updateStrategy":{"type":"RollingUpdate"},"volumeClaimTemplates":[{"apiVersion":"v1","kind":"PersistentVolumeClaim","metadata":{"labels":{"app.kubernetes.io/component":"master","app.kubernetes.io/instance":"apptest-cjbnvn9r","app.kubernetes.io/name":"redis"},"name":"redis-data"},"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"8Gi"}}}}]}}
    creationTimestamp: "2025-12-02T09:45:29Z"
    generation: 1
    labels:
      app.kubernetes.io/component: master
      app.kubernetes.io/instance: apptest-cjbnvn9r
      app.kubernetes.io/managed-by: Helm
      app.kubernetes.io/name: redis
      app.kubernetes.io/version: 7.4.2
      helm.sh/chart: redis-20.10.0
    name: redis-master
    namespace: apptest-cjbnvn9r
    ownerReferences:
    - apiVersion: app.k8s.io/v1beta1
      blockOwnerDeletion: true
      kind: Application
      name: apptest-cjbnvn9r
      uid: 69b7b8be-e784-4125-bcec-88e5f1f3ef36
    resourceVersion: "1764668729744367020"
    uid: 27b58621-49d4-4276-aa24-8d028136523a
  spec:
    persistentVolumeClaimRetentionPolicy:
      whenDeleted: Retain
      whenScaled: Retain
    podManagementPolicy: OrderedReady
    replicas: 1
    revisionHistoryLimit: 10
    selector:
      matchLabels:
        app.kubernetes.io/component: master
        app.kubernetes.io/instance: apptest-cjbnvn9r
        app.kubernetes.io/name: redis
    serviceName: redis-headless
    template:
      metadata:
        annotations:
          checksum/configmap: 2a9ab4a5432825504d910f022638674ce88eaefe9f9f595ad8bc107377d104fb
          checksum/health: aff24913d801436ea469d8d374b2ddb3ec4c43ee7ab24663d5f8ff1a1b6991a9
          checksum/scripts: bdec350b84a1ace7cc118db113a21c9f160bde3425b07714e1c0c1da722621cf
          checksum/secret: 44136fa355b3678a1146ad16f7e8649e94fb4fc21fe77e8310c060f61caaff8a
        creationTimestamp: null
        labels:
          app.kubernetes.io/component: master
          app.kubernetes.io/instance: apptest-cjbnvn9r
          app.kubernetes.io/managed-by: Helm
          app.kubernetes.io/name: redis
          app.kubernetes.io/version: 7.4.2
          helm.sh/chart: redis-20.10.0
      spec:
        affinity:
          podAntiAffinity:
            preferredDuringSchedulingIgnoredDuringExecution:
            - podAffinityTerm:
                labelSelector:
                  matchLabels:
                    app.kubernetes.io/component: master
                    app.kubernetes.io/instance: apptest-cjbnvn9r
                    app.kubernetes.io/name: redis
                topologyKey: kubernetes.io/hostname
              weight: 1
        automountServiceAccountToken: false
        containers:
        - args:
          - -c
          - /opt/bitnami/scripts/start-scripts/start-master.sh
          command:
          - /bin/bash
          env:
          - name: BITNAMI_DEBUG
            value: "true"
          - name: REDIS_REPLICATION_MODE
            value: master
          - name: ALLOW_EMPTY_PASSWORD
            value: "yes"
          - name: REDIS_TLS_ENABLED
            value: "no"
          - name: REDIS_PORT
            value: "6379"
          image: docker.io/bitnamilegacy/redis:7.4.2-debian-12-r4
          imagePullPolicy: IfNotPresent
          livenessProbe:
            exec:
              command:
              - sh
              - -c
              - /health/ping_liveness_local.sh 5
            failureThreshold: 5
            initialDelaySeconds: 20
            periodSeconds: 5
            successThreshold: 1
            timeoutSeconds: 6
          name: redis
          ports:
          - containerPort: 6379
            name: redis
            protocol: TCP
          readinessProbe:
            exec:
              command:
              - sh
              - -c
              - /health/ping_readiness_local.sh 1
            failureThreshold: 5
            initialDelaySeconds: 20
            periodSeconds: 5
            successThreshold: 1
            timeoutSeconds: 2
          resources:
            limits:
              cpu: 150m
              ephemeral-storage: 2Gi
              memory: 192Mi
            requests:
              cpu: 100m
              ephemeral-storage: 50Mi
              memory: 128Mi
          securityContext:
            allowPrivilegeEscalation: false
            capabilities:
              drop:
              - ALL
            readOnlyRootFilesystem: true
            runAsGroup: 1001
            runAsNonRoot: true
            seLinuxOptions: {}
            seccompProfile:
              type: RuntimeDefault
          terminationMessagePath: /dev/termination-log
          terminationMessagePolicy: File
          volumeMounts:
          - mountPath: /opt/bitnami/scripts/start-scripts
            name: start-scripts
          - mountPath: /health
            name: health
          - mountPath: /data
            name: redis-data
          - mountPath: /opt/bitnami/redis/mounted-etc
            name: config
          - mountPath: /opt/bitnami/redis/etc/
            name: empty-dir
            subPath: app-conf-dir
          - mountPath: /tmp
            name: empty-dir
            subPath: tmp-dir
        dnsPolicy: ClusterFirst
        enableServiceLinks: true
        restartPolicy: Always
        schedulerName: default-scheduler
        securityContext:
          fsGroup: 1001
          fsGroupChangePolicy: Always
          runAsNonRoot: true
          seccompProfile:
            type: RuntimeDefault
        serviceAccount: redis-master
        serviceAccountName: redis-master
        terminationGracePeriodSeconds: 30
        volumes:
        - configMap:
            defaultMode: 493
            name: redis-scripts
          name: start-scripts
        - configMap:
            defaultMode: 493
            name: redis-health
          name: health
        - configMap:
            defaultMode: 420
            name: redis-configuration
          name: config
        - emptyDir: {}
          name: empty-dir
    updateStrategy:
      type: RollingUpdate
    volumeClaimTemplates:
    - apiVersion: v1
      kind: PersistentVolumeClaim
      metadata:
        creationTimestamp: null
        labels:
          app.kubernetes.io/component: master
          app.kubernetes.io/instance: apptest-cjbnvn9r
          app.kubernetes.io/name: redis
        name: redis-data
      spec:
        accessModes:
        - ReadWriteOnce
        resources:
          requests:
            storage: 8Gi
        volumeMode: Filesystem
      status:
        phase: Pending
  status:
    availableReplicas: 0
    collisionCount: 0
    currentReplicas: 1
    currentRevision: redis-master-5fdd667976
    observedGeneration: 1
    replicas: 1
    updateRevision: redis-master-5fdd667976
    updatedReplicas: 1
- apiVersion: batch/v1
  kind: Job
  metadata:
    annotations:
      kubectl.kubernetes.io/last-applied-configuration: |
        {"apiVersion":"batch/v1","kind":"Job","metadata":{"annotations":{},"labels":{"app.kubernetes.io/component":"deployer.marketplace.cloud.google.com","app.kubernetes.io/name":"apptest-cjbnvn9r","marketplace.cloud.google.com/deployer":"Main"},"name":"apptest-cjbnvn9r-deployer","namespace":"apptest-cjbnvn9r","ownerReferences":[{"apiVersion":"app.k8s.io/v1beta1","blockOwnerDeletion":true,"kind":"Application","name":"apptest-cjbnvn9r","uid":"69b7b8be-e784-4125-bcec-88e5f1f3ef36"}]},"spec":{"backoffLimit":0,"template":{"metadata":{"annotations":{"sidecar.istio.io/inject":"false"}},"spec":{"containers":[{"command":["/bin/deploy_with_tests.sh"],"image":"us-docker.pkg.dev/wso2-marketplace-public/wso2-marketplace/deployer:4.5","imagePullPolicy":"Always","name":"deployer","resources":{"requests":{"cpu":"100m","memory":"100Mi"}},"volumeMounts":[{"mountPath":"/data/values.yaml","name":"config-volume","readOnly":true,"subPath":"values.yaml"}]}],"restartPolicy":"Never","serviceAccountName":"apptest-cjbnvn9r-deployer-sa","volumes":[{"name":"config-volume","secret":{"secretName":"apptest-cjbnvn9r-deployer-config"}}]}}}}
    creationTimestamp: "2025-12-02T09:45:14Z"
    generation: 1
    labels:
      app.kubernetes.io/component: deployer.marketplace.cloud.google.com
      app.kubernetes.io/name: apptest-cjbnvn9r
      marketplace.cloud.google.com/deployer: Main
    name: apptest-cjbnvn9r-deployer
    namespace: apptest-cjbnvn9r
    ownerReferences:
    - apiVersion: app.k8s.io/v1beta1
      blockOwnerDeletion: true
      kind: Application
      name: apptest-cjbnvn9r
      uid: 69b7b8be-e784-4125-bcec-88e5f1f3ef36
    resourceVersion: "1764668734017807018"
    uid: 1b19e41d-736d-4202-87d7-e4465fe0f6e5
  spec:
    backoffLimit: 0
    completionMode: NonIndexed
    completions: 1
    manualSelector: false
    parallelism: 1
    podReplacementPolicy: TerminatingOrFailed
    selector:
      matchLabels:
        batch.kubernetes.io/controller-uid: 1b19e41d-736d-4202-87d7-e4465fe0f6e5
    suspend: false
    template:
      metadata:
        annotations:
          sidecar.istio.io/inject: "false"
        creationTimestamp: null
        labels:
          batch.kubernetes.io/controller-uid: 1b19e41d-736d-4202-87d7-e4465fe0f6e5
          batch.kubernetes.io/job-name: apptest-cjbnvn9r-deployer
          controller-uid: 1b19e41d-736d-4202-87d7-e4465fe0f6e5
          job-name: apptest-cjbnvn9r-deployer
      spec:
        containers:
        - command:
          - /bin/deploy_with_tests.sh
          image: us-docker.pkg.dev/wso2-marketplace-public/wso2-marketplace/deployer:4.5
          imagePullPolicy: Always
          name: deployer
          resources:
            requests:
              cpu: 100m
              memory: 100Mi
          terminationMessagePath: /dev/termination-log
          terminationMessagePolicy: File
          volumeMounts:
          - mountPath: /data/values.yaml
            name: config-volume
            readOnly: true
            subPath: values.yaml
        dnsPolicy: ClusterFirst
        restartPolicy: Never
        schedulerName: default-scheduler
        securityContext: {}
        serviceAccount: apptest-cjbnvn9r-deployer-sa
        serviceAccountName: apptest-cjbnvn9r-deployer-sa
        terminationGracePeriodSeconds: 30
        volumes:
        - name: config-volume
          secret:
            defaultMode: 420
            secretName: apptest-cjbnvn9r-deployer-config
  status:
    conditions:
    - lastProbeTime: "2025-12-02T09:45:33Z"
      lastTransitionTime: "2025-12-02T09:45:33Z"
      message: Job has reached the specified backoff limit
      reason: BackoffLimitExceeded
      status: "True"
      type: FailureTarget
    - lastProbeTime: "2025-12-02T09:45:34Z"
      lastTransitionTime: "2025-12-02T09:45:34Z"
      message: Job has reached the specified backoff limit
      reason: BackoffLimitExceeded
      status: "True"
      type: Failed
    failed: 1
    ready: 0
    startTime: "2025-12-02T09:45:14Z"
    terminating: 0
    uncountedTerminatedPods: {}
- apiVersion: app.k8s.io/v1beta1
  kind: Application
  metadata:
    annotations:
      kubectl.kubernetes.io/last-applied-configuration: |
        {"apiVersion":"app.k8s.io/v1beta1","kind":"Application","metadata":{"annotations":{"kubernetes-engine.cloud.google.com/icon":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mNk+M9QDwADhgGAWjR9awAAAABJRU5ErkJggg==","marketplace.cloud.google.com/deploy-info":"{\"partner_id\": \"wso2-marketplace-public\", \"product_id\": \"wso2-apim-kubernetes\", \"partner_name\": \"WSO2\"}"},"labels":{"app.kubernetes.io/name":"apptest-cjbnvn9r"},"name":"apptest-cjbnvn9r","namespace":"apptest-cjbnvn9r"},"spec":{"componentKinds":[{"group":"apps/v1","kind":"Deployment"},{"group":"apps/v1","kind":"StatefulSet"},{"group":"v1","kind":"Service"},{"group":"v1","kind":"ConfigMap"},{"group":"v1","kind":"Secret"}],"descriptor":{"description":"WSO2 API Manager provides a complete platform for building, managing, and scaling APIs.","links":[{"description":"User Guide: Getting Started","url":"https://apim.docs.wso2.com/"},{"description":"WSO2 API Manager Documentation","url":"https://apim.docs.wso2.com/en/latest/"}],"maintainers":[{"name":"WSO2","url":"https://wso2.com"}],"notes":"WSO2 API Manager has been deployed. Access the management console and API gateway according to your ingress configuration.","type":"WSO2 API Manager","version":"4.5.0"},"selector":{"matchLabels":{"app.kubernetes.io/name":"apptest-cjbnvn9r"}}}}
      kubernetes-engine.cloud.google.com/icon: data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mNk+M9QDwADhgGAWjR9awAAAABJRU5ErkJggg==
      marketplace.cloud.google.com/deploy-info: '{"partner_id": "wso2-marketplace-public",
        "product_id": "wso2-apim-kubernetes", "partner_name": "WSO2"}'
    creationTimestamp: "2025-12-02T09:44:46Z"
    generation: 3
    labels:
      app.kubernetes.io/name: apptest-cjbnvn9r
    name: apptest-cjbnvn9r
    namespace: apptest-cjbnvn9r
    resourceVersion: "1764668731176719014"
    uid: 69b7b8be-e784-4125-bcec-88e5f1f3ef36
  spec:
    assemblyPhase: Failed
    componentKinds:
    - group: apps/v1
      kind: Deployment
    - group: apps/v1
      kind: StatefulSet
    - group: v1
      kind: Service
    - group: v1
      kind: ConfigMap
    - group: v1
      kind: Secret
    descriptor:
      description: WSO2 API Manager provides a complete platform for building, managing,
        and scaling APIs.
      links:
      - description: 'User Guide: Getting Started'
        url: https://apim.docs.wso2.com/
      - description: WSO2 API Manager Documentation
        url: https://apim.docs.wso2.com/en/latest/
      maintainers:
      - name: WSO2
        url: https://wso2.com
      notes: WSO2 API Manager has been deployed. Access the management console and
        API gateway according to your ingress configuration.
      type: WSO2 API Manager
      version: 4.5.0
    selector:
      matchLabels:
        app.kubernetes.io/name: apptest-cjbnvn9r
kind: List
metadata:
  resourceVersion: ""
